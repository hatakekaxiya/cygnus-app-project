(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2936],{43768:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECT_METHOD_BATCH_FETCHMSG=t.CONNECT_METHOD_FETCHMSG=t.CONNECT_METHOD_RECEIVE=t.CONNECT_METHOD_UNSUB=t.CONNECT_METHOD_SUB=t.CONNECT_METHOD_PUBLISH=t.CONNECT_METHOD_LOGIN=t.CONNECT_METHOD_PUSH=void 0,t.CONNECT_METHOD_PUSH="push",t.CONNECT_METHOD_LOGIN="login",t.CONNECT_METHOD_PUBLISH="publish",t.CONNECT_METHOD_SUB="subscribe",t.CONNECT_METHOD_UNSUB="unsubscribe",t.CONNECT_METHOD_RECEIVE="receive",t.CONNECT_METHOD_FETCHMSG="fetchMessages",t.CONNECT_METHOD_BATCH_FETCHMSG="batchFetchMessages"},81207:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXWalletConnector=void 0;let a=n(4062),c=n(14278),l=n(14550),d=n(32015),u=n(11472),h=n(36456),p=o(n(90781)),f=(0,u.resolveWebSocketImplementation)();class g{constructor(e){if(this.events=new h.EventEmitter,this.state=a.ConnectorState.InitState,this.selectedUrlIndex=0,this.retryCount=0,this.timeOutLimit=8e3,!(0,u.checkWSUrl)(e))throw Error(`CONNECTOR: invalid url ${e}`);this.url=e,this.heartbeatTimer=null,this.connectionTimeoutTimer=null,this.connectURLStorage=new l.Storage(c.OKXCONNECTOR_CACHE_KEY+c.OKXCONNECTOR_CACHE_KEY)}get connecting(){return this.state==a.ConnectorState.Connecting}onPayload(e){if(void 0!==e.data){if(p.logDebug("get received data"),p.logDebug(e),"string"==typeof e.data&&"pong"===e.data){p.logDebug(`CONNECT: receive pong ${Date.now().toString()}`);return}this.events.emit("payload",e.data)}}onClose(e){var t;p.logDebug("socket get closed: ",null===(t=this.socket)||void 0===t?void 0:t.url,e.code),this.socket=void 0,this.events.emit("close",e)}onError(e,t){let n={id:e,msg:t.toString()};this.events.emit("payload",n)}onopen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.state=a.ConnectorState.Connected,this.events.emit("open")}emitError(e){this.events.emit("fail",e)}heartbeat(){return s(this,void 0,void 0,function*(){if(this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.state!=a.ConnectorState.Connected&&this.state!=a.ConnectorState.OnError){p.logDebug("heart beat close");return}if(!this.socket){if(p.logDebug("socket not exist"),this.state==a.ConnectorState.Connected||this.state==a.ConnectorState.OnError){p.logDebug("socket reconnect by heartbeat");try{yield this.registOpen()}catch(e){p.logError("regist open failed"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)}}return}if(this.socket.readyState!==WebSocket.OPEN){if(p.logDebug("socket not ready"),this.state==a.ConnectorState.Connected||this.state==a.ConnectorState.OnError){p.logDebug("socket reconnect by heartbeat with state",this.state,this.socket.readyState);try{yield this.registOpen()}catch(e){p.logError("regist open failed"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)}}return}p.logDebug(`send ping heart beat: ${Date.now().toString()}, ${this.socket}`),this.socket.send("ping"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)})}registOpen(e=this.url,t=!1){if(!(0,u.checkWSUrl)(e))throw Error(`CONNECTOR: invalid url ${e}`);return this.connecting&&!t?new Promise((e,t)=>{this.events.once("fail",e=>{t(e)}),this.events.once("open",()=>{if(void 0===this.socket)return t(Error("Connect lost"));e(this.socket)})}):(this.url=e,t||p.logDebug("Connection connect:",this.url,new Date().toUTCString()),this.state=a.ConnectorState.Connecting,new URLSearchParams(e).get("origin"),new Promise((t,n)=>{let r=new f(e,[]);p.logDebug("Connection connect Begin:",this.url,new Date().toUTCString()),this.startTimeOutTimer(r),(0,u.hasBuiltInWebSocket)()?(p.logDebug("Connection connect Begin:",this.url,new Date().toUTCString()),r.onerror=e=>s(this,void 0,void 0,function*(){this.checkMaxRetry()?(this.state=a.ConnectorState.OnError,this.emitError(e.error),p.logDebug("Connection connect final failed tried:",this.retryCount,new Date().toUTCString()),n(Error("socket Error"))):(yield this.connectionTryNext(),this.socket&&t(this.socket))})):r.on("error",e=>s(this,void 0,void 0,function*(){this.checkMaxRetry()?(this.state=a.ConnectorState.OnError,p.logDebug("Connection connect final failed tried:",this.retryCount,new Date().toUTCString()),this.emitError(e),n(Error("socketError"))):(yield this.connectionTryNext(),this.socket&&t(this.socket))})),r.onopen=()=>{p.logDebug("socket opened"),this.resetTimeOutTimer(a.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.FINISHED),this.onopen(r),this.heartbeat(),t(r)}}))}checkMaxRetry(){return p.logDebug("current retry count:",this.retryCount,"of",a.OKXCONNECTOR_WS_URL_LIST.length),this.retryCount>a.OKXCONNECTOR_WS_URL_LIST.length}connectionTryNext(){return s(this,void 0,void 0,function*(){if(this.checkMaxRetry())p.logDebug("Max Connection retry ",this.retryCount,new Date().toUTCString());else{this.retryCount+=1;let e=this.getNextSelectUrl();p.logDebug("Connection retry:",e,new Date().toUTCString()),yield this.registOpen(e,!0)}})}startTimeOutTimer(e){this.connectionTimeoutTimer&&this.resetTimeOutTimer(a.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.CANCELED),this.pendingSocket=e,this.connectionTimeoutTimer=setTimeout(()=>{this.pendingSocket&&this.resetTimeOutTimer(a.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.TIME_OUT)},this.timeOutLimit)}resetTimeOutTimer(e){var t;e!=a.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.FINISHED&&(null===(t=this.pendingSocket)||void 0===t||t.close(e)),this.pendingSocket=void 0,clearTimeout(this.connectionTimeoutTimer)}cacheSuccessUrlSelect(){this.connectURLStorage.saveContent(this.selectedUrlIndex.toString(),c.OKXCONNECTOR_CACHE_KEY)}getSuccessUrlSelect(){var e;let t=null===(e=this.connectURLStorage.getItem(c.OKXCONNECTOR_CACHE_KEY))||void 0===e?void 0:e.content,n=0;return t&&(n=Number(t)),this.selectedUrlIndex=n,a.OKXCONNECTOR_WS_URL_LIST[n]}getNextSelectUrl(){return this.selectedUrlIndex+=1,this.selectedUrlIndex=this.selectedUrlIndex%a.OKXCONNECTOR_WS_URL_LIST.length,a.OKXCONNECTOR_WS_URL_LIST[this.selectedUrlIndex]}onVisibleChanged(){return s(this,void 0,void 0,function*(){if("visible"===document.visibilityState&&(p.logDebug(`get changed ${this.state}, ${this.socket}`),this.state==a.ConnectorState.Connected&&void 0===this.socket)){p.logDebug("CONNECTION need reopen");try{yield this.registOpen()}catch(e){p.logError("regist open failed")}return}})}connect(){return s(this,void 0,void 0,function*(){yield this.registOpen(this.url),document.removeEventListener("visibilitychange",this.onVisibleChanged.bind(this)),document.addEventListener("visibilitychange",this.onVisibleChanged.bind(this))})}disconnect(){return s(this,void 0,void 0,function*(){return this.state=a.ConnectorState.Disconnected,new Promise((e,t)=>{if(void 0===this.socket){e();return}this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close(),this.heartbeatTimer&&clearTimeout(this.heartbeatTimer)})})}currentStatus(){return{state:this.state,url:this.url}}addListener(e,t,n,r){this.listenPayloadHandler&&this.events.removeListener("payload",this.listenPayloadHandler),this.listenPayloadHandler=i=>{var o;p.logDebug(`<<< get payload ${i}`);let s=(0,d.safeJsonParse)(i);if(s.params&&s.params.data){let i=null===(o=s.params.data)||void 0===o?void 0:o.message;if(i)try{let o=t(i);void 0===o?(p.logDebug("CONNECT: decrypt undefined"),r(e,"Decrypt undefined")):n(e,o)}catch(t){p.logDebug(`CONNECT: decrypt failed: ${t}`),r(e,t.message)}}},this.events.on("payload",this.listenPayloadHandler),this.failHandler&&this.events.removeListener("fail",this.failHandler),this.failHandler=t=>{t?(p.logDebug(`CONNECT failed: ${t}`),r(e,t.message)):r(e,"Unkonow error")},this.events.on("fail",this.failHandler)}addPackageParse(e){this.payloadHandler&&this.events.removeListener("payload",this.payloadHandler),this.payloadHandler=t=>s(this,void 0,void 0,function*(){p.logDebug(`CONNECTION @[${new Date().toUTCString()}] <<<< received e:${t}`);let n=(0,d.safeJsonParse)(t);yield e(n)}),this.events.on("payload",this.payloadHandler)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}send(e,t){return s(this,void 0,void 0,function*(){void 0===this.socket&&(p.logDebug(`>>> send payload undefined ${t}`),yield e());try{p.logDebug(`CONNECTION @[${new Date().toUTCString()}]>>> send payload ${(0,d.safeJsonStringify)(t)}`),this.socket&&this.socket.send((0,d.safeJsonStringify)(t))}catch(e){this.onError(t.id,e)}})}getMsgPayloadFromHistory(e){return s(this,void 0,void 0,function*(){if(void 0===e)return;let t=(0,d.safeJsonStringify)(e);p.logDebug("get received data from history"),p.logDebug(t),t=(0,d.safeJsonStringify)({params:{data:e}}),this.events.emit("payload",t)})}onOpen(e){this.openHandler&&this.events.removeListener("open",this.openHandler),this.openHandler=()=>s(this,void 0,void 0,function*(){p.logDebug(`CONNECTION @[${new Date().toUTCString()}] >>> ws opened: `),yield e()}),this.events.on("open",this.openHandler),this.cacheSuccessUrlSelect()}}t.OKXWalletConnector=g},66218:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionManager=void 0;let a=n(81207),c=n(43768),l=n(14278),d=n(22530),u=n(4062),h=n(36456),p=n(14550),f=n(11472),g=n(56754),v=n(2712),O=n(8138),_=o(n(90781)),C=n(90781),E=n(81487);class y{constructor(){this.events=new h.EventEmitter,this.connectStorage=new p.Storage(l.OKXCONNECTOR_CACHE_KEY_DAPP),this.crypto=new g.SessionCrypto;let e=(0,E.isInTMA)();if((0,C.logDebug)("do init:",e),e){let e=this.getCachedCryptoKeyPair();(0,C.logDebug)("use same pk:",e),this.crypto=new g.SessionCrypto(e)}this.jwtKeyPair=this.getCachedJWTKeyPair(),this.saveJWTKeyPair(this.jwtKeyPair),this.connector=new a.OKXWalletConnector(u.OKXCONNECTOR_WS_URL_1),this.packageId=Date.now(),this.connectedWalletPK="",this.currentTopic="",_.logDebug(`this.connectedWalletPK  constructor   ${this.connectedWalletPK}`)}refreshPackageId(){this.packageId=Date.now()}saveCryptoKeyPair(e){let t=(0,O.safeJsonStringify)(e);this.connectStorage.encryptStoreMsg(t,l.OKXCONNECTOR_CRYPTO_KEY)}getCachedCryptoKeyPair(){let e=this.connectStorage.getAndDecrypt(l.OKXCONNECTOR_CRYPTO_KEY);return"string"==typeof e?(_.logDebug("get cached crypto key:"),_.logDebug(e),(0,O.safeJsonParse)(e)):(this.connectStorage.clearCache(),null)}saveJWTKeyPair(e){var t={publicKey:(0,f.toHexString)(e.publicKey),secretKey:(0,f.toHexString)(e.secretKey)};_.logDebug("save jwt kp");let n=(0,O.safeJsonStringify)(t);_.logDebug(n),this.connectStorage.encryptStoreMsg(n,l.OKXCONNECTOR_JWT_KEY)}getCachedJWTKeyPair(){let e=this.connectStorage.getAndDecrypt(l.OKXCONNECTOR_JWT_KEY);if("string"!=typeof e)return(0,v.generateKeyPair)();{_.logDebug("get cached jwt kp:"),_.logDebug(e);let t=(0,O.safeJsonParse)(e);return _.logDebug("save jwt kp"),_.logDebug(t),{publicKey:(0,f.hexToByteArray)(t.publicKey),secretKey:(0,f.hexToByteArray)(t.secretKey)}}}isWalletPKReady(){return _.logDebug(`isWalletPKReady  ===> ${this.connectedWalletPK}`),this.connectedWalletPK.length>0}makeJWT(e){return s(this,void 0,void 0,function*(){return yield(0,v.signJWT)(e,d.OKXCONNECTOR_JWT_SIDE,d.OKXCONNECTOR_JWT_TTL,this.jwtKeyPair)})}parsePackage(e){return s(this,arguments,void 0,function*(e,t=!1){var n,r,i,o,s;if(this.events.emit(e.id,e),!t){yield this.sendACK(e.id,!0);let t=null===(n=this.connectStorage.getItem(l.OKXCONNECTOR_TOKEN_CACHE))||void 0===n?void 0:n.content;t&&(null===(i=null===(r=e.params)||void 0===r?void 0:r.data)||void 0===i?void 0:i.messageId)&&(this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),null===(s=null===(o=e.params)||void 0===o?void 0:o.data)||void 0===s?void 0:s.messageId,t))}})}restoreConnect(e){return s(this,void 0,void 0,function*(){if(_.logDebug(`connectionManager  restoreConenct   ${e}`),"string"!=typeof e||0===e.length)throw Error("CONNECTION: invalid topic");_.logDebug("connectionManager  restoreConenct   disconnect"),yield this.disconnect(!0),this.connectStorage.saveContent(e,l.OKXCONNECTOR_TOKEN_CACHE),_.logDebug("connectionManager  restoreConenct   conect"),yield this.connect(!0)})}getConnectInfo(){var e=(0,f.generateTopic)();return _.logDebug(`generate topic token: ${e}`),this.currentTopic=e,{channelId:e,clientId:this.crypto.stringifyKeypair().publicKey}}connect(){return s(this,arguments,void 0,function*(e=!1){this.timeLog=new Date().getTime(),(0,C.logDebug)("ConnectTime---enter->",this.timeLog);let t=this.connectStorage.getItem(l.OKXCONNECTOR_TOKEN_CACHE);var n=this.currentTopic;if(_.logDebug(`generate topic token: ${n}`),e){null!=t&&(_.logDebug(`read last connect id: ${t}`),n=t.content);var r=this.connectStorage.getItem(l.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE);r&&(this.connectedWalletPK=r.content)}if(e){let e=this.getCachedCryptoKeyPair();e&&(this.crypto=new g.SessionCrypto(e))}_.logDebug(`use crypto client id: ${this.crypto.stringifyKeypair().publicKey}`),this.connectStorage.saveContent(n,l.OKXCONNECTOR_TOKEN_CACHE);var i=yield this.makeJWT(n);return _.logDebug(`generate jwt token: ${i}`),this.connectStorage.saveContent(i,"jwt"),new Promise((e,t)=>{this.connector.onOpen(()=>s(this,void 0,void 0,function*(){_.logDebug("1. connector on open");let r=new Date().getTime();(0,C.logDebug)("ConnectTime---open->",r-this.timeLog),this.events.once(this.packageId.toString(),r=>s(this,void 0,void 0,function*(){if(r&&r.error){_.logError("failed when login"),yield this.connector.disconnect();var i=Error();i.message=r.error.message,i.name=r.error.code.toString(),t(i)}this.refreshPackageId(),this.events.once(this.packageId.toString(),r=>s(this,void 0,void 0,function*(){if(r&&r.error){_.logError("failed when subscribe"),yield this.connector.disconnect();var i=Error();i.message=r.error.message,i.name=r.error.code.toString(),t(i)}this.refreshPackageId(),_.logDebug(`4. subscribe callback then send fetch: ${this.packageId}`);let o=new Date().getTime();(0,C.logDebug)("ConnectTime--subscribe callback->",o-this.timeLog),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),n),e()})),_.logDebug(`3. login callback then send subscribe: ${this.packageId}`);let o=new Date().getTime();(0,C.logDebug)("ConnectTime---login callback->",o-this.timeLog),yield this.connector.send(()=>s(this,void 0,void 0,function*(){_.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),{id:this.packageId.toString(),jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_SUB,params:{topic:n}})})),_.logDebug("2. login called"),yield this.connector.send(()=>s(this,void 0,void 0,function*(){_.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),{id:this.packageId.toString(),jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_LOGIN,params:{token:i}}),this.connector.addPackageParse(e=>{var t;if(_.logDebug("connect: parse package"),_.logDebug(e),!("params"in e)||!("data"in e.params)){this.parsePackage(e,!0);return}let n=null===(t=e.params.data)||void 0===t?void 0:t.message;if(void 0!==n){n=n.replace(/'/g,'"');let e=(0,O.safeJsonParse)(n);"string"!=typeof e&&"clientId"in e&&e.clientId&&e.clientId.length>0&&(this.connectedWalletPK=e.clientId,_.logDebug(`this.connectedWalletPK  addPackageParse   ${this.connectedWalletPK}`),this.connectStorage.saveContent(this.connectedWalletPK,l.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),this.saveCryptoKeyPair(this.crypto.stringifyKeypair()))}this.parsePackage(e,e.method===c.CONNECT_METHOD_RECEIVE)})})),this.connector.connect()})})}disconnect(){return s(this,arguments,void 0,function*(e=!1){yield this.connector.disconnect(),this.connectStorage.clearCache(l.OKXCONNECTOR_TOKEN_CACHE),e||(this.connectStorage.clearCache(l.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),this.connectedWalletPK="")})}addListener(e,t,n){this.connector.addListener((0,O.safeJsonStringify)(e),e=>{if(e=e.replace(/'/g,'"'),_.logDebug(`addListener ===> ${e}`),void 0!==e){var t=(0,O.safeJsonParse)(e),n=t.message;t.clientId&&t.clientId.length>0&&(this.connectedWalletPK=t.clientId,this.connectStorage.saveContent(this.connectedWalletPK,l.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),_.logDebug(`this.connectedWalletPK  addListener   ${this.connectedWalletPK}`),_.logDebug(`this.cryptoKey  addListener   ${(0,f.toHexString)(this.crypto.keyPair.publicKey)}`),this.saveCryptoKeyPair(this.crypto.stringifyKeypair()));var r=this.crypto.decrypt(n,this.connectedWalletPK);return _.logDebug(`addListener ===> ${r}`),r}},t,n)}sendRaw(e){return s(this,void 0,void 0,function*(){_.logDebug(`message send =====> ${e}`),_.logDebug(`message send =====encrypt message.length>>>> ${e.length}`);let t=this.connectStorage.getItem(l.OKXCONNECTOR_TOKEN_CACHE);_.logDebug(`message send =====topic>>>> ${null==t?void 0:t.content}`),this.refreshPackageId();let n={id:this.packageId.toString(),method:c.CONNECT_METHOD_PUBLISH,jsonrpc:u.CONNECT_JSONRPC_VER,params:{message:{topic:null==t?void 0:t.content,message:e,ttl:u.OKXCONNECTOR_MESSAGE_TTL}}};return this.events.once(this.packageId.toString(),e=>s(this,void 0,void 0,function*(){e&&e.error?_.logError(`@${new Date().toUTCString()} >>> failed when send msg`):e&&!e.error&&_.logDebug(`CONNECTION @[${new Date().toUTCString()}] >>> send msg with id ${this.packageId} successed`)})),yield this.connector.send(()=>s(this,void 0,void 0,function*(){_.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),n),this.packageId})}send(e){return s(this,void 0,void 0,function*(){if(_.logDebug(`message send =====> ${e}`),!this.isWalletPKReady())throw Error("connection not finish");let t=this.crypto.encrypt(e,this.connectedWalletPK);_.logDebug(`message send =====encrypt message.length>>>> ${t.length}`);let n=this.connectStorage.getItem(l.OKXCONNECTOR_TOKEN_CACHE);_.logDebug(`message send =====topic>>>> ${null==n?void 0:n.content}`),this.refreshPackageId();let r={id:this.packageId.toString(),method:c.CONNECT_METHOD_PUBLISH,jsonrpc:u.CONNECT_JSONRPC_VER,params:{message:{topic:null==n?void 0:n.content,message:t,ttl:u.OKXCONNECTOR_MESSAGE_TTL}}};return this.events.once(this.packageId.toString(),e=>s(this,void 0,void 0,function*(){e&&e.error?_.logError(`@${new Date().toUTCString()} >>> failed when send msg`):e&&!e.error&&_.logDebug(`CONNECTION @[${new Date().toUTCString()}] >>> send msg with id ${this.packageId} successed`)})),yield this.connector.send(()=>s(this,void 0,void 0,function*(){_.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),r),this.packageId})}sendACK(e,t){return s(this,arguments,void 0,function*(e,t,n){if(!0===t){let t={id:e,jsonrpc:u.CONNECT_JSONRPC_VER,result:!0};yield this.connector.send(()=>s(this,void 0,void 0,function*(){_.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),t)}else if(n){let t={id:e,jsonrpc:u.CONNECT_JSONRPC_VER,error:{code:n.code,message:n.message}};yield this.connector.send(()=>s(this,void 0,void 0,function*(){_.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),t)}})}sendReceive(e,t,n){return s(this,void 0,void 0,function*(){let r={id:e,jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_RECEIVE,params:{data:{messageId:t,topic:n}}};yield this.connector.send(()=>s(this,void 0,void 0,function*(){_.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),r)})}sendConnectSessionInfo(e,t,n,r){return s(this,void 0,void 0,function*(){})}sendFetchAndConsumeMessages(e,t){return s(this,void 0,void 0,function*(){this.events.once(e,e=>s(this,void 0,void 0,function*(){var n,r;if(e.result){var i=e.result.hasMore,o=e.result.data;if(o)for(let e=0;e<o.length;e++){let n=o[e];if(n&&n.topic==t){let e=n.messageId;yield this.connector.getMsgPayloadFromHistory(n),this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t)}}i&&(this.refreshPackageId(),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),t))}else _.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(r=e.error)||void 0===r?void 0:r.message}`)})),_.logDebug("5. send fetch more");let n=new Date().getTime();(0,C.logDebug)("ConnectTime---5->",n-this.timeLog);let r={id:e,jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_FETCHMSG,params:{data:{topic:t}}};yield this.connector.send(()=>s(this,void 0,void 0,function*(){_.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),r)})}cleanCache(){return s(this,void 0,void 0,function*(){this.connectStorage.clearCache()})}saveSessionContent(e,t){t||this.connectStorage.clearCache(l.OKXCONNECTOR_SESSION_PREFIX_KEY+e);let n=(0,O.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,l.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}getSessionContent(e){let t=this.connectStorage.getAndDecrypt(l.OKXCONNECTOR_SESSION_PREFIX_KEY+e);if(t)return(0,O.safeJsonParse)(t)}getCurrentConnectionReady(){return this.isWalletPKReady()}}t.ConnectionManager=y},4062:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectorState=t.CONNECT_JSONRPC_VER=t.OKXCONNECTOR_MESSAGE_TTL=t.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE=t.OKXCONNECTOR_WS_URL_LIST=t.OKXCONNECTOR_WS_URL_IDX_KEY=t.OKXCONNECTOR_WS_URL_2=t.OKXCONNECTOR_WS_URL_1=t.EVENT_EMITTER_MAX_LISTENERS=void 0,t.EVENT_EMITTER_MAX_LISTENERS=10,t.OKXCONNECTOR_WS_URL_1="wss://wsdexpri.okx.com/ws/v1/wallet-connect-relay",t.OKXCONNECTOR_WS_URL_2="wss://wsdexpri.coinall.ltd/ws/v1/wallet-connect-relay",t.OKXCONNECTOR_WS_URL_IDX_KEY="wuik",t.OKXCONNECTOR_WS_URL_LIST=[t.OKXCONNECTOR_WS_URL_1,t.OKXCONNECTOR_WS_URL_2],t.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE={TIME_OUT:3990,CANCELED:3991,FINISHED:3992},t.OKXCONNECTOR_MESSAGE_TTL=3e5,t.CONNECT_JSONRPC_VER="2.0",t.ConnectorState={InitState:0,Connecting:1,Connected:2,Disconnected:3,OnError:4}},75499:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Engine=void 0;let i=n(9762),o=n(8138),s=n(90781),a=n(48786),c=n(32015),l=n(32015),d=n(46524),u=n(81487);class h{constructor(e){this.pendingRequests=new Map,this.disconnectListener=[],this.connectionManager=e,this.connectionManager.addListener("sdk_response",(e,t)=>{var n=(0,o.safeJsonParse)(t);(0,s.logDebug)(`Engine ==>> addListener ==> success ==> ${n}`),this.handleResponse(e,n)},function(){})}addDisconnectListener(e){this.disconnectListener.push(e)}disconnect(){(0,s.logDebug)("Engine ==>> disconnect"),this.pendingRequests.clear()}getRequestId(){let e=Date.now().toString();return(0,s.logDebug)("Engine ==>> getRequestId ==>",e),e}bindRequestForPromise(e,t){this.pendingRequests.set(e,t)}send(e,t,n){return r(this,void 0,void 0,function*(){(0,s.logDebug)("Engine ==>> send  request==>",JSON.stringify(e));let r=this.getRequestId();try{let a=yield(0,i.callForSuccess)(()=>this.connectionManager.send(JSON.stringify(Object.assign(Object.assign({},e),{requestId:r}))),n);this.connectionManager.events.once(a.toString(),e=>{var n;(0,s.logDebug)(`Engine ==> send => onAck => ${(0,o.safeJsonStringify)(e)}`),e&&e.result&&(null===(n=t.onAck)||void 0===n||n.call(t))}),t.resolve&&this.bindRequestForPromise(r,t.resolve)}catch(e){return Promise.reject(e)}})}sendSession(e){return r(this,void 0,void 0,function*(){(0,s.logDebug)("[Connect] sendSession called:",e);let t=this.getRequestId();yield this.connectionManager.sendRaw(JSON.stringify(Object.assign(Object.assign({},{method:"session_info",params:{sessionInfo:e}}),{requestId:t})))})}handleResponse(e,t){if((0,s.logDebug)(`Engine ==>> handleResponse_1  ======>response: ${(0,o.safeJsonStringify)(t)}`,e),"requestId"in t){(0,s.logDebug)("Engine ==>> handleResponse_2  ===> in response");let e=t.requestId,n=this.pendingRequests.get(e);n?((0,s.logDebug)("Engine ==>> handleResponse_3  ===> find resolve:",n),n(t),this.pendingRequests.delete(e)):((0,s.logDebug)("Engine ==>> handleResponse_3  ===> not find resolve:"),"disconnect"===t.method&&(this.disconnectListener.forEach(e=>e()),this.disconnectListener=[],this.disconnect()))}}restoreconnect(e,t){return r(this,void 0,void 0,function*(){var n;yield null===(n=this.connectionManager)||void 0===n?void 0:n.restoreConnect(e.topic),t(e)})}conect(e,t,n){return r(this,void 0,void 0,function*(){var r,i;let o=this.connectionManager.getConnectInfo(),d=this.getRequestId(),u=null!==(r=t.openUniversalUrl)&&void 0!==r&&r,h=JSON.stringify({protocolVer:Number(a.tonConnectSdkVersion),topic:o.channelId,clientId:o.clientId,requestId:d,dAppInfo:t.dappInfo,requests:e}),p=btoa(String.fromCharCode(...new TextEncoder().encode(h))),f=`${a.standardDeeplink}?param=${p}`;(0,s.logDebug)("engine ==>> connect ==>>deeplinkUrl:",f);let g=(0,l.isIos)();return(0,s.logDebug)(`engine ==>> connect ==>>isIOS: ${g}   openUniversalLink: ${u}`),g&&u&&((0,s.logDebug)("bridge-provider ==>> connect_3"),(0,c.openOKXDeeplinkWithFallback)(f)),yield null===(i=this.connectionManager)||void 0===i?void 0:i.disconnect(!1),this.bindRequestForPromise(d,e=>{n(this.onConnect(e,t,o.channelId),e)}),yield this.connectionManager.connect(),!g&&u&&((0,s.logDebug)("bridge-provider ==>> connect_4"),(0,c.openOKXDeeplinkWithFallback)(f)),{connectInfo:o,deeplinkUrl:(0,c.getUniversalLink)(f)}})}onConnect(e,t,n){if("connect"==e.method){let r=(0,d.buildNameSpacesByConnectResponse)(e);if(r)return{topic:n,sessionConfig:t,namespaces:r}}return null}universalConnect(e,t,n){return r(this,void 0,void 0,function*(){return new Promise((i,o)=>r(this,void 0,void 0,function*(){var r,h,p,f;try{(0,s.logDebug)("engine universalConnect request :",JSON.stringify(e)),(0,s.logDebug)("engine universalConnect sessionConfig :",JSON.stringify(t));let v=[],O=[];e.forEach(e=>{let t=e.name;t.startsWith("requestAccounts")?O.push(e):t.startsWith("ton")&&v.push(e)}),(0,s.logDebug)("engine universalConnect tonRequest :",JSON.stringify(v)),(0,s.logDebug)("engine universalConnect universalRequest :",JSON.stringify(O));let _=this.connectionManager.getConnectInfo(),C=this.getRequestId(),E=null!==(r=t.openUniversalUrl)&&void 0!==r&&r,y={protocolVer:Number(a.tonConnectSdkVersion),topic:_.channelId,clientId:_.clientId,requestId:C,dAppInfo:t.dappInfo,requests:O},m=(0,u.encodeConnectParams)(y);y.redirect=null!==(h=null==t?void 0:t.redirect)&&void 0!==h?h:"none";let b={protocolVer:Number(a.tonConnectSdkVersion),topic:_.channelId,clientId:_.clientId,requestId:C,dAppInfo:t.dappInfo,requests:v,redirect:null!==(p=null==t?void 0:t.redirect)&&void 0!==p?p:"none"},R=!1;v.length>0&&(R=!0);let N=R?b:y;(0,s.logDebug)("engine universalConnect ==>>defaultConnectRequest:",R,JSON.stringify(N));var g="";if(E){let e=(0,u.encodeConnectParams)(N);g=`${a.standardDeeplink}?param=${e}`}(0,s.logDebug)("engine universalConnect ==>>deeplinkUrl:",g);let S=(0,l.isIos)();if(S&&E&&((0,s.logDebug)(`engine universalConnect ==>>isIOS: ${S}   openUniversalLink: ${E}`),(0,c.openOKXDeeplinkWithFallback)(g)),yield null===(f=this.connectionManager)||void 0===f?void 0:f.disconnect(!1),this.bindRequestForPromise(C,e=>{var n,r;try{if("connect"==e.method){(0,s.logDebug)("engin  universalConnect success connectResponse:>>>",JSON.stringify(e));let r=(0,d.buildNameSpacesByConnectResponse)(e);if(r){let o={topic:_.channelId,sessionConfig:t,namespaces:r,wallet:Object.assign({},null===(n=e.payload)||void 0===n?void 0:n.wallet)};(0,s.logDebug)("engin  universalConnect success session:>>>",JSON.stringify(o)),i(o)}else throw new a.OKXConnectError(a.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR)}else if("connect_error"==e.method&&(null===(r=e.payload)||void 0===r?void 0:r.code))throw new a.OKXConnectError(e.payload.code)}catch(e){o(e)}}),yield this.connectionManager.connect(),!S&&E&&(0,c.openOKXDeeplinkWithFallback)(g),(0,s.logDebug)("engin  universalConnect ==>> connectInfoAndUrl:",n),this.sendSession(m),n){let e={connectRequest:y,redirect:t.redirect,tmaReturnUrl:t.tmaReturnUrl};R&&(e.tonConnectRequest=b),(0,s.logDebug)("universalConnect connectInfoAndUrl info :",JSON.stringify(e)),n(e)}}catch(e){o(e)}}))})}}t.Engine=h},22183:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=t.Engine=t.WalletConnectionManager=t.ConnectionManager=t.OKXWalletConnector=void 0;var r=n(81207);Object.defineProperty(t,"OKXWalletConnector",{enumerable:!0,get:function(){return r.OKXWalletConnector}});var i=n(66218);Object.defineProperty(t,"ConnectionManager",{enumerable:!0,get:function(){return i.ConnectionManager}});var o=n(38890);Object.defineProperty(t,"WalletConnectionManager",{enumerable:!0,get:function(){return o.WalletConnectionManager}});var s=n(75499);Object.defineProperty(t,"Engine",{enumerable:!0,get:function(){return s.Engine}});var a=n(14550);Object.defineProperty(t,"Storage",{enumerable:!0,get:function(){return a.Storage}})},2712:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MULTICODEC_ED25519_LENGTH=t.MULTICODEC_ED25519_HEADER=t.MULTICODEC_ED25519_BASE=t.MULTICODEC_ED25519_ENCODING=t.DID_METHOD=t.DID_PREFIX=t.DID_DELIMITER=t.KEY_PAIR_SEED_LENGTH=t.DATA_ENCODING=t.JSON_ENCODING=t.JWT_ENCODING=t.JWT_DELIMITER=t.JWT_IRIDIUM_TYP=t.JWT_IRIDIUM_ALG=t.JWTHeaderType=void 0,t.generateKeyPair=function(){return u.default.sign.keyPair()},t.decodeJSON=f,t.encodeJSON=g,t.encodeIss=v,t.decodeIss=O,t.encodeSig=_,t.decodeSig=C,t.encodeData=E,t.decodeData=function(e){var n,r;let i=(0,p.okxtoString)(e,t.DATA_ENCODING).split(t.JWT_DELIMITER);return{header:f(null!==(n=i[0])&&void 0!==n?n:"{}"),payload:f(null!==(r=i[1])&&void 0!==r?r:"{}")}},t.encodeJWT=y,t.decodeJWT=m,t.signJWT=function(e,n,r,i){return s(this,arguments,void 0,function*(e,n,r,i,o=Math.floor(Date.now())){let s={alg:t.JWT_IRIDIUM_ALG,typ:t.JWT_IRIDIUM_TYP},a={iss:v(i.publicKey),sub:e,aud:n,act:"authenticate user",iat:o,exp:o+r},c=E({header:s,payload:a});return h.logDebug(`get sec kp: ${i.secretKey} {${i.secretKey.length}}`),y({header:s,payload:a,signature:u.default.sign.detached(c,i.secretKey)})})},t.verifyJWT=function(e){return s(this,void 0,void 0,function*(){let{header:n,payload:r,data:i,signature:o}=m(e);if(n.alg!==t.JWT_IRIDIUM_ALG||n.typ!==t.JWT_IRIDIUM_TYP)throw Error("JWT must use EdDSA algorithm");let s=O(r.iss);return c.verify(s,i,o)})};let c=o(n(38401)),l=n(8138),d=n(11472),u=a(n(76097)),h=o(n(90781)),p=n(74194);function f(e){return(0,l.safeJsonParse)((0,p.okxtoString)((0,p.okxfromString)(e,t.JWT_ENCODING),t.JSON_ENCODING))}function g(e){return(0,p.okxtoString)((0,p.okxfromString)((0,l.safeJsonStringify)(e),t.JSON_ENCODING),t.JWT_ENCODING)}function v(e){h.logDebug(`publicKey: ${(0,d.toHexString)(e)}`);var n=(0,p.okxtoString)(e,t.MULTICODEC_ED25519_ENCODING);return[t.DID_PREFIX,t.DID_METHOD,n].join(t.DID_DELIMITER)}function O(e){let[n,r,i]=e.split(t.DID_DELIMITER);if(n!==t.DID_PREFIX||r!==t.DID_METHOD)throw Error('Issuer must be a DID with method "key"');if(void 0===i)throw Error("multicodec is undefined");let o=(0,p.okxfromString)(i,t.MULTICODEC_ED25519_ENCODING);if(void 0===o||o.length!==t.MULTICODEC_ED25519_LENGTH)throw Error("Issuer must be a public key with length 32 bytes");return o}function _(e){return(0,p.okxtoString)(e,t.JWT_ENCODING)}function C(e){return(0,p.okxfromString)(e,t.JWT_ENCODING)}function E(e){return(0,p.okxfromString)([g(e.header),g(e.payload)].join(t.JWT_DELIMITER),t.DATA_ENCODING)}function y(e){return[g(e.header),g(e.payload),_(e.signature)].join(t.JWT_DELIMITER)}function m(e){var n,r,i;let o=e.split(t.JWT_DELIMITER),s=f(null!==(n=o[0])&&void 0!==n?n:"{}");return{header:s,payload:f(null!==(r=o[1])&&void 0!==r?r:"{}"),signature:C(null!==(i=o[2])&&void 0!==i?i:"{}"),data:(0,p.okxfromString)(o.slice(0,2).join(t.JWT_DELIMITER),t.DATA_ENCODING)}}t.JWTHeaderType="dapp",t.JWT_IRIDIUM_ALG="EdDSA",t.JWT_IRIDIUM_TYP="JWT",t.JWT_DELIMITER=".",t.JWT_ENCODING="base64url",t.JSON_ENCODING="utf8",t.DATA_ENCODING="utf8",t.KEY_PAIR_SEED_LENGTH=32,t.DID_DELIMITER=":",t.DID_PREFIX="did",t.DID_METHOD="key",t.MULTICODEC_ED25519_ENCODING="base58btc",t.MULTICODEC_ED25519_BASE="z",t.MULTICODEC_ED25519_HEADER="K36",t.MULTICODEC_ED25519_LENGTH=32},22530:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OKXCONNECTOR_JWT_TTL=t.OKXCONNECTOR_JWT_WALLET_SIDE=t.OKXCONNECTOR_JWT_SIDE=void 0,t.OKXCONNECTOR_JWT_SIDE="wallet",t.OKXCONNECTOR_JWT_WALLET_SIDE="dapp",t.OKXCONNECTOR_JWT_TTL=864e5},46524:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildNameSpacesByConnectResponse=function(e){return i(e)},t.buildRequestAccountNameSpacesByConnectResponse=i;let r=n(90781);function i(e){let t={};(0,r.logDebug)("buildRequestAccountNameSpacesByConnectResponse start connectResponse>>",JSON.stringify(e));let n=e.payload.responses.find(e=>"requestAccounts"===e.name),i=e.payload.responses.find(e=>"ton_addr"===e.name),o=e.payload.responses.find(e=>"ton_proof"===e.name);if(i&&!n){(0,r.logDebug)("buildRequestAccountNameSpacesByConnectResponse adapt ton data >>");let e=i.address;e="ton:"+i.network+":"+e;let t={ton_addr:i};o&&(t.ton_proof=o),n={name:"requestAccounts",accounts:[{namespace:"ton",addresses:[e],methods:["ton_sendTransaction"],extra:{},data:t}]}}return(0,r.logDebug)("buildRequestAccountNameSpacesByConnectResponse end universalResponse>>>",JSON.stringify(n)),n.accounts.forEach(e=>{var n=[],i=[];e.addresses.forEach(e=>{var t=e.split(":");if((0,r.logDebug)("buildRequestAccountNameSpacesByConnectResponse addressArr>>",t.length),t.length>=3){let o=t.slice(0,2).join(":");n.push(o),i.push(e),(0,r.logDebug)("buildRequestAccountNameSpacesByConnectResponse chain:>>",o,"addressItem:",e)}}),e.data&&e.data.ton_addr&&(e.data.ton_addr.name="ton_addr"),e.data&&e.data.ton_proof&&(e.data.ton_proof.name="ton_proof"),t[e.namespace]={chains:n,accounts:i,methods:e.methods,extra:e.extra,payload:e.data},(0,r.logDebug)("buildRequestAccountNameSpacesByConnectResponse result>>",JSON.stringify(t))}),t}},14550:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0;let a=n(14278),c=s(n(76097)),l=n(11472),d=n(32015),u=o(n(90781)),h=n(32015),p=n(66912);class f{constructor(e){let t=(0,l.resolveLocalStorage)();this.storeKey="",this.cipherIV="",this.subKey=e,u.logDebug("--------get current local storage --------"),u.logDebug(t);let n=t.getItem(f.cacheKey+e);if(null==n){u.logDebug("with no cache"),this.cache={};return}if(u.logDebug(n),(null==n?void 0:n.length)>0){var r=(0,d.safeJsonParse)(n);this.cache=r}u.logDebug(`get cache obj: ${this.cache}`),(void 0===this.cache||null==this.cache)&&(this.cache={})}saveContent(e,t,n="-"){let r={id:n,timestamp:Date.now().toString(),content:e};this.saveItem(r,t)}saveItem(e,t){let n=f.cacheKey+this.subKey,r=(0,l.resolveLocalStorage)();u.logDebug(this.cache),u.logDebug(`get cache obj: ${this.cache}, ${t}, ${e}`),this.cache[t]=e;let i=(0,d.safeJsonStringify)(this.cache);u.logDebug(`STORAGE: ${t} @ ${this.cache}`),r.setItem(n,i)}getItem(e){return u.logDebug(`STORAGE >> getItem: ${e} @ ${this.cache}`),this.cache[e]}getCachedPBKDF2InfoKey(){var e,t,n,r;if(this.storeKey.length>0&&(null===(e=this.cipherIV)||void 0===e?void 0:e.length)>0)return{pw:this.storeKey,iv:this.cipherIV};let i=null===(t=this.getItem(a.OKXCONNECTOR_STORAGER_CRYPTO_SALT))||void 0===t?void 0:t.content;i||(i=(0,l.toHexString)(c.default.randomBytes(24)),this.saveContent(i,a.OKXCONNECTOR_STORAGER_CRYPTO_SALT));let o=null===(n=this.getItem(a.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD))||void 0===n?void 0:n.content;o||(o=(0,l.toHexString)(c.default.randomBytes(32)),this.saveContent(o,a.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD));let s=null===(r=this.getItem(a.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV))||void 0===r?void 0:r.content;if(!s){let e=c.default.randomBytes(16);s=(0,l.toHexString)(e),this.saveContent(s,a.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV)}return this.cipherIV=s,this.storeKey=(0,p.PBKDF2)(o,i,{iterations:10}).toString(),{pw:this.storeKey,iv:this.cipherIV}}encryptStoreMsg(e,t){(0,h.logDebug)(`encryptStoreMsg  encryptStoreMsg start ${Date.now()}`);let n=this.getCachedPBKDF2InfoKey();(0,h.logDebug)(`encryptStoreMsg  encryptStoreMsg mid ${Date.now()}`);var r=p.AES.encrypt(e,n.pw).toString();this.saveContent(r,t),(0,h.logDebug)(`encryptStoreMsg  encryptStoreMsg end ${Date.now()}`)}getAndDecrypt(e){(0,h.logDebug)(`encryptStoreMsg  getAndDecrypt start ${Date.now()}`);let t=this.getItem(e);if(t&&t.content){let e=this.getCachedPBKDF2InfoKey();(0,h.logDebug)(`encryptStoreMsg  getAndDecrypt mid ${Date.now()}`);let n=p.AES.decrypt(t.content,e.pw).toString(p.enc.Utf8);return(0,h.logDebug)(`encryptStoreMsg  getAndDecrypt end ${Date.now()}`),n}return null}clearCache(e){if(void 0===e){this.cache={};let e=f.cacheKey+this.subKey;localStorage.setItem(e,"")}else{let t=f.cacheKey+this.subKey,n=(0,l.resolveLocalStorage)();u.logDebug(this.cache),this.cache[e]=null;let r=(0,d.safeJsonStringify)(this.cache);u.logDebug(`STORAGE: clean key ${e} @ ${this.cache}`),n.setItem(t,r)}}}t.Storage=f,f.cacheKey="OKXStorageKey"},14278:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OKXCONNECTOR_STORAGE_CIPHER_METHOD=t.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV=t.OKXCONNECTOR_STORAGER_CRYPTO_SALT=t.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD=t.OKXCONNECTOR_TON_KEY=t.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE=t.OKXCONNECTOR_TOKEN_CACHE=t.OKXCONNECTOR_JWT_KEY=t.OKXCONNECTOR_SESSION_PREFIX_KEY=t.OKXCONNECTOR_CRYPTO_KEY=t.OKXCONNECTOR_CACHE_KEY_DAPP=t.OKXCONNECTOR_CACHE_KEY=void 0,t.OKXCONNECTOR_CACHE_KEY="ck",t.OKXCONNECTOR_CACHE_KEY_DAPP="ck_dapp",t.OKXCONNECTOR_CRYPTO_KEY="cck_k",t.OKXCONNECTOR_SESSION_PREFIX_KEY="cspk_",t.OKXCONNECTOR_JWT_KEY="cjk_k",t.OKXCONNECTOR_TOKEN_CACHE="ct",t.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE="csp",t.OKXCONNECTOR_TON_KEY="OKXStorage_ctc",t.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD="scp",t.OKXCONNECTOR_STORAGER_CRYPTO_SALT="scs",t.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV="scpc",t.OKXCONNECTOR_STORAGE_CIPHER_METHOD="aes-256-cbc"},19952:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnectionManagerEvent=t.WalletConnectionManagerTopicInfoCacheKey=void 0,t.WalletConnectionManagerTopicInfoCacheKey="wcmtic",t.WalletConnectionManagerEvent={RECEIVE_REQUEST:"payload"}},38890:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnectionManager=void 0;let a=n(81207),c=n(43768),l=n(14278),d=n(22530),u=n(4062),h=n(19952),p=n(36456),f=n(14550),g=n(11472),v=n(56754),O=n(2712),_=n(8138),C=o(n(90781)),E=n(90781),y=n(32015);class m{constructor(){this.events=new p.EventEmitter,this.communicateEvents=new p.EventEmitter,C.logDebug("connect manager construct"),this.connectStorage=new f.Storage(l.OKXCONNECTOR_CACHE_KEY),this.jwtKeyPair=this.getCachedJWTKeyPair(),this.saveJWTKeyPair(this.jwtKeyPair),this.connector=new a.OKXWalletConnector(u.OKXCONNECTOR_WS_URL_1),this.packageId=Date.now(),this.sessionCryptoInfoMap=new Map,this.inLogin=!1,this.isLogined=!1}refreshPackageId(e=0){this.packageId=Date.now()+e}saveCryptoKeyPair(e,t){let n=(0,_.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,l.OKXCONNECTOR_CRYPTO_KEY+e)}getCachedCryptoKeyPair(e){let t=this.connectStorage.getAndDecrypt(l.OKXCONNECTOR_CRYPTO_KEY+e);return"string"==typeof t?(C.logDebug("get cached crypto key:"),C.logDebug(t),(0,_.safeJsonParse)(t)):(this.connectStorage.clearCache(),null)}saveJWTKeyPair(e){var t={publicKey:(0,g.toHexString)(e.publicKey),secretKey:(0,g.toHexString)(e.secretKey)};C.logDebug("save jwt kp");let n=(0,_.safeJsonStringify)(t);C.logDebug(n),this.connectStorage.encryptStoreMsg(n,l.OKXCONNECTOR_JWT_KEY),C.logDebug("after save jwt kp")}getCachedJWTKeyPair(){let e=this.connectStorage.getAndDecrypt(l.OKXCONNECTOR_JWT_KEY);if("string"!=typeof e)return(0,O.generateKeyPair)();{C.logDebug("get cached jwt kp:"),C.logDebug(e);let t=(0,_.safeJsonParse)(e);return C.logDebug("save jwt kp"),C.logDebug(t),{publicKey:(0,g.hexToByteArray)(t.publicKey),secretKey:(0,g.hexToByteArray)(t.secretKey)}}}isTopicPublicKeyExist(e){return C.logDebug(`isTopicPublicKeyExist  ===> ${e}`),this.sessionCryptoInfoMap.get(e)}makeJWT(e){return s(this,void 0,void 0,function*(){return yield(0,O.signJWT)(e,d.OKXCONNECTOR_JWT_WALLET_SIDE,d.OKXCONNECTOR_JWT_TTL,this.jwtKeyPair)})}parseInternalMsg(e){try{let t=(0,_.safeJsonParse)(e)["ivur-igbfft-ptjip"];if(t&&t.length>0)return(0,y.base64decode)(t,!0).toString()}catch(e){C.logError("parse internal msg",e)}}parsePackage(e,t){return s(this,arguments,void 0,function*(e,t,n=!1){this.events.emit(t.id,t);let r=this.sessionCryptoInfoMap.get(e);if(C.logDebug("get sessionInfo for decrypt topic:",e),C.logDebug("get sessionInfo for decrypt:",t.id,e,r,this.sessionCryptoInfoMap),r&&t.params.data&&(null===(i=t.params.data)||void 0===i?void 0:i.message)){if(null===(o=t.params.data)||void 0===o?void 0:o.isInternalData){var i,o,s,a,c,l,d,u,h,p,f,g=null===(s=t.params.data)||void 0===s?void 0:s.message;e=null===(a=t.params.data)||void 0===a?void 0:a.topic;let n=this.parseInternalMsg(g);(0,E.logDebug)("parse internal origin: ",n),n&&n.length>0&&this.communicateEvents.emit("origin",n,e)}else try{var g=null===(c=t.params.data)||void 0===c?void 0:c.message;if(g.trimStart().startsWith("{")){let t=(0,_.safeJsonParse)(g);t.method&&((0,E.logDebug)("<<< parse raw msg:",e,t),this.communicateEvents.emit(e,g))}else{var g=r.crypto.decryptWallet(null===(l=t.params.data)||void 0===l?void 0:l.message,r.dappPublicKey);(0,E.logDebug)("<<< receive msg:",e,g),this.communicateEvents.emit(e,g)}}catch(n){var g=r.crypto.decryptWallet(null===(d=t.params.data)||void 0===d?void 0:d.message,r.dappPublicKey);(0,E.logDebug)("<<< receive msg:",e,g),this.communicateEvents.emit(e,g)}}!n&&(yield this.sendACK(t.id,!0),e&&(null===(h=null===(u=t.params)||void 0===u?void 0:u.data)||void 0===h?void 0:h.messageId)&&(this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),null===(f=null===(p=t.params)||void 0===p?void 0:p.data)||void 0===f?void 0:f.messageId,e)))})}recovrySessionInfoFromCache(){let e=this.connectStorage.getAndDecrypt(h.WalletConnectionManagerTopicInfoCacheKey);if(C.logDebug("get cached sessionInfos:",e),e){let t=(0,_.safeJsonParse)(e);for(let e in t){let n=t[e];C.logDebug("make topicItem:",n);let r={topic:e,crypto:new v.SessionCrypto({publicKey:n.cryptoKeyPair.publicKey,secretKey:n.cryptoKeyPair.secretKey}),dappPublicKey:n.dappPublicKey};this.sessionCryptoInfoMap.set(e,r)}}C.logDebug("get cached sessionInfos map:",this.sessionCryptoInfoMap)}syncCacheSessionInfo(){let e={};for(let[t,n]of this.sessionCryptoInfoMap)C.logDebug("for each Keys",t),n&&(e[t]={cryptoKeyPair:n.crypto.stringifyKeypair(),dappPublicKey:n.dappPublicKey});let t=(0,_.safeJsonStringify)(e);C.logDebug("sync cache sessionInfos:",t),this.connectStorage.encryptStoreMsg(t,h.WalletConnectionManagerTopicInfoCacheKey)}cacheSessionInfo(e,t,n=!0){let r=t.dappPublicKey,i=[];for(let[e,t]of this.sessionCryptoInfoMap)C.logDebug("for each Keys",e),t.dappPublicKey==r&&(C.logDebug("duplicated dapp public key:",e,r),i.push(e));for(let[e,t]of this.sessionCryptoInfoMap)i.includes(e)&&this.sessionCryptoInfoMap.delete(e);return C.logDebug("cleaned connect session cache:",this.sessionCryptoInfoMap),this.sessionCryptoInfoMap.set(e,t),C.logDebug("cache sessionInfo:",e,t,this.sessionCryptoInfoMap),n&&this.syncCacheSessionInfo(),i}appendTopic(e,t){return s(this,void 0,void 0,function*(){return(0,E.logDebug)("4.1. get append Topic:",e),new Promise((n,r)=>s(this,void 0,void 0,function*(){if(!this.isLogined){var i=Error();i.message="connection is not logined",i.name="append error",r(i);return}yield this.subscribeTopics(Array.from([e]));let o={topic:e,crypto:new v.SessionCrypto,dappPublicKey:t},s=this.cacheSessionInfo(e,o,!1);this.refreshPackageId(),C.logDebug(`5. subscribe callback then fetch append message: ${this.packageId}, ${e}`);let a=new Date().getTime();(0,E.logDebug)("Append --subscribe callback->",a-this.timeLog),n(s)}))})}confirmAppendingTopics(){this.syncCacheSessionInfo()}connect(){return s(this,void 0,void 0,function*(){this.timeLog=new Date().getTime(),(0,E.logDebug)("[Wallet] ConnectTime---enter->",this.timeLog);let e=Date.now().toString();var t=yield this.makeJWT(e);return C.logDebug(`generate jwt token: ${t}`),this.connectStorage.saveContent(t,"jwt"),this.recovrySessionInfoFromCache(),new Promise((e,n)=>{this.inLogin=!0,this.connector.onOpen(()=>s(this,void 0,void 0,function*(){C.logDebug("1. connector on open");let r=new Date().getTime();(0,E.logDebug)("ConnectTime---open->",r-this.timeLog),this.events.once(this.packageId.toString(),t=>s(this,void 0,void 0,function*(){if(t&&t.error){C.logError("failed when login"),yield this.connector.disconnect();var r=Error();r.message=t.error.message,r.name=t.error.code.toString(),n(r)}else this.isLogined=!0,e(),C.logDebug("3. subscribe cached topics",this.sessionCryptoInfoMap),this.sessionCryptoInfoMap.size>0&&(yield this.subscribeTopics(Array.from(this.sessionCryptoInfoMap.keys())))})),C.logDebug("2. login called"),yield this.connector.send(()=>s(this,void 0,void 0,function*(){C.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),{id:this.packageId.toString(),jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_LOGIN,params:{token:t}})})),this.connector.connect(),this.connector.addPackageParse(e=>{var t,n;if(C.logDebug("connect: parse package"),C.logDebug(e),!("params"in e)||!("data"in e.params)){this.parsePackage("",e,!0);return}(null===(t=e.params.data)||void 0===t?void 0:t.topic)&&this.parsePackage(null===(n=e.params.data)||void 0===n?void 0:n.topic,e,e.method===c.CONNECT_METHOD_RECEIVE)})})})}getSessionPublicKey(e){if(this.isTopicPublicKeyExist(e)){let t=this.sessionCryptoInfoMap.get(e);if(t)return(0,g.toHexString)(t.crypto.keyPair.publicKey)}}getCurrentCachedTopicIdList(){return Array.from(this.sessionCryptoInfoMap.keys())}disconnect(){return s(this,arguments,void 0,function*(e=!1){yield this.connector.disconnect(),this.connectStorage.clearCache(l.OKXCONNECTOR_TOKEN_CACHE),e||this.connectStorage.clearCache(l.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE)})}send(e,t){return s(this,arguments,void 0,function*(e,t,n=!1){var r,i;if(C.logDebug(`message send =====> ${t}`),!this.isTopicPublicKeyExist(e))throw Error("connection not finish");let o=null===(r=this.sessionCryptoInfoMap.get(e))||void 0===r?void 0:r.dappPublicKey,a=null===(i=this.sessionCryptoInfoMap.get(e))||void 0===i?void 0:i.crypto;if(a&&o){let r={message:a.encryptWallet(t,o)};n&&(r.clientId=(0,g.toHexString)(a.keyPair.publicKey)),this.refreshPackageId();let i={id:this.packageId.toString(),method:c.CONNECT_METHOD_PUBLISH,jsonrpc:u.CONNECT_JSONRPC_VER,params:{message:{topic:e,message:(0,_.safeJsonStringify)(r),ttl:u.OKXCONNECTOR_MESSAGE_TTL}}};return this.events.once(this.packageId.toString(),e=>s(this,void 0,void 0,function*(){e&&e.error?C.logError(`@${new Date().toUTCString()} >>> failed when send msg`):e&&!e.error&&C.logDebug(`CONNECTION @[${new Date().toUTCString()}] >>> send msg with id ${this.packageId} successed`)})),yield this.connector.send(()=>s(this,void 0,void 0,function*(){C.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),i),this.packageId}})}sendACK(e,t){return s(this,arguments,void 0,function*(e,t,n){if(!0===t){let t={id:e,jsonrpc:u.CONNECT_JSONRPC_VER,result:!0};yield this.connector.send(()=>s(this,void 0,void 0,function*(){C.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),t)}else if(n){let t={id:e,jsonrpc:u.CONNECT_JSONRPC_VER,error:{code:n.code,message:n.message}};yield this.connector.send(()=>s(this,void 0,void 0,function*(){C.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),t)}})}sendReceive(e,t,n){return s(this,void 0,void 0,function*(){let r={id:e,jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_RECEIVE,params:{data:{messageId:t,topic:n}}};yield this.connector.send(()=>s(this,void 0,void 0,function*(){C.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),r)})}sendUnsubscribe(e){return s(this,void 0,void 0,function*(){yield this.connector.send(()=>s(this,void 0,void 0,function*(){C.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),{id:this.packageId.toString(),jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_UNSUB,params:{topic:e}}),this.sessionCryptoInfoMap.delete(e),this.syncCacheSessionInfo()})}sendFetchAndConsumeMessages(e,t){return s(this,void 0,void 0,function*(){this.events.once(e,e=>s(this,void 0,void 0,function*(){var n,r;if(e.result){var i=e.result.hasMore,o=e.result.data;if(o)for(let e=0;e<o.length;e++){let n=o[e];if(n&&n.topic==t){let e=n.messageId;yield this.connector.getMsgPayloadFromHistory(n),this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t)}}i&&(this.refreshPackageId(),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),t))}else C.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(r=e.error)||void 0===r?void 0:r.message}`)})),C.logDebug("5. send fetch more");let n=new Date().getTime();(0,E.logDebug)("ConnectTime---5->",n-this.timeLog);let r={id:e,jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_FETCHMSG,params:{data:{topic:t}}};yield this.connector.send(()=>s(this,void 0,void 0,function*(){C.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),r)})}sendBatchFetchAndConsumeMessages(e,t){return s(this,void 0,void 0,function*(){this.events.once(e,e=>s(this,void 0,void 0,function*(){var n,r;if(e.result){var i=e.result.hasMore,o=e.result.data;if(o)for(let e=0;e<o.length;e++){let t=o[e];if(t&&t.topic){let n=t.messageId;yield this.connector.getMsgPayloadFromHistory(t),this.refreshPackageId(e),yield this.sendReceive(this.packageId.toString(),n,t.topic)}}i&&(this.refreshPackageId(),yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(),t))}else C.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(r=e.error)||void 0===r?void 0:r.message}`)})),C.logDebug("5. send fetch more");let n=new Date().getTime();(0,E.logDebug)("ConnectTime---5->",n-this.timeLog);let r={id:e,jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_BATCH_FETCHMSG,params:{topics:t,withInternalData:!0}};yield this.connector.send(()=>s(this,void 0,void 0,function*(){C.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),r)})}cleanCache(){return s(this,void 0,void 0,function*(){this.connectStorage.clearCache()})}saveSessionContent(e,t){t||this.connectStorage.clearCache(l.OKXCONNECTOR_SESSION_PREFIX_KEY+e);let n=(0,_.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,l.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}getSessionContent(e){let t=this.connectStorage.getAndDecrypt(l.OKXCONNECTOR_SESSION_PREFIX_KEY+e);if(t)return(0,_.safeJsonParse)(t)}subscribeTopics(e){return s(this,void 0,void 0,function*(){(0,E.logDebug)("4. topicid list",e),this.refreshPackageId();let t=new Date().getTime();return(0,E.logDebug)("ConnectTime--subscribe callback->",t-this.timeLog),new Promise((t,n)=>s(this,void 0,void 0,function*(){let n=0;for(let r=0;r<e.length;++r){let i=e[r];this.refreshPackageId(r),this.events.once(this.packageId.toString(),o=>s(this,void 0,void 0,function*(){if(o&&o.error){C.logError("failed when subscribe"),yield this.connector.disconnect();var s=Error();s.message=o.error.message,s.name=o.error.code.toString(),(n+=1)==e.length&&t()}this.refreshPackageId(r);let a=new Date().getTime();(0,E.logDebug)("ConnectTime--subscribe callback->",a-this.timeLog),(n+=1)==e.length&&(C.logDebug(`5. send fetch msg: ${this.packageId}, ${i}`),yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(),e),t())})),C.logDebug(`3. login callback then send subscribe: ${this.packageId}, ${i}`);let o=new Date().getTime();(0,E.logDebug)("ConnectTime---login callback->",o-this.timeLog),yield this.connector.send(()=>s(this,void 0,void 0,function*(){C.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}),{id:this.packageId.toString(),jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_SUB,params:{topic:i}})}}))})}}t.WalletConnectionManager=m},56754:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionCrypto=void 0;let i=r(n(76097)),o=n(11472);class s{constructor(e){this.nonceLength=24,this.sessionKeyPair=e?this.createKeypairFromString(e):this.createKeypair()}createKeypair(){return i.default.box.keyPair()}createKeypairFromString(e){return{publicKey:(0,o.hexToByteArray)(e.publicKey),secretKey:(0,o.hexToByteArray)(e.secretKey)}}createNonce(){return i.default.randomBytes(this.nonceLength)}get keyPair(){return this.sessionKeyPair}encrypt(e,t){let n=new TextEncoder().encode(e),r=this.createNonce(),s=i.default.box(n,r,(0,o.hexToByteArray)(t),this.keyPair.secretKey),a=(0,o.concatUint8Arrays)(r,s);var c=(0,o.toHexString)(a),l=new TextEncoder().encode(c);return(0,o.base64encode)(l,!1)}encryptWallet(e,t){let n=new TextEncoder().encode(e),r=this.createNonce(),s=i.default.box(n,r,(0,o.hexToByteArray)(t),this.keyPair.secretKey),a=(0,o.concatUint8Arrays)(r,s);return(0,o.base64encode)(a,!1)}decrypt(e,t){let n=(0,o.base64decode)(e,!0).toUint8Array(),[r,s]=(0,o.splitToUint8Arrays)(n,this.nonceLength),a=i.default.box.open(s,r,(0,o.hexToByteArray)(t),this.keyPair.secretKey);if(!a)throw Error(`Decryption error: 
 message: ${e.toString()} 
 sender pubkey: ${t.toString()} 
 keypair pubkey: ${(0,o.toHexString)(this.keyPair.publicKey)} 
 keypair secretkey: ${(0,o.toHexString)(this.keyPair.secretKey)}`);return new TextDecoder().decode(a)}decryptWallet(e,t){let n=(0,o.base64decode)(e,!0),r=(0,o.hexToByteArray)(n.toString()),[s,a]=(0,o.splitToUint8Arrays)(r,this.nonceLength),c=i.default.box.open(a,s,(0,o.hexToByteArray)(t),this.keyPair.secretKey);if(!c)throw Error(`Decryption error: 
 message: ${e.toString()} 
 sender pubkey: ${t.toString()} 
 keypair pubkey: ${(0,o.toHexString)(this.keyPair.publicKey)} 
 keypair secretkey: ${(0,o.toHexString)(this.keyPair.secretKey)}`);return new TextDecoder().decode(c)}stringifyKeypair(){return{publicKey:(0,o.toHexString)(this.keyPair.publicKey),secretKey:(0,o.toHexString)(this.keyPair.secretKey)}}}t.SessionCrypto=s},90861:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(22183),t),i(n(48786),t),i(n(32015),t)},46801:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IEngine=t.ISignClient=t.ISignClientEvents=t.IEngineEvents=void 0;let i=r(n(36456));class o extends i.default{constructor(){super()}}t.IEngineEvents=o;class s extends i.default{constructor(){super()}}t.ISignClientEvents=s;class a{constructor(e){this.data=e}}t.ISignClient=a;class c{constructor(e){this.client=e}}t.IEngine=c},29722:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.creatOKXMiniAppWalletInfo=t.creatOKXWalletInfo=t.ISignClientEvents=t.IEngine=t.IEngineEvents=t.ISignClient=t.getBigIntRpcId=t.formatJsonRpcRequest=t.isJsonRpcError=t.isJsonRpcResponse=t.parseConnectionError=t.isHttpUrl=t.formatJsonRpcError=void 0;var o=n(80147);Object.defineProperty(t,"formatJsonRpcError",{enumerable:!0,get:function(){return o.formatJsonRpcError}}),Object.defineProperty(t,"isHttpUrl",{enumerable:!0,get:function(){return o.isHttpUrl}}),Object.defineProperty(t,"parseConnectionError",{enumerable:!0,get:function(){return o.parseConnectionError}}),Object.defineProperty(t,"isJsonRpcResponse",{enumerable:!0,get:function(){return o.isJsonRpcResponse}}),Object.defineProperty(t,"isJsonRpcError",{enumerable:!0,get:function(){return o.isJsonRpcError}}),Object.defineProperty(t,"formatJsonRpcRequest",{enumerable:!0,get:function(){return o.formatJsonRpcRequest}}),Object.defineProperty(t,"getBigIntRpcId",{enumerable:!0,get:function(){return o.getBigIntRpcId}});var s=n(46801);Object.defineProperty(t,"ISignClient",{enumerable:!0,get:function(){return s.ISignClient}}),Object.defineProperty(t,"IEngineEvents",{enumerable:!0,get:function(){return s.IEngineEvents}}),Object.defineProperty(t,"IEngine",{enumerable:!0,get:function(){return s.IEngine}}),Object.defineProperty(t,"ISignClientEvents",{enumerable:!0,get:function(){return s.ISignClientEvents}}),i(n(89190),t);var a=n(61510);Object.defineProperty(t,"creatOKXWalletInfo",{enumerable:!0,get:function(){return a.creatOKXWalletInfo}}),Object.defineProperty(t,"creatOKXMiniAppWalletInfo",{enumerable:!0,get:function(){return a.creatOKXMiniAppWalletInfo}})},80147:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};function i(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function o(e){return"result"in e}function s(e){return"error"in e}Object.defineProperty(t,"__esModule",{value:!0}),t.isJsonRpcPayload=i,t.isJsonRpcRequest=function(e){return i(e)&&"method"in e},t.isJsonRpcResponse=function(e){return i(e)&&(o(e)||s(e))},t.isJsonRpcResult=o,t.isJsonRpcError=s,t.payloadId=h,t.getBigIntRpcId=function(){return BigInt(Date.now())*BigInt(1e6)+BigInt(u.getNextValue())},t.formatJsonRpcRequest=function(e,t,n){return{id:n||h(),jsonrpc:"2.0",method:e,params:t}},t.formatJsonRpcResult=function(e,t){return{id:e,jsonrpc:"2.0",result:t}},t.formatJsonRpcError=function(e,t,n){return{id:e,jsonrpc:"2.0",error:v(t,n)}},t.isReservedErrorCode=p,t.getError=f,t.getErrorByCode=g,t.formatErrorMessage=v,t.isHttpUrl=function(e){return O(e,"^https?:")},t.isWsUrl=function(e){return O(e,"^wss?:")},t.parseConnectionError=function(e,t,n){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?Error(`Unavailable ${n} RPC url at ${t}`):e};let a=n(6064),c=r(n(76097));class l{constructor(e){this.i=1,8===e?new Uint8Array(1):16===e?new Uint16Array(1):new Uint32Array(1),this.initialValue=c.default.randomBytes(e/8)[0]}getNextValue(){return this.initialValue+this.i++}}let d=new l(8),u=new l(16);function h(){return 1e3*Date.now()+d.getNextValue()}function p(e){return a.RESERVED_ERROR_CODES.includes(e)}function f(e){return Object.keys(a.STANDARD_ERROR_MAP).includes(e)?a.STANDARD_ERROR_MAP[e]:a.STANDARD_ERROR_MAP[a.DEFAULT_ERROR]}function g(e){return Object.values(a.STANDARD_ERROR_MAP).find(t=>t.code===e)||a.STANDARD_ERROR_MAP[a.DEFAULT_ERROR]}function v(e,t){return void 0===e?f(a.INTERNAL_ERROR):("string"==typeof e&&(e=Object.assign(Object.assign({},f(a.SERVER_ERROR)),{message:e})),void 0!==t&&(e.data=t),p(e.code)&&(e=g(e.code)),e)}function O(e,t){let n=function(e){let t=e.match(RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==n&&new RegExp(t).test(n)}},54971:function(e,t){"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECT_ITEM_ERROR_CODES=void 0,(r=n||(t.CONNECT_ITEM_ERROR_CODES=n={}))[r.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",r[r.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"},47418:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TONCHAIN=void 0,(n||(t.TONCHAIN=n={})).MAINNET="-239"},89190:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECT_ITEM_ERROR_CODES=t.TONCHAIN=void 0;var r=n(47418);Object.defineProperty(t,"TONCHAIN",{enumerable:!0,get:function(){return r.TONCHAIN}});var i=n(54971);Object.defineProperty(t,"CONNECT_ITEM_ERROR_CODES",{enumerable:!0,get:function(){return i.CONNECT_ITEM_ERROR_CODES}})},61510:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.creatOKXWalletInfo=function(){return{appName:"okxAppWallet",name:"OKX Wallet",imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",aboutUrl:"https://www.okx.com/web3",universalLink:r.standardUniversalLink,deepLink:r.standardDeeplink,platforms:["ios","android"]}},t.creatOKXMiniAppWalletInfo=function(){return{appName:"okxMiniApp",name:"OKX Mini Wallet",imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",aboutUrl:"https://www.okx.com/web3",universalLink:`https://t.me/${r.tgwalletName}/start`,deepLink:"",platforms:["ios","android","macos","windows"]}};let r=n(23001)},23001:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tgwalletName=t.tonConnectSdkVersion=t.standardDeeplink=t.standardUniversalLink=t.okxDeeplink=void 0,t.okxDeeplink="okx://web3",t.standardUniversalLink="https://www.okx.com/download",t.standardDeeplink=`${t.okxDeeplink}/wallet/connect`,t.tonConnectSdkVersion="1",t.tgwalletName="OKX_WALLET_BOT"},80789:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OKX_CONNECT_ERROR_CODES=t.OKXConnectError=void 0;var r=n(6064);Object.defineProperty(t,"OKXConnectError",{enumerable:!0,get:function(){return r.OKXConnectError}}),Object.defineProperty(t,"OKX_CONNECT_ERROR_CODES",{enumerable:!0,get:function(){return r.OKX_CONNECT_ERROR_CODES}})},6064:function(e,t){"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ERROR=t.STANDARD_ERROR_MAP=t.SERVER_ERROR_CODE_RANGE=t.RESERVED_ERROR_CODES=t.SERVER_ERROR=t.INTERNAL_ERROR=t.INVALID_PARAMS=t.METHOD_NOT_FOUND=t.INVALID_REQUEST=t.PARSE_ERROR=t.OKX_CONNECT_ERROR_CODES=t.OKXConnectError=void 0;class i extends Error{constructor(e,t){void 0==t&&(t=function(e){if(e==n.UNKNOWN_ERROR);else if(e==n.BAD_REQUEST_ERROR)return"bad request error";else if(e==n.ALREADY_CONNECTED_ERROR)return"already connected error";else if(e==n.NOT_CONNECTED_ERROR)return"not connected error";else if(e==n.UNKNOWN_APP_ERROR)return"unknown app error";else if(e==n.USER_REJECTS_ERROR)return"user rejects error";else if(e==n.METHOD_NOT_SUPPORTED)return"method not supported";else if(e==n.CONNECTION_ERROR)return"connect error";return"unknown error"}(e)),super(t),this.code=e,this.message=`${i.prefix} ${t?"\n"+t:""}`,Object.setPrototypeOf(this,i.prototype)}toJSON(){return{message:this.message,code:this.code}}}t.OKXConnectError=i,i.prefix="[OKX_CONNECT_SDK_ERROR]",(r=n||(t.OKX_CONNECT_ERROR_CODES=n={}))[r.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",r[r.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",r[r.ALREADY_CONNECTED_ERROR=11]="ALREADY_CONNECTED_ERROR",r[r.NOT_CONNECTED_ERROR=12]="NOT_CONNECTED_ERROR",r[r.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",r[r.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",r[r.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",r[r.CHAIN_NOT_SUPPORTED=500]="CHAIN_NOT_SUPPORTED",r[r.WALLET_NOT_SUPPORTED=600]="WALLET_NOT_SUPPORTED",r[r.CONNECTION_ERROR=700]="CONNECTION_ERROR",t.PARSE_ERROR="PARSE_ERROR",t.INVALID_REQUEST="INVALID_REQUEST",t.METHOD_NOT_FOUND="METHOD_NOT_FOUND",t.INVALID_PARAMS="INVALID_PARAMS",t.INTERNAL_ERROR="INTERNAL_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.RESERVED_ERROR_CODES=[-32700,-32600,-32601,-32602,-32603],t.SERVER_ERROR_CODE_RANGE=[-32e3,-32099],t.STANDARD_ERROR_MAP={[t.PARSE_ERROR]:{code:-32700,message:"Parse error"},[t.INVALID_REQUEST]:{code:-32600,message:"Invalid Request"},[t.METHOD_NOT_FOUND]:{code:-32601,message:"Method not found"},[t.INVALID_PARAMS]:{code:-32602,message:"Invalid params"},[t.INTERNAL_ERROR]:{code:-32603,message:"Internal error"},[t.SERVER_ERROR]:{code:-32e3,message:"Server error"}},t.DEFAULT_ERROR=t.SERVER_ERROR},48786:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.okxDeeplink=t.tonConnectSdkVersion=t.standardDeeplink=t.standardUniversalLink=t.NameSpaceKeyAptos=t.NameSpaceKeyBtc=t.NameSpaceKeySui=t.NameSpaceKeyTON=t.NameSpaceKeySOL=t.NameSpaceKeyEip155=void 0,i(n(80789),t);var o=n(27217);Object.defineProperty(t,"NameSpaceKeyEip155",{enumerable:!0,get:function(){return o.NameSpaceKeyEip155}}),Object.defineProperty(t,"NameSpaceKeySOL",{enumerable:!0,get:function(){return o.NameSpaceKeySOL}}),Object.defineProperty(t,"NameSpaceKeyTON",{enumerable:!0,get:function(){return o.NameSpaceKeyTON}}),Object.defineProperty(t,"NameSpaceKeySui",{enumerable:!0,get:function(){return o.NameSpaceKeySui}}),Object.defineProperty(t,"NameSpaceKeyBtc",{enumerable:!0,get:function(){return o.NameSpaceKeyBtc}}),Object.defineProperty(t,"NameSpaceKeyAptos",{enumerable:!0,get:function(){return o.NameSpaceKeyAptos}});var s=n(23001);Object.defineProperty(t,"standardUniversalLink",{enumerable:!0,get:function(){return s.standardUniversalLink}}),Object.defineProperty(t,"standardDeeplink",{enumerable:!0,get:function(){return s.standardDeeplink}}),Object.defineProperty(t,"tonConnectSdkVersion",{enumerable:!0,get:function(){return s.tonConnectSdkVersion}}),Object.defineProperty(t,"okxDeeplink",{enumerable:!0,get:function(){return s.okxDeeplink}}),i(n(29722),t)},27217:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NameSpaceKeyAptos=t.NameSpaceKeyBtc=t.NameSpaceKeySui=t.NameSpaceKeyTON=t.NameSpaceKeySOL=t.NameSpaceKeyEip155=void 0,t.NameSpaceKeyEip155="eip155",t.NameSpaceKeySOL="solana",t.NameSpaceKeyTON="ton",t.NameSpaceKeySui="sui",t.NameSpaceKeyBtc="btc",t.NameSpaceKeyAptos="aptos"},9762:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};function r(e,t){return n(this,void 0,void 0,function*(){return new Promise((n,r)=>{var i,o;if(null===(i=null==t?void 0:t.signal)||void 0===i?void 0:i.aborted){r(Error("Delay aborted"));return}let s=setTimeout(()=>n(),e);null===(o=null==t?void 0:t.signal)||void 0===o||o.addEventListener("abort",()=>{clearTimeout(s),r(Error("Delay aborted"))})})})}Object.defineProperty(t,"__esModule",{value:!0}),t.callForSuccess=function(e,t){return n(this,void 0,void 0,function*(){var n,i;let o;let s=null!==(n=null==t?void 0:t.attempts)&&void 0!==n?n:3,a=null!==(i=null==t?void 0:t.delayMs)&&void 0!==i?i:800;if("function"!=typeof e)throw Error(`Expected a function, got ${typeof e}`);let c=0;for(;c<s;)try{return yield e()}catch(e){o=e,++c<s&&(yield r(a))}throw o})},t.delay=r},32015:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=t.isOS=t.isMobileUserAgent=t.openDeeplinkWithFallback=t.openLinkBlank=t.openLink=t.isValidObject=t.isIos=t.base64decode=t.base64encode=t.splitToUint8Arrays=t.concatUint8Arrays=t.toHexString=t.hexToByteArray=t.encodeTWAConnectURLParams=t.encodeConnectParams=t.openOKXTMAWalletlinkWithFallback=t.getTelegramWalletTWAUrl=t.getAppWalletDeepLink=t.encodeTelegramUrlParameters=t.isTelegramUrl=t.openOKXDeeplinkWithFallback=t.getUniversalLink=t.safeJsonStringify=t.safeJsonParse=t.logWarning=t.logError=t.logDebug=t.callForSuccess=void 0;var r=n(9762);Object.defineProperty(t,"callForSuccess",{enumerable:!0,get:function(){return r.callForSuccess}});var i=n(90781);Object.defineProperty(t,"logDebug",{enumerable:!0,get:function(){return i.logDebug}}),Object.defineProperty(t,"logError",{enumerable:!0,get:function(){return i.logError}}),Object.defineProperty(t,"logWarning",{enumerable:!0,get:function(){return i.logWarning}});var o=n(8138);Object.defineProperty(t,"safeJsonParse",{enumerable:!0,get:function(){return o.safeJsonParse}}),Object.defineProperty(t,"safeJsonStringify",{enumerable:!0,get:function(){return o.safeJsonStringify}});var s=n(81487);Object.defineProperty(t,"getUniversalLink",{enumerable:!0,get:function(){return s.getUniversalLink}}),Object.defineProperty(t,"openOKXDeeplinkWithFallback",{enumerable:!0,get:function(){return s.openOKXDeeplinkWithFallback}}),Object.defineProperty(t,"isTelegramUrl",{enumerable:!0,get:function(){return s.isTelegramUrl}}),Object.defineProperty(t,"encodeTelegramUrlParameters",{enumerable:!0,get:function(){return s.encodeTelegramUrlParameters}}),Object.defineProperty(t,"getAppWalletDeepLink",{enumerable:!0,get:function(){return s.getAppWalletDeepLink}}),Object.defineProperty(t,"getTelegramWalletTWAUrl",{enumerable:!0,get:function(){return s.getTelegramWalletTWAUrl}}),Object.defineProperty(t,"openOKXTMAWalletlinkWithFallback",{enumerable:!0,get:function(){return s.openOKXTMAWalletlinkWithFallback}}),Object.defineProperty(t,"encodeConnectParams",{enumerable:!0,get:function(){return s.encodeConnectParams}}),Object.defineProperty(t,"encodeTWAConnectURLParams",{enumerable:!0,get:function(){return s.encodeTWAConnectURLParams}});var a=n(11472);Object.defineProperty(t,"hexToByteArray",{enumerable:!0,get:function(){return a.hexToByteArray}}),Object.defineProperty(t,"toHexString",{enumerable:!0,get:function(){return a.toHexString}}),Object.defineProperty(t,"concatUint8Arrays",{enumerable:!0,get:function(){return a.concatUint8Arrays}}),Object.defineProperty(t,"splitToUint8Arrays",{enumerable:!0,get:function(){return a.splitToUint8Arrays}}),Object.defineProperty(t,"base64encode",{enumerable:!0,get:function(){return a.base64encode}}),Object.defineProperty(t,"base64decode",{enumerable:!0,get:function(){return a.base64decode}}),Object.defineProperty(t,"isIos",{enumerable:!0,get:function(){return a.isIos}}),Object.defineProperty(t,"isValidObject",{enumerable:!0,get:function(){return a.isValidObject}});var c=n(82792);Object.defineProperty(t,"openLink",{enumerable:!0,get:function(){return c.openLink}}),Object.defineProperty(t,"openLinkBlank",{enumerable:!0,get:function(){return c.openLinkBlank}}),Object.defineProperty(t,"openDeeplinkWithFallback",{enumerable:!0,get:function(){return c.openDeeplinkWithFallback}}),Object.defineProperty(t,"isMobileUserAgent",{enumerable:!0,get:function(){return c.isMobileUserAgent}}),Object.defineProperty(t,"isOS",{enumerable:!0,get:function(){return c.isOS}}),Object.defineProperty(t,"isBrowser",{enumerable:!0,get:function(){return c.isBrowser}})},90781:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logDebug=function(...e){if("undefined"!=typeof console)try{(null==window?void 0:window.okxLogDebug)&&console.log("[OKX_CONNECT_SDK]",...e)}catch(e){}},t.logError=function(...e){if("undefined"!=typeof console)try{(null==window?void 0:window.okxLogDebug)&&console.error("[OKX_CONNECT_SDK]",...e)}catch(e){}},t.logWarning=function(...e){if("undefined"!=typeof console)try{(null==window?void 0:window.okxLogDebug)&&console.warn("[OKX_CONNECT_SDK]",...e)}catch(e){}}},8138:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeJsonParse=function(e){if("string"!=typeof e)throw(0,r.logDebug)(e),Error(`Cannot safe json parse value of type ${typeof e}`);try{return o(e)}catch(t){return console.error("safeJsonParse error:",t),e}},t.safeJsonStringify=function(e){return"string"==typeof e?e:i(e)||""};let r=n(90781),i=e=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString()+"n":t),o=e=>JSON.parse(e.replace(/:(\b\d{17,}|\b(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))(?=[,\}\]]|$)/g,e=>`"${e}n"`),(e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t)},74194:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.okxfromString=function(e,t="utf8"){let n=l[t];if((0,i.logDebug)("okxfromstring ====> "),!n)throw Error(`Unsupported encoding "${t}"`);return n.decoder.decode(`${n.prefix}${e}`)},t.okxtoString=function(e,t="utf8"){let n=l[t];if((0,i.logDebug)("okxtoString ====> "),!n)throw Error(`Unsupported encoding "${t}"`);return n.encoder.encode(e).substring(1)},t.alloc=function(e=0){return new Uint8Array(e)},t.allocUnsafe=o;let r=n(408),i=n(90781);function o(e=0){return new Uint8Array(e)}function s(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}let a=s("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),c=s("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{let t=o((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),l=Object.assign({utf8:a,"utf-8":a,hex:r.bases.base16,latin1:c,ascii:c,binary:c},r.bases)},15178:function(e,t,n){"use strict";var r,i,o,s,a,c,l;Object.defineProperty(t,"__esModule",{value:!0}),t.isTmaPlatform=function(...e){return e.includes(g)},t.isInTMA=O,t.isInTelegramBrowser=function(){var e;let t=!!(null===(e=(0,d.getWindow)())||void 0===e?void 0:e.TelegramWebview);return(O()||t)&&"unknown"===g},t.sendExpand=function(){C("web_app_expand",{})},t.sendOpenTelegramLink=function(e,t){let n=new URL(e);if("http:"!==n.protocol&&"https:"!==n.protocol){if(t)return t();throw new h.OKXConnectError(h.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Url protocol is not supported: ${n}`)}if("t.me"!==n.hostname){if(t)return t();throw new h.OKXConnectError(h.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Url host is not supported: ${n}`)}let r=n.pathname+n.search;_()||function(e,t){let n,r,i,o;"string"!=typeof e&&(e=""),"string"!=typeof t&&(t="");let s=e.replace(/^\s+|\s+$/g,"").split("."),a=t.replace(/^\s+|\s+$/g,"").split(".");for(r=0,n=Math.max(s.length,a.length);r<n;r++)if((i=parseInt(s[r])||0)!==(o=parseInt(a[r])||0)){if(i>o)return 1;return -1}return 0}(v,"6.1")>=0?C("web_app_open_tg_link",{path_full:r}):(0,p.openLinkBlank)("https://t.me"+r)};let d=n(81487),u=n(90781),h=n(48786),p=n(82792),f={};try{let e=location.hash.toString();f=function(e){e=e.replace(/^#/,"");let t={};if(!e.length)return t;if(0>e.indexOf("=")&&0>e.indexOf("?"))return t._path=E(e),t;let n=e.indexOf("?");if(n>=0){let r=e.substr(0,n);t._path=E(r),e=e.substr(n+1)}let r=function(e){let t,n,r,i,o={};if(!e.length)return o;let s=e.split("&");for(t=0;t<s.length;t++)r=E((n=s[t].split("="))[0]),i=null==n[1]?null:E(n[1]),o[r]=i;return o}(e);for(let e in r)t[e]=r[e];return t}(e)}catch(e){}let g="unknown";if((null==f?void 0:f.tgWebAppPlatform)&&(g=null!==(r=f.tgWebAppPlatform)&&void 0!==r?r:"unknown"),"unknown"===g){let e=(0,d.getWindow)();g=null!==(s=null===(o=null===(i=null==e?void 0:e.Telegram)||void 0===i?void 0:i.WebApp)||void 0===o?void 0:o.platform)&&void 0!==s?s:"unknown"}let v="6.0";if((null==f?void 0:f.tgWebAppVersion)&&(v=f.tgWebAppVersion),!v){let e=(0,d.getWindow)();v=null!==(l=null===(c=null===(a=null==e?void 0:e.Telegram)||void 0===a?void 0:a.WebApp)||void 0===c?void 0:c.version)&&void 0!==l?l:"6.0"}function O(){var e;return"unknown"!==g||!!(null===(e=(0,d.getWindow)())||void 0===e?void 0:e.TelegramWebviewProxy)}function _(){try{let e=(0,d.getWindow)();if(!e)return!1;return null!=e.parent&&e!==e.parent}catch(e){return!1}}function C(e,t){try{let n=(0,d.getWindow)();if(!n)throw new h.OKXConnectError(h.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Can't post event to parent window: window is not defined");if(void 0!==n.TelegramWebviewProxy)(0,u.logDebug)("postEvent",e,t),n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));else if(n.external&&"notify"in n.external)(0,u.logDebug)("postEvent",e,t),n.external.notify(JSON.stringify({eventType:e,eventData:t}));else if(_()){let r=JSON.stringify({eventType:e,eventData:t});(0,u.logDebug)("postEvent",e,t),n.parent.postMessage(r,"*")}else throw new h.OKXConnectError(h.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Can't post event to TMA")}catch(e){(0,u.logError)(`Can't post event to parent window: ${e}`)}}function E(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch(t){return e}}},81487:function(e,t,n){"use strict";var r,i,o,s;Object.defineProperty(t,"__esModule",{value:!0}),t.removeUrlLastSlash=h,t.addPathToUrl=function(e,t){return h(e)+"/"+t},t.getUniversalLink=p,t.openOKXDeeplinkWithFallback=function(e){var t;let n=p(e),r=!!(null===(t=f())||void 0===t?void 0:t.TelegramWebviewProxy);console.log("openOKXDeeplinkWithFallback fullUrl:",n);let i=!1,o=a.standardUniversalLink;if((0,d.isIos)())r?window.open(n,"_blank"):(console.log("windowOpen[before]: ",Date.now()),(null==window?void 0:window.okxLogDebug)?window.open(n,"_blank"):window.open(n,"_self"),console.log("windowOpen[after]: ",Date.now()));else{let t=null;r?t=window.open(e,"_blank"):window.location.href=e,setTimeout(()=>{i||(t?t.open(o,"_self"):window.open(o,"_blank"))},1500),window.addEventListener("blur",()=>{i=!0},{once:!0}),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&(i=!0)})}},t.getWindow=f,t.isTelegramUrl=function(e){if(!e)return!1;let t=new URL(e);return"tg:"===t.protocol||"t.me"===t.hostname},t.encodeTelegramUrlParameters=function(e){let t=e;return(t=(t=(t=(t=(t=t.replace(/\./g,"%2E")).replace(/-/g,"%2D")).replace(/_/g,"%5F")).replace(/&/g,"-")).replace(/=/g,"__")).replace(/%/g,"--")},t.encodeConnectParams=function(e){let t=JSON.stringify(e);return(0,c.logDebug)("url encodeConnectParams connectRequestStr ",t),btoa(String.fromCharCode(...new TextEncoder().encode(t)))},t.encodeTWAConnectURLParams=function(e){let t=JSON.stringify({topic:e.topic,clientId:e.clientId});return(0,c.logDebug)("url encodeConnectParams connectRequestStr",t),btoa(String.fromCharCode(...new TextEncoder().encode(t)))},t.getAppWalletDeepLink=function(e){return`${a.standardDeeplink}?param=${e}`},t.getTelegramWalletTWAUrl=function(e,t,n=!1){let r={okxconnect:"",redirect:"",extraparams:""};e&&(r.okxconnect=e),t&&(r.redirect=t);let i=JSON.stringify(r),o=btoa(String.fromCharCode(...new TextEncoder().encode(i)));return((0,c.logDebug)("[TWA] open link:",r,o),e||t)?n?`http://localhost:5173?tgWebAppStartParam=${o}`:`https://t.me/${l.tgwalletName}/start?startapp=${o}`:n?"http://localhost:5173":`https://t.me/${l.tgwalletName}/start`},t.openOKXTMAWalletlinkWithFallback=function(e,t=!1){var n,r,i,o,s;(0,c.logDebug)("[TWA] open link:",e,"browserDebug ==> ",t),t?window.open(e,"_blank"):(null===(r=null===(n=f())||void 0===n?void 0:n.Telegram)||void 0===r?void 0:r.WebApp)?null===(s=null===(o=null===(i=f())||void 0===i?void 0:i.Telegram)||void 0===o?void 0:o.WebApp)||void 0===s||s.openTelegramLink(e):(0,u.sendOpenTelegramLink)(e)},t.isInTMA=_,t.isInTelegramBrowser=function(){var e;let t=!!(null===(e=f())||void 0===e?void 0:e.TelegramWebview);return(_()||t)&&"unknown"===O};let a=n(48786),c=n(90781),l=n(23001),d=n(11472),u=n(15178);function h(e){return"/"===e.slice(-1)?e.slice(0,-1):e}function p(e){let t=encodeURIComponent(e);return`${a.standardUniversalLink}?deeplink=${t}`}function f(){if("undefined"!=typeof window)return window}function g(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch(t){return e}}let v={};try{let e=location.hash.toString();v=function(e){e=e.replace(/^#/,"");let t={};if(!e.length)return t;if(0>e.indexOf("=")&&0>e.indexOf("?"))return t._path=g(e),t;let n=e.indexOf("?");if(n>=0){let r=e.substr(0,n);t._path=g(r),e=e.substr(n+1)}let r=function(e){let t,n,r,i,o={};if(!e.length)return o;let s=e.split("&");for(t=0;t<s.length;t++)r=g((n=s[t].split("="))[0]),i=null==n[1]?null:g(n[1]),o[r]=i;return o}(e);for(let e in r)t[e]=r[e];return t}(e)}catch(e){}let O="unknown";if((null==v?void 0:v.tgWebAppPlatform)&&(O=null!==(r=v.tgWebAppPlatform)&&void 0!==r?r:"unknown"),"unknown"===O){let e=f();O=null!==(s=null===(o=null===(i=null==e?void 0:e.Telegram)||void 0===i?void 0:i.WebApp)||void 0===o?void 0:o.platform)&&void 0!==s?s:"unknown"}function _(){var e;return"unknown"!==O||!!(null===(e=f())||void 0===e?void 0:e.TelegramWebviewProxy)}},11472:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isValidObject=t.RANDOM_LENGTH=t.isBrowser=t.resolveLocalStorage=t.hasLocalStorage=t.hasBuiltInWebSocket=t.resolveWebSocketImplementation=void 0,t.hexToByteArray=function(e){if(e.length%2!=0)throw Error(`Cannot convert ${e} to bytesArray`);let t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)t[n/2]=parseInt(e.slice(n,n+2),16);return t},t.toHexString=function(e){let t="";return e.forEach(e=>{t+=("0"+(255&e).toString(16)).slice(-2)}),t},t.concatUint8Arrays=function(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n},t.splitToUint8Arrays=function(e,t){if(t>=e.length)throw Error("Index is out of buffer");return[e.slice(0,t),e.slice(t)]},t.base64encode=function(e,t){let n;return e instanceof Uint8Array?n=e:("string"!=typeof e&&(e=(0,c.safeJsonStringify)(e)),n=o.default.decodeUTF8(e)),function(e,t){let n=o.default.encodeBase64(e);return t?encodeURIComponent(n):n}(n,t)},t.base64decode=function(e,t){var n;let r=(n=e,t&&(n=decodeURIComponent(n)),o.default.decodeBase64(n));return{toString:()=>o.default.encodeUTF8(r),toObject(){try{return(0,c.safeJsonParse)(o.default.encodeUTF8(r))}catch(e){return null}},toUint8Array:()=>r}},t.checkWSUrl=function(e){let t=e.match(RegExp(/^\w+:/,"gi"));if(!t||!t.length)return!1;let n=t[0];return void 0!==n&&RegExp("^wss?:").test(n)},t.hashKey=h,t.generateRandomBytes32=p,t.generateTopic=function(){let e=p();return(0,l.logDebug)(`generate topic called ${e}`),h((0,s.toString)(e,u))},t.isIos=function(){let e=navigator.userAgent,t=navigator.maxTouchPoints||0,n=/iPad|iPhone|iPod/.test(e)&&!window.MSStream,r=e.includes("Mac")&&t>1;return(0,l.logDebug)(`utils isIos >>>isIOSDevice: ${n}    >> isIPadOS: ${r}`),n||r};let i=r(n(76097)),o=r(n(38011)),s=n(44270),a=n(98517),c=n(8138),l=n(90781),d=n(74194),u="base16";function h(e,t=u){(0,l.logDebug)(`hash key called ${e}`);let n=(0,a.hash)((0,d.okxfromString)(e,t));return(0,s.toString)(n,t)}function p(){return i.default.randomBytes(t.RANDOM_LENGTH)}t.resolveWebSocketImplementation=()=>{if("undefined"!=typeof WebSocket);else if(void 0!==n.g&&void 0!==n.g.WebSocket)return n.g.WebSocket;else if("undefined"!=typeof window&&void 0!==window.WebSocket)return window.WebSocket;else if("undefined"!=typeof self&&void 0!==self.WebSocket)return self.WebSocket;return WebSocket},t.hasBuiltInWebSocket=()=>"undefined"!=typeof WebSocket||void 0!==n.g&&void 0!==n.g.WebSocket||"undefined"!=typeof window&&void 0!==window.WebSocket||"undefined"!=typeof self&&void 0!==self.WebSocket,t.hasLocalStorage=()=>void 0!==n.g&&void 0!==n.g.localStorage||"undefined"!=typeof window&&void 0!==window.localStorage,t.resolveLocalStorage=()=>void 0!==n.g&&void 0!==n.g.localStorage?n.g.localStorage:"undefined"!=typeof window&&void 0!==window.localStorage?window.localStorage:localStorage,t.isBrowser=()=>"undefined"!=typeof window,t.RANDOM_LENGTH=32,t.isValidObject=e=>Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length},82792:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.openLink=s,t.openLinkBlank=function(e){s(e,"_blank")},t.openDeeplinkWithFallback=function(e,t){let n=()=>{l("safari")||c("android")&&l("firefox")||t()},r=setTimeout(()=>n(),500);window.addEventListener("blur",()=>clearTimeout(r),{once:!0}),s(e,"_self")},t.isMobileUserAgent=function(){var e;let t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.slice(0,4)))&&(t=!0),t},t.getUserAgent=a,t.isOS=c,t.isBrowser=l;let i=r(n(84140)),o=n(90781);function s(e,t="_self"){(0,o.logDebug)("openLink",e,t),window.open(e,t,"noopener noreferrer")}function a(){var e,t,n;let r,o;let s=new i.default().getResult(),a=null===(e=s.os.name)||void 0===e?void 0:e.toLowerCase(),c=null===(t=s.device.model)||void 0===t?void 0:t.toLowerCase();switch(!0){case"ipad"===c:r="ipad";break;case"ios"===a:r="ios";break;case"android"===a:r="android";break;case"mac os"===a:r="macos";break;case"linux"===a:r="linux";break;case null==a?void 0:a.includes("windows"):r="windows"}let l=null===(n=s.browser.name)||void 0===n?void 0:n.toLowerCase();switch(!0){case"chrome"===l:o="chrome";break;case"firefox"===l:o="firefox";break;case null==l?void 0:l.includes("safari"):o="safari";break;case null==l?void 0:l.includes("opera"):o="opera"}return{os:r,browser:o}}function c(...e){return e.includes(a().os)}function l(...e){return e.includes(a().browser)}},43288:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.toUserFriendlyAddress=t.removeUrlLastSlash=t.addPathToUrl=t.createVersionInfo=t.BrowserEventDispatcher=t.createTransactionSigningFailedEvent=t.createTransactionSignedEvent=t.createTransactionSentForSignatureEvent=t.createDisconnectionEvent=t.createConnectionStartedEvent=t.createConnectionRestoringStartedEvent=t.createConnectionRestoringErrorEvent=t.createConnectionRestoringCompletedEvent=t.createConnectionErrorEvent=t.createConnectionCompletedEvent=t.createResponseVersionEvent=t.createRequestVersionEvent=t.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT=t.OKXTonConnect=void 0;var o=n(29587);Object.defineProperty(t,"OKXTonConnect",{enumerable:!0,get:function(){return o.OKXTonConnect}}),i(n(90861),t);var s=n(12655);Object.defineProperty(t,"OKX_TON_CONNECTION_AND_TRANSACTION_EVENT",{enumerable:!0,get:function(){return s.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT}}),Object.defineProperty(t,"createRequestVersionEvent",{enumerable:!0,get:function(){return s.createRequestVersionEvent}}),Object.defineProperty(t,"createResponseVersionEvent",{enumerable:!0,get:function(){return s.createResponseVersionEvent}}),Object.defineProperty(t,"createConnectionCompletedEvent",{enumerable:!0,get:function(){return s.createConnectionCompletedEvent}}),Object.defineProperty(t,"createConnectionErrorEvent",{enumerable:!0,get:function(){return s.createConnectionErrorEvent}}),Object.defineProperty(t,"createConnectionRestoringCompletedEvent",{enumerable:!0,get:function(){return s.createConnectionRestoringCompletedEvent}}),Object.defineProperty(t,"createConnectionRestoringErrorEvent",{enumerable:!0,get:function(){return s.createConnectionRestoringErrorEvent}}),Object.defineProperty(t,"createConnectionRestoringStartedEvent",{enumerable:!0,get:function(){return s.createConnectionRestoringStartedEvent}}),Object.defineProperty(t,"createConnectionStartedEvent",{enumerable:!0,get:function(){return s.createConnectionStartedEvent}}),Object.defineProperty(t,"createDisconnectionEvent",{enumerable:!0,get:function(){return s.createDisconnectionEvent}}),Object.defineProperty(t,"createTransactionSentForSignatureEvent",{enumerable:!0,get:function(){return s.createTransactionSentForSignatureEvent}}),Object.defineProperty(t,"createTransactionSignedEvent",{enumerable:!0,get:function(){return s.createTransactionSignedEvent}}),Object.defineProperty(t,"createTransactionSigningFailedEvent",{enumerable:!0,get:function(){return s.createTransactionSigningFailedEvent}}),Object.defineProperty(t,"BrowserEventDispatcher",{enumerable:!0,get:function(){return s.BrowserEventDispatcher}}),Object.defineProperty(t,"createVersionInfo",{enumerable:!0,get:function(){return s.createVersionInfo}});var a=n(82464);Object.defineProperty(t,"addPathToUrl",{enumerable:!0,get:function(){return a.addPathToUrl}}),Object.defineProperty(t,"removeUrlLastSlash",{enumerable:!0,get:function(){return a.removeUrlLastSlash}}),Object.defineProperty(t,"toUserFriendlyAddress",{enumerable:!0,get:function(){return a.toUserFriendlyAddress}})},29587:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXTonConnect=void 0;let o=n(94978),s=n(90861),a=n(87322),c=n(74866),l=n(15570),d=n(6755),u=n(74227);class h{constructor(e){if(this._wallet=null,this.provider=null,this.statusChangeSubscriptions=[],this.statusChangeErrorSubscriptions=[],this.storage=new s.Storage(u.OKXCONNECTOR_TON_KEY),this.openUniversalLink=!!this.provider&&this.provider.openUniversalLink,!e.metaData)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"dapp metaData can not be null");this.dappSettings={metaData:Object.assign(Object.assign({},e.metaData),{url:window.location.hostname,origin:window.location.origin})},this.tracker=new c.TonConnectTracker({OKXtonConnectSdkVersion:u.OKXtonConnectSdkVersion}),this.bridgeConnectionStorage=new d.BridgeConnectionStorage(this.storage)}get connected(){return null!==this._wallet}get account(){var e;return(null===(e=this._wallet)||void 0===e?void 0:e.account)||null}get wallet(){return this._wallet}set wallet(e){this._wallet=e,this.statusChangeSubscriptions.forEach(e=>e(this._wallet))}connect(e){return r(this,void 0,void 0,function*(){var t;return(0,s.logDebug)("ton-Connect ==>> connect_1 >> request:",e),this.connected&&(0,s.logError)("It's already connected to OKX Wallet, please call disconnect() first"),yield null===(t=this.provider)||void 0===t?void 0:t.closeConnection(!1,!0),this.provider||(this.provider=new o.BridgeProvider(this.storage)),this.provider.listen(this.walletEventsListener.bind(this)),this.tracker.trackConnectionStarted(),yield this.provider.connect(this.createConnectRequest(e),null==e?void 0:e.redirect,null==e?void 0:e.openUniversalLink,null==e?void 0:e.tmaReturnUrl)})}walletEventsListener(e){switch((0,s.logDebug)("ton-Connect ==>> walletEventsListener_1 >> e:",e),e.event){case"connect":this.onWalletConnected(e.payload);break;case"connect_error":this.onWalletConnectError(e.payload);break;case"disconnect":this.onWalletDisconnected("wallet")}}onWalletConnected(e){(0,s.logDebug)("ton-Connect ==>> onWalletConnected_1 >> connectEvent:",e);let t=e.items.find(e=>"ton_addr"===e.name),n=e.items.find(e=>"ton_proof"===e.name);if(!t)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton_addr connection item was not found");let r={device:e.device,provider:this.provider.type,account:{address:t.address,chain:t.network,walletStateInit:t.walletStateInit,publicKey:t.publicKey}};n&&(r.connectItems={tonProof:n}),this.wallet=r,(0,s.logDebug)("ton-Connect ==>> onWalletConnected_2 >> wallet:",r),this.tracker.trackConnectionCompleted(r)}onWalletConnectError(e){var t;(0,s.logDebug)("ton-Connect ==>> onWalletConnectError_1 >> connectEventError:",e);let n=new s.OKXConnectError(e.code,e.message);(0,s.logDebug)("ton-Connect ==>> onWalletConnectError_1 >> error:",n),this.statusChangeErrorSubscriptions.forEach(e=>e(n)),this.tracker.trackConnectionError(null!==(t=e.message)&&void 0!==t?t:"",e.code)}onWalletDisconnected(e){this.tracker.trackDisconnection(this.wallet,e),this.wallet=null}disconnect(){return r(this,void 0,void 0,function*(){var e;if((0,s.logDebug)("ton-Connect ==>> disconnect_1"),!this.connected)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,"wallet is not connected");(0,s.logDebug)("ton-Connect ==>> disconnect_222"),this.onWalletDisconnected("dapp"),yield null===(e=this.provider)||void 0===e?void 0:e.disconnect()})}onStatusChange(e,t){return this.statusChangeSubscriptions.push(e),t&&this.statusChangeErrorSubscriptions.push(t),()=>{this.statusChangeSubscriptions=this.statusChangeSubscriptions.filter(t=>t!==e),t&&(this.statusChangeErrorSubscriptions=this.statusChangeErrorSubscriptions.filter(e=>e!==t))}}restoreConnection(){return r(this,void 0,void 0,function*(){var e;(0,s.logDebug)("ton-Connect ==>> restoreConnection_1"),this.tracker.trackConnectionRestoringStarted();let t=null;try{t=yield o.BridgeProvider.fromStorage(this.storage)}catch(e){this.tracker.trackConnectionRestoringError("Provider is not restored"),yield this.bridgeConnectionStorage.removeConnection(),null==t||t.closeConnection(),t=null;return}if(!t){(0,s.logError)("Provider is not restored"),this.tracker.trackConnectionRestoringError("Provider is not restored");return}(0,s.logDebug)("ton-Connect ==>> restoreConnection_2 ==>> Provider is restored "),null===(e=this.provider)||void 0===e||e.closeConnection(!0,!1),this.provider=t,t.listen(this.walletEventsListener.bind(this)),yield this.provider.restoreConnection(),this.connected?this.tracker.trackConnectionRestoringCompleted(this.wallet):this.tracker.trackConnectionRestoringError("Connection restoring failed")})}sendTransaction(e,t){return r(this,void 0,void 0,function*(){var n;(0,s.logDebug)("ton-Connect ==>> sendTransaction_1",e),this.checkConnection(),(0,a.checkSendTransactionSupport)(this.wallet.device.features,{requiredMessagesNumber:e.messages.length}),this.tracker.trackTransactionSentForSignature(this.wallet,e),(0,s.logDebug)("ton-Connect ==>> sendTransaction_2 ==>> check params");let{validUntil:r}=e,o=i(e,["validUntil"]),c=e.from||this.account.address,d=this.account.chain;(0,s.logDebug)("ton-Connect ==>> sendTransaction_2 ==>> await sendRequest",d),(0,s.isIos)()&&(null===(n=this.provider)||void 0===n||n.openOKXWallet());let u=yield this.provider.sendRequest(l.sendTransactionParser.convertToRpcRequest(Object.assign(Object.assign({},o),{valid_until:r,from:c,network:d})),{onRequestSent:()=>{var e,n;(0,s.isIos)()||null===(e=this.provider)||void 0===e||e.openOKXWallet(),null===(n=null==t?void 0:t.onRequestSent)||void 0===n||n.call(t)}});if((0,s.logDebug)("ton-Connect ==>> sendTransaction_3 ==>>sendRequest response:",u),l.sendTransactionParser.isError(u))throw this.tracker.trackTransactionSigningFailed(this.wallet,e,u.error.message,u.error.code),new s.OKXConnectError(u.error.code,u.error.message);let h=l.sendTransactionParser.convertFromRpcResponse(u);return this.tracker.trackTransactionSigned(this.wallet,e,h),h})}checkConnection(){if((0,s.logDebug)("ton-Connect ==>> checkConnection"),!this.connected)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,"Wallet not connected")}createConnectRequest(e){(0,s.logDebug)("ton-Connect ==>> createConnectRequest");let t={ton_addr:{name:"ton_addr"}};return(null==e?void 0:e.tonProof)&&(t.ton_proof={name:"ton_proof",payload:e.tonProof}),{dappInfo:this.dappSettings.metaData,params:t}}static getWallets(){return this.walletsList}}t.OKXTonConnect=h,h.walletsList=[(0,s.creatOKXWalletInfo)()]},30479:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RpcParser=void 0;class n{isError(e){return"error"in e}}t.RpcParser=n},15570:function(e,t,n){"use strict";var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(t,"__esModule",{value:!0}),t.sendTransactionParser=void 0;let i=n(30479);class o extends i.RpcParser{convertToRpcRequest(e){let{redirect:t}=e;return{method:"ton_sendTransaction",redirect:t,params:r(e,["redirect"])}}convertFromRpcResponse(e){return{boc:e.result.toString()}}}t.sendTransactionParser=new o},6755:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.BridgeConnectionStorage=void 0;let i=n(90861);class o{constructor(e){this.storage=e,this.storeKey="ton_connect_info_adapter_universal"}storeConnection(e){return r(this,void 0,void 0,function*(){return(0,i.logDebug)("BridgeConnectionStorage ==>> storeConnection ==>> connection:",e),this.storage.saveContent(JSON.stringify(e),this.storeKey)})}removeConnection(){return r(this,void 0,void 0,function*(){return(0,i.logDebug)("BridgeConnectionStorage ==>> removeConnection"),this.storage.clearCache(this.storeKey)})}getConnection(){return r(this,void 0,void 0,function*(){let e=this.storage.getItem(this.storeKey);if((0,i.logDebug)("BridgeConnectionStorage ==>> getConnection ==>>this.storage: ",this.storage),!e||!(null==e?void 0:e.content))return null;try{let t=null==e?void 0:e.content;if(!t)return null;{let e;return e=JSON.parse(t),(0,i.logDebug)("BridgeConnectionStorage ==>> getConnection ==>>connection: ",e),e}}catch(e){return null}})}getHttpConnection(){return r(this,void 0,void 0,function*(){let e=yield this.getConnection();if(!e)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Trying to read HTTP connection source while nothing is stored");return e})}storeLastWalletEventId(e){return r(this,void 0,void 0,function*(){let t=yield this.getConnection();if(t&&"connectEvent"in t)return t.lastWalletEventId=e,this.storeConnection(t)})}getLastWalletEventId(){return r(this,void 0,void 0,function*(){let e=yield this.getConnection();if(e&&"lastWalletEventId"in e)return e.lastWalletEventId})}}t.BridgeConnectionStorage=o},94978:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.BridgeProvider=void 0;let i=n(54077),o=n(90861),s=n(6755),a=n(74227),c=n(74866);class l{constructor(e){this.storage=e,this.type="http",this.listeners=[],this.connectManager=new o.ConnectionManager,this.walletConnectionSource={universalLink:o.standardUniversalLink},this.engine=new o.Engine(this.connectManager),this.openUniversalLink=!1,this.connectionStorage=new s.BridgeConnectionStorage(e),this.tracker=new c.TonConnectTracker({OKXtonConnectSdkVersion:a.OKXtonConnectSdkVersion})}static fromStorage(e){return r(this,void 0,void 0,function*(){(0,o.logDebug)("bridge-provider ==>> fromStorage ==>>storage:",e);let t=new s.BridgeConnectionStorage(e),n=yield t.getHttpConnection();if((0,i.isPendingConnectionHttp)(n))return null;let r=new l(e);return r.openUniversalLink=n.openUniversalLink,r})}connect(e,t,n,i){return r(this,void 0,void 0,function*(){return(0,o.logDebug)("bridge-provider ==>> connect_1 ==>>message:",e),(0,o.logDebug)("bridge-provider ==>> connect_1 ==>>redirect:",t),(0,o.logDebug)("bridge-provider ==>> connect_1 ==>>openUniversalLink:",n),(0,o.logDebug)("bridge-provider ==>> connect_1 ==>>tmaReturnUrl:",i),new Promise((r,s)=>{try{this.openUniversalLink=n,void 0===this.openUniversalLink&&(this.openUniversalLink=(0,o.isMobileUserAgent)());let a={namespace:"ton",chains:["ton:-239"],params:e.params},c=[];e.params.ton_addr&&c.push(e.params.ton_addr),e.params.ton_proof&&c.push(e.params.ton_proof),c.push({name:"requestAccounts",requiredNamespaces:[a]});let l={dappInfo:e.dappInfo,openUniversalUrl:this.openUniversalLink,redirect:t,tmaReturnUrl:i};this.engine.universalConnect(c,l,e=>{(0,o.logDebug)(`bridge-provider: connect: info>>>> ${JSON.stringify(e)}`);try{if(!e.tonConnectRequest)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"universalConnect connectInfoAndUrl info.tonConnectRequest is nil");let t=(0,o.encodeConnectParams)(e.tonConnectRequest),n=(0,o.getAppWalletDeepLink)(t),i=(0,o.getUniversalLink)(n);this.tracker.trackConnectionInfoBeforeJump(e),r(i)}catch(e){s(e)}}).then(e=>{(0,o.logDebug)(`bridge-provider: connect: success>>>> ${JSON.stringify(e)}`),this.connectSuccessHandle(e)}).catch(e=>{(0,o.logDebug)(`bridge-provider: connect: catch>>>> ${JSON.stringify(e)}`);let t={event:"connect_error",requestId:Number(Date.now()),payload:{code:e.code,message:e.message}};(0,o.logDebug)("bridge-provider ==>> connectListener_4 ==>>connect_error:",t),this.listeners.forEach(e=>e(t))})}catch(e){console.error("bridge-provider connect try catch error:>>>",JSON.stringify(e)),s(e)}})})}listen(e){return this.listeners.push(e),()=>this.listeners=this.listeners.filter(t=>t!==e)}disconnectListener(){return r(this,void 0,void 0,function*(){(0,o.logDebug)("bridge-provider ==>> disconnectListener");let e={event:"disconnect",requestId:Number(1),payload:{}};this.listeners.forEach(t=>t(e)),yield this.closeConnection()})}connectSuccessHandle(e){return r(this,void 0,void 0,function*(){var t;try{let n=null===(t=e.namespaces)||void 0===t?void 0:t.ton,r=n.payload,i=e.wallet;if(!n||!r||!i||!r.ton_addr)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR);r.ton_addr;let s=e.sessionConfig,a=[];r.ton_addr&&a.push(r.ton_addr),r.ton_proof&&a.push(r.ton_proof);let c={platform:i.platform,appName:i.appName,appVersion:i.appVersion,maxProtocolVersion:i.maxProtocolVersion,features:["ton_sendTransaction"]},l={type:"http",lastWalletEventId:Number(Date.now()),connectEvent:{event:"connect",payload:{items:a,device:c}},connectionSource:this.walletConnectionSource,channelId:e.topic,openUniversalLink:null==s?void 0:s.openUniversalUrl};(0,o.logDebug)("bridge-provider ==>> connectSuccessHandle_2 ==>>storeConnection:",l),yield this.connectionStorage.storeConnection(l);let d={event:"connect",requestId:l.lastWalletEventId,payload:l.connectEvent.payload};(0,o.logDebug)("bridge-provider ==>> connectSuccessHandle_3 ==>>listeners.forEach:",d),this.listeners.forEach(e=>e(d))}catch(t){(0,o.logDebug)("bridge-provider ==>> connectSuccessHandle_4 ==>>error:",t);let e={event:"connect_error",requestId:Number(Date.now()),payload:{code:o.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,message:"Connect success  connectSuccessHandle response error"}};(0,o.logDebug)("bridge-provider ==>> connectSuccessHandle_4 ==>>connect_error:",e),this.listeners.forEach(t=>t(e))}})}closeConnection(){return r(this,arguments,void 0,function*(e=!1,t=!1){var n,r;(0,o.logDebug)("bridge-provider ==>> closeConnection ==>>fromRestore:",e," needOpenUrl:",t),this.listeners=[],t||(yield null===(n=this.connectManager)||void 0===n?void 0:n.disconnect(e)),e||(null===(r=this.engine)||void 0===r||r.disconnect(),yield this.connectionStorage.removeConnection())})}restoreConnection(){return r(this,void 0,void 0,function*(){var e;(0,o.logDebug)("bridge-provider ==>> restoreConnection_1");let t=yield this.connectionStorage.getHttpConnection();if(!(!t||(0,i.isPendingConnectionHttp)(t))){if((0,o.logDebug)("bridge-provider ==>> restoreConnection_2 ==>>storedConnection.channelId:",t.channelId),t.channelId)try{let n={event:"connect",requestId:Number(0),payload:t.connectEvent.payload};this.listeners.forEach(e=>e(n));let r=t.channelId;(0,o.logDebug)("bridge-provider ==>> restoreConnection_3 ==>>this.connectManager.restoreConnect:",r),null===(e=this.engine)||void 0===e||e.addDisconnectListener(this.disconnectListener.bind(this)),yield this.connectManager.restoreConnect(r)}catch(e){(0,o.logDebug)("bridge-provider ==>> restoreConnection_4 ==>>closeConnection_1"),yield this.closeConnection()}else(0,o.logDebug)("bridge-provider ==>> restoreConnection_4 ==>>closeConnection_2"),yield this.closeConnection()}})}openOKXWallet(){(0,o.logDebug)("bridge-provider ==>> openOKXWallet",this.openUniversalLink),this.openUniversalLink&&(0,o.openOKXDeeplinkWithFallback)(o.standardDeeplink)}disconnect(){return r(this,void 0,void 0,function*(){return(0,o.logDebug)("bridge-provider ==>> disconnect_1"),new Promise(e=>r(this,void 0,void 0,function*(){let t=!1,n=()=>{t||(t=!0,this.closeConnection().then(e))};try{yield this.sendRequest({method:"disconnect"},{onRequestSent:n,attempts:1})}catch(n){t||this.closeConnection().then(e)}finally{n()}}))})}sendRequest(e,t){return(0,o.logDebug)("bridge-provider ==>> sendRequest"),new Promise((n,i)=>r(this,void 0,void 0,function*(){var r;try{yield null===(r=this.engine)||void 0===r?void 0:r.send(e,{resolve:function(e){n(e)},onAck:function(){var e;null===(e=null==t?void 0:t.onRequestSent)||void 0===e||e.call(t)}},{attempts:null==t?void 0:t.attempts})}catch(e){i(e)}}))}}t.BridgeProvider=l},54077:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPendingConnectionHttp=function(e){return!("connectEvent"in e)}},5932:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserEventDispatcher=void 0;class r{constructor(){this.window=window}dispatchEvent(e,t){return n(this,void 0,void 0,function*(){var n;let r=new CustomEvent(e,{detail:t});null===(n=this.window)||void 0===n||n.dispatchEvent(r)})}addEventListener(e,t,r){return n(this,void 0,void 0,function*(){var n;return null===(n=this.window)||void 0===n||n.addEventListener(e,t,r),()=>{var n;return null===(n=this.window)||void 0===n?void 0:n.removeEventListener(e,t)}})}}t.BrowserEventDispatcher=r},12655:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserEventDispatcher=t.createVersionInfo=t.createTransactionSigningFailedEvent=t.createTransactionSignedEvent=t.createTransactionSentForSignatureEvent=t.createDisconnectionEvent=t.createConnectionStartedEvent=t.createConnectionRestoringStartedEvent=t.createConnectionRestoringErrorEvent=t.createConnectionRestoringCompletedEvent=t.createConnectionErrorEvent=t.createConnectionCompletedEvent=t.createResponseVersionEvent=t.createRequestVersionEvent=t.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT=void 0;var r=n(44915);Object.defineProperty(t,"OKX_TON_CONNECTION_AND_TRANSACTION_EVENT",{enumerable:!0,get:function(){return r.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT}});var i=n(3691);Object.defineProperty(t,"createRequestVersionEvent",{enumerable:!0,get:function(){return i.createRequestVersionEvent}}),Object.defineProperty(t,"createResponseVersionEvent",{enumerable:!0,get:function(){return i.createResponseVersionEvent}}),Object.defineProperty(t,"createConnectionCompletedEvent",{enumerable:!0,get:function(){return i.createConnectionCompletedEvent}}),Object.defineProperty(t,"createConnectionErrorEvent",{enumerable:!0,get:function(){return i.createConnectionErrorEvent}}),Object.defineProperty(t,"createConnectionRestoringCompletedEvent",{enumerable:!0,get:function(){return i.createConnectionRestoringCompletedEvent}}),Object.defineProperty(t,"createConnectionRestoringErrorEvent",{enumerable:!0,get:function(){return i.createConnectionRestoringErrorEvent}}),Object.defineProperty(t,"createConnectionRestoringStartedEvent",{enumerable:!0,get:function(){return i.createConnectionRestoringStartedEvent}}),Object.defineProperty(t,"createConnectionStartedEvent",{enumerable:!0,get:function(){return i.createConnectionStartedEvent}}),Object.defineProperty(t,"createDisconnectionEvent",{enumerable:!0,get:function(){return i.createDisconnectionEvent}}),Object.defineProperty(t,"createTransactionSentForSignatureEvent",{enumerable:!0,get:function(){return i.createTransactionSentForSignatureEvent}}),Object.defineProperty(t,"createTransactionSignedEvent",{enumerable:!0,get:function(){return i.createTransactionSignedEvent}}),Object.defineProperty(t,"createTransactionSigningFailedEvent",{enumerable:!0,get:function(){return i.createTransactionSigningFailedEvent}}),Object.defineProperty(t,"createVersionInfo",{enumerable:!0,get:function(){return i.createVersionInfo}});var o=n(5932);Object.defineProperty(t,"BrowserEventDispatcher",{enumerable:!0,get:function(){return o.BrowserEventDispatcher}})},74866:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.TonConnectTracker=void 0;let i=n(3691),o=n(5932);class s{get version(){return(0,i.createVersionInfo)({okx_ton_connect_sdk_lib:this.OKXtonConnectSdkVersion,okx_connect_ui_lib:this.OKXConnectUiVersion})}constructor(e){this.eventPrefix="okx-ton-connect-",this.OKXConnectUiVersion=null,this.eventDispatcher=new o.BrowserEventDispatcher,this.OKXtonConnectSdkVersion=e.OKXtonConnectSdkVersion,this.init().catch()}init(){return r(this,void 0,void 0,function*(){try{yield this.setRequestVersionHandler(),this.OKXConnectUiVersion=yield this.requestTonConnectUiVersion()}catch(e){}})}setRequestVersionHandler(){return r(this,void 0,void 0,function*(){yield this.eventDispatcher.addEventListener("okx-ton-connect-request-version",()=>r(this,void 0,void 0,function*(){yield this.eventDispatcher.dispatchEvent("okx-ton-connect-response-version",(0,i.createResponseVersionEvent)(this.OKXtonConnectSdkVersion))}))})}requestTonConnectUiVersion(){return r(this,void 0,void 0,function*(){return new Promise((e,t)=>r(this,void 0,void 0,function*(){try{yield this.eventDispatcher.addEventListener("okx-connect-ui-response-version",t=>{e(t.detail.version)},{once:!0}),yield this.eventDispatcher.dispatchEvent("okx-connect-ui-request-version",(0,i.createRequestVersionEvent)())}catch(e){t(e)}}))})}dispatchUserActionEvent(e){try{this.eventDispatcher.dispatchEvent(`${this.eventPrefix}${e.type}`,e).catch()}catch(e){}}trackConnectionStarted(...e){try{let t=(0,i.createConnectionStartedEvent)(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackConnectionDeepLink(...e){try{let t=(0,i.createConnectionDeepLinkEvent)(...e);this.dispatchUserActionEvent(t)}catch(e){}}trackConnectionCompleted(...e){try{let t=(0,i.createConnectionCompletedEvent)(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackConnectionInfoBeforeJump(e){try{let t=(0,i.createConnectionInfoBeforeJumpEvent)(e);this.dispatchUserActionEvent(t)}catch(e){}}trackConnectionError(...e){try{let t=(0,i.createConnectionErrorEvent)(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackConnectionRestoringStarted(...e){try{let t=(0,i.createConnectionRestoringStartedEvent)(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackConnectionRestoringCompleted(...e){try{let t=(0,i.createConnectionRestoringCompletedEvent)(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackConnectionRestoringError(...e){try{let t=(0,i.createConnectionRestoringErrorEvent)(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackDisconnection(...e){try{let t=(0,i.createDisconnectionEvent)(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackTransactionSentForSignature(...e){try{let t=(0,i.createTransactionSentForSignatureEvent)(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackTransactionSigned(...e){try{let t=(0,i.createTransactionSignedEvent)(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackTransactionSigningFailed(...e){try{let t=(0,i.createTransactionSigningFailedEvent)(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}}t.TonConnectTracker=s},44915:function(e,t){"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT=void 0,(r=n||(t.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT=n={})).OKX_TON_CONNECTION_STARTED="okx-ton-connect-connection-started",r.OKX_TON_CONNECTION_COMPLETED="okx-ton-connect-connection-completed",r.OKX_TON_CONNECTION_ERROR="okx-ton-connect-connection-error",r.OKX_TON_CONNECTION_RESTORING_STARTED="okx-ton-connect-connection-restoring-started",r.OKX_TON_CONNECTION_RESTORING_COMPLETED="okx-ton-connect-connection-restoring-completed",r.OKX_TON_CONNECTION_RESTORING_ERROR="okx-ton-connect-connection-restoring-error",r.OKX_TON_DISCONNECTION="okx-ton-connect-disconnection",r.OKX_TON_TRANSACTION_SENT_FOR_SIGNATURE="okx-ton-connect-transaction-sent-for-signature",r.OKX_TON_TRANSACTION_SIGNED="okx-ton-connect-transaction-signed",r.OKX_TON_TRANSACTION_SIGNING_FAILED="okx-ton-connect-transaction-signing-failed"},3691:function(e,t){"use strict";function n(e){return{okx_ton_connect_sdk_lib:e.okx_ton_connect_sdk_lib,okx_connect_ui_lib:e.okx_connect_ui_lib}}function r(e,t){var r,i,o,s,a,c,l,d;let u=(null===(r=null==t?void 0:t.connectItems)||void 0===r?void 0:r.tonProof)&&"proof"in t.connectItems.tonProof;return{wallet_address:null!==(o=null===(i=null==t?void 0:t.account)||void 0===i?void 0:i.address)&&void 0!==o?o:null,wallet_type:null!==(s=null==t?void 0:t.device.appName)&&void 0!==s?s:null,wallet_version:null!==(a=null==t?void 0:t.device.appVersion)&&void 0!==a?a:null,auth_type:u?"ton_proof":"ton_addr",custom_data:Object.assign({chain_id:null!==(l=null===(c=null==t?void 0:t.account)||void 0===c?void 0:c.chain)&&void 0!==l?l:null,provider:null!==(d=null==t?void 0:t.provider)&&void 0!==d?d:null},n(e))}}function i(e,t){var n,r,i,o;return{valid_until:null!==(n=String(t.validUntil))&&void 0!==n?n:null,from:null!==(o=null!==(r=t.from)&&void 0!==r?r:null===(i=null==e?void 0:e.account)||void 0===i?void 0:i.address)&&void 0!==o?o:null,messages:t.messages.map(e=>{var t,n;return{address:null!==(t=e.address)&&void 0!==t?t:null,amount:null!==(n=e.amount)&&void 0!==n?n:null}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.createRequestVersionEvent=function(){return{type:"request-version"}},t.createResponseVersionEvent=function(e){return{type:"response-version",version:e}},t.createVersionInfo=n,t.createConnectionStartedEvent=function(e){return{type:"connection-started",custom_data:n(e)}},t.createConnectionDeepLinkEvent=function(e){return{type:"connection-get-deeplink",deeplinkUrl:e}},t.createConnectionInfoBeforeJumpEvent=function(e){return{type:"connection-info-before-jump",connectInfo:e}},t.createConnectionCompletedEvent=function(e,t){return Object.assign({type:"connection-completed",is_success:!0},r(e,t))},t.createConnectionErrorEvent=function(e,t,r){return{type:"connection-error",is_success:!1,error_message:t,error_code:null!=r?r:null,custom_data:n(e)}},t.createConnectionRestoringStartedEvent=function(e){return{type:"connection-restoring-started",custom_data:n(e)}},t.createConnectionRestoringCompletedEvent=function(e,t){return Object.assign({type:"connection-restoring-completed",is_success:!0},r(e,t))},t.createConnectionRestoringErrorEvent=function(e,t){return{type:"connection-restoring-error",is_success:!1,error_message:t,custom_data:n(e)}},t.createTransactionSentForSignatureEvent=function(e,t,n){return Object.assign(Object.assign({type:"transaction-sent-for-signature"},r(e,t)),i(t,n))},t.createTransactionSignedEvent=function(e,t,n,o){return Object.assign(Object.assign({type:"transaction-signed",is_success:!0,signed_transaction:o.boc},r(e,t)),i(t,n))},t.createTransactionSigningFailedEvent=function(e,t,n,o,s){return Object.assign(Object.assign({type:"transaction-signing-failed",is_success:!1,error_message:o,error_code:null!=s?s:null},r(e,t)),i(t,n))},t.createDisconnectionEvent=function(e,t,n){return Object.assign({type:"disconnection",scope:n},r(e,t))}},67455:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toUserFriendlyAddress=function(e,t=!1){let{wc:n,hex:o}=function(e){if(!e.includes(":"))throw Error(`Wrong address ${e}. Address must include ":".`);let t=e.split(":");if(2!==t.length)throw Error(`Wrong address ${e}. Address must include ":" only once.`);let n=parseInt(t[0]);if(0!==n&&-1!==n)throw Error(`Wrong address ${e}. WC must be eq 0 or -1, but ${n} received.`);let r=t[1];if((null==r?void 0:r.length)!==64)throw Error(`Wrong address ${e}. Hex part must be 64bytes length, but ${null==r?void 0:r.length} received.`);return{wc:n,hex:function(e){let t=(e=e.toLowerCase()).length;if(t%2!=0)throw Error("Hex string must have length a multiple of 2: "+e);let n=t/2,r=new Uint8Array(n);for(let t=0;t<n;t++){let n=2*t,o=e.substring(n,n+2);if(!i.hasOwnProperty(o))throw Error("Invalid hex character: "+o);r[t]=i[o]}return r}(r)}}(e),s=81;t&&(s|=128);let a=new Int8Array(34);a[0]=s,a[1]=n,a.set(o,2);let c=new Uint8Array(36);return c.set(a),c.set(function(e){let t=0,n=new Uint8Array(e.length+2);for(let r of(n.set(e),n)){let e=128;for(;e>0;)t<<=1,r&e&&(t+=1),e>>=1,t>65535&&(t&=65535,t^=4129)}return new Uint8Array([Math.floor(t/256),t%256])}(a),34),(0,r.base64encode)(c,!1).replace(/\+/g,"-").replace(/\//g,"_")};let r=n(90861),i={};for(let e=0;e<=255;e++){let t=e.toString(16);t.length<2&&(t="0"+t),i[t]=e}},74227:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OKXCONNECTOR_TON_KEY=t.OKXtonConnectSdkVersion=void 0,t.OKXtonConnectSdkVersion="1",t.OKXCONNECTOR_TON_KEY="OKXStorage_ctc"},87322:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkSendTransactionSupport=function(e,t){if(!e.includes("ton_sendTransaction"))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,"Wallet doesn't support SendTransaction feature.");if(4<t.requiredMessagesNumber)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,`Wallet is not able to handle such SendTransaction request. Max support messages number is 4, but ${t.requiredMessagesNumber} is required.`)};let r=n(90861)},82464:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toUserFriendlyAddress=t.removeUrlLastSlash=t.addPathToUrl=void 0;var r=n(20336);Object.defineProperty(t,"addPathToUrl",{enumerable:!0,get:function(){return r.addPathToUrl}}),Object.defineProperty(t,"removeUrlLastSlash",{enumerable:!0,get:function(){return r.removeUrlLastSlash}});var i=n(67455);Object.defineProperty(t,"toUserFriendlyAddress",{enumerable:!0,get:function(){return i.toUserFriendlyAddress}})},20336:function(e,t){"use strict";function n(e){return"/"===e.slice(-1)?e.slice(0,-1):e}Object.defineProperty(t,"__esModule",{value:!0}),t.removeUrlLastSlash=n,t.addPathToUrl=function(e,t){return n(e)+"/"+t}},32658:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXBtcProvider=void 0;let i=n(44847);class o{constructor(e){this.caip=["btc:mainnet","fractal:mainnet"],this.provider=e.getUniversalProvider()}getAddressForChainId(e){var t,n;if(void 0==this.checkChainId(e))throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let r=null===(n=null===(t=this.provider.session)||void 0===t?void 0:t.namespaces.btc)||void 0===n?void 0:n.accounts.filter(function(t){return t.startsWith(e)});if(void 0==r||r.length<0)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"no connected account");return r[0].split(":")[2]}getAccount(e){var t,n,r;let o=this.checkChainId(e);if(void 0==o)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let s=null===(r=null===(n=null===(t=this.provider.session)||void 0===t?void 0:t.namespaces[o])||void 0===n?void 0:n.extra)||void 0===r?void 0:r[e],a="";return void 0!=s&&(a=s.publicKey),{address:this.getAddressForChainId(e),publicKey:a}}signMessage(e,t,n){return r(this,void 0,void 0,function*(){if(void 0==this.checkChainId(e))throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if("undefined"===t)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signMessage parmas error");let r={signStr:t,from:this.getAddressForChainId(e)};n&&(r.type=n);try{let t=yield this.provider.request({method:"btc_signMessage",params:r},e);if("result"in t)return t.result;return t.error}catch(e){throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signTransaction request error")}})}sendBitcoin(e,t,n,o){return r(this,void 0,void 0,function*(){if(void 0==this.checkChainId(e))throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let r={from:this.getAddressForChainId(e),to:t,value:(n/1e8).toString()};(null==o?void 0:o.feeRate)&&(r.satBytes=o.feeRate.toString());let s=yield this.send(e,r);return void 0!==s&&"txhash"in s?s.txhash:s})}send(e,t){return r(this,void 0,void 0,function*(){if(void 0==this.checkChainId(e))throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if(!this.checkParameters(t,"to","value"))throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method send parmas  error");t.from=this.getAddressForChainId(e);try{let n=yield this.provider.request({method:"btc_send",params:t},e);if("result"in n)return{txhash:n.result};return n.error}catch(e){throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method send request error: ${e}`)}})}signPsbt(e,t,n){return r(this,void 0,void 0,function*(){return new Promise((r,i)=>{this.signPsbts(e,[t],[n]).then(e=>{r(JSON.parse(e)[0])}).catch(e=>{i(e)})})})}signPsbts(e,t,n){return r(this,void 0,void 0,function*(){if(void 0==this.checkChainId(e))throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if(void 0===t)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signPsbts params error");let r={psbtHexs:t,options:n};r.from=this.getAddressForChainId(e);try{let t=yield this.provider.request({method:"btc_signPsbts",params:r},e);if("result"in t)return t.result;return t.error}catch(e){throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method send request error: ${e}`)}})}signAndPushPsbt(e,t,n){return r(this,void 0,void 0,function*(){if(void 0==this.checkChainId(e))throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if(void 0===t)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signPsbts params error");let r={psbtHex:t,options:n};r.from=this.getAddressForChainId(e);try{let t=yield this.provider.request({method:"btc_signAndPushPsbt",params:r},e);if("result"in t)return JSON.parse(t.result);return t.error}catch(e){throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method send request error: ${e}`)}})}sendInscription(e,t,n,o){return r(this,void 0,void 0,function*(){let r={address:t,inscriptionId:n,options:o};if(void 0==this.checkChainId(e))throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if("undefined"===t)throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method sendInscription params error");var s=0;o&&"feeRate"in o&&(s=o.feeRate);let a=this.getAddressForChainId(e);var c=7;if("undefined"!==n){let e="-Atomicals",t="-Ordinals";(null==n?void 0:n.toLowerCase().endsWith(e.toLowerCase()))?(c=8,n=this.removeSuffix(n,e)):(null==n?void 0:n.toLowerCase().endsWith(t.toLowerCase()))&&(n=this.removeSuffix(n,t))}let l={scenario:5,feeRate:s,txType:"20",to:t,batchBean:[{coinAmount:"1",nftId:n,protocolId:c,coinId:"",inscriptionId:"",from:a}],extension:r};try{let t=yield this.provider.request({method:"btc_sendInscription",params:l},e);if("result"in t)return t.result;return t.error}catch(e){throw new i.OKXConnectError(i.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signTransaction request error")}})}removeSuffix(e,t){return e.endsWith(t)?e.slice(0,e.length-t.length):e}checkParameters(e,...t){var n=[];return t.forEach(t=>{`${t}` in e||n.push(t)}),!(n.length>0)||(console.log("not find key: ",n.join(",")),!1)}checkChainId(e){if(this.caip.includes(e)){let[t,n]=e.split(":");return t}}}t.OKXBtcProvider=o,t.default=o},33210:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXUniversalProvider=void 0;let o=n(10723),s=n(36742),a=n(40317),c=n(15941),l=i(n(36456)),d=n(90415),u=n(90861),h=n(43207),p=i(n(71542)),f=i(n(93871)),g=i(n(62523)),v=i(n(85231));class O{static init(e){return r(this,void 0,void 0,function*(){let t=new O(e);return yield t.initialize(),t})}getUniversalProvider(){return this}constructor(e){this.rpcProviders={},this.events=new l.default,this.providerOpts=e}request(e,t){return r(this,void 0,void 0,function*(){if(!this.connected())throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR);let{namespace:n,requestParam:r}=this.buildRequestParamFromRequest(e,t);return yield this.getProvider(n).request(r)})}buildRequestParamFromRequest(e,t){(0,u.logDebug)("UniversalProvider request args >>>: ",t,JSON.stringify(e));let[n,r]=this.validateChain(t);if(!this.session)throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Please call connect() before request()");let i=Object.keys(this.session.namespaces);if(!t&&i&&i.length>1)throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,"Multiple chains have been linked, the request method requires chain");(0,u.logDebug)("UniversalProvider request >>args>>>: ",e);let o=Object.assign(Object.assign({},e),{chainId:`${n}:${r}`});return{namespace:n,requestParam:o}}enable(){return r(this,void 0,void 0,function*(){if(!this.client)throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");if(!this.session){if(this.connectOpts)yield this.connect(this.connectOpts);else throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized")}return yield this.requestAccounts()})}disconnect(){return r(this,void 0,void 0,function*(){if(!this.session)throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR);return new Promise(e=>r(this,void 0,void 0,function*(){let t=!1,n=()=>r(this,void 0,void 0,function*(){t||(t=!0,yield this.disconnectAndEmit(),yield this.cleanup(),e(),(0,u.logDebug)("UniversalProvider disconnect Disconnected"))});try{yield this.client.disconnect(),yield n()}catch(e){yield n()}}))})}disconnectAndEmit(){var e,t;this.client.engine.connectionManager.disconnect(),this.events.emit("disconnect",{topic:null===(e=this.session)||void 0===e?void 0:e.topic}),this.events.emit("session_delete",{topic:null===(t=this.session)||void 0===t?void 0:t.topic})}aptosChainNameToGeneralId(e){return"aptos:mainnet"==e?"aptos:637":"movement:testnet"==e?"aptos:70000060":e}replaceAptos(e){var t,n;let r=null===(t=e.namespaces)||void 0===t?void 0:t.aptos;if(void 0!=r){let t=this.replaceAptosInner(r);void 0!=e.namespaces&&"aptos"in e.namespaces&&void 0!=t&&(e.namespaces.aptos=t)}let i=null===(n=e.optionalNamespaces)||void 0===n?void 0:n.aptos;if(void 0!=i){let t=this.replaceAptosInner(i);void 0!=e.optionalNamespaces&&"aptos"in e.optionalNamespaces&&void 0!=t&&(e.optionalNamespaces.aptos=t)}return e}replaceAptosInner(e){var t;return void 0!=e&&(e.chains=null===(t=e.chains)||void 0===t?void 0:t.map(e=>this.aptosChainNameToGeneralId(e)),void 0!=e.defaultChain&&(e.defaultChain=this.aptosChainNameToGeneralId(e.defaultChain))),e}connected(){let e=()=>{try{this.cleanup(),this.client.engine.connectionManager.disconnect()}catch(e){(0,u.logDebug)("Error during disconnect:",e)}};try{if(!this.session)return!1;if(!this.client.engine.connectionManager.getCurrentConnectionReady())return e(),!1;return!0}catch(t){return e(),!1}}connect(e){return r(this,void 0,void 0,function*(){if(!this.client)throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");if(e=this.replaceAptos(e),this.connected())throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.ALREADY_CONNECTED_ERROR);(0,u.logDebug)("OKXUniversalProvider connect >>>>",JSON.stringify(e)),void 0===e.sessionConfig&&(e.sessionConfig={}),void 0===e.sessionConfig.openUniversalUrl&&(e.sessionConfig.openUniversalUrl=(0,u.isMobileUserAgent)()),this.setNamespaces(e);try{(0,u.logDebug)(`UniversalProvider connect opts.stringify ====> ${JSON.stringify(e)}`);let t=yield this.client.connect(e);if((0,u.logDebug)(`UniversalProvider connect success ====> ${JSON.stringify(t)}`),t)return this.session=t,this.onConnect(),t;return}catch(e){throw(0,u.logDebug)("UniversalProvider connect error ====> ",JSON.stringify(e)),e}})}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}setDefaultChain(e,t){e=this.aptosChainNameToGeneralId(e);try{if(!this.connected())return;let[n,r]=this.validateChain(e);this.getProvider(n).setDefaultChain(r,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}checkStorage(){return r(this,void 0,void 0,function*(){let e=yield this.getFromStore("connectSession");(0,u.logDebug)(e),e&&(this.session=e,this.client.session=this.session,this.sessionConfig=e.sessionConfig,this.client.sessionConfig=this.sessionConfig,(0,u.logDebug)("[evm u-provider] do reconnection",this.session),yield this.client.restoreconnect(e),this.createProviders(),setTimeout(()=>{this.events.emit("reconnect",{session:this.session})},100))})}initialize(){return r(this,void 0,void 0,function*(){let e=Object.assign({url:window.location.hostname,origin:window.location.origin},this.providerOpts.dappMetaData);(0,o.setGlobal)("events",this.events),this.client=new d.SignClient(e),(0,o.setGlobal)("client",this.client),yield this.checkStorage()})}createProviders(){if(!this.client)throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");if(!this.connected())throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Session not initialized. Please call connect() before enable()");[...new Set(Object.keys(this.session.namespaces).map(e=>(0,h.parseNamespaceKey)(e)))].forEach(e=>{if(!this.session)return;let t=this.session.namespaces[e];switch((0,u.logDebug)("init eip155 >> ",t),e){case"eip155":this.rpcProviders[e]=new s.Eip155Provider({namespace:t});break;case"solana":let n={namespace:t},r=new p.default(n,"solana");this.rpcProviders[e]=r;let i=new p.default(n,"sonic");this.rpcProviders.sonic=i;let o=new p.default(n,"svm");this.rpcProviders.svm=o;break;case"ton":let c=new v.default({namespace:t});this.rpcProviders[e]=c;break;case"sui":let l=new a.SuiProvider({namespace:t});l.name="sui",this.rpcProviders[e]=l;break;case"btc":let d={namespace:t},h=new f.default(d,"btc");this.rpcProviders.btc=h;let O=new f.default(d,"fractal");this.rpcProviders.fractal=O;break;case"aptos":let _=new g.default({namespace:t},"aptos");this.rpcProviders[e]=_}})}registerEventListeners(){if(void 0===this.client)throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client is not initialized");this.client.engine.addDisconnectListener(()=>{this.disconnectAndEmit(),this.cleanup()}),this.on(c.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e)}),this.on(c.PROVIDER_EVENTS.UPDATE_NAMESPACES,e=>{if(e){let t=Object.keys(e)[0];this.session&&(this.session.namespaces[t]=e[t],this.session&&(this.persist("connectSession",this.session),this.events.emit("session_update",this.session)),(0,u.logDebug)("PROVIDER_EVENTS.UPDATE_NAMESPACES this.session... ->>>",JSON.stringify(this.session)))}})}getProvider(e){return(0,u.logDebug)("current get providers",this.rpcProviders),(0,u.logDebug)("query namespace: ",e),this.rpcProviders[e]}setNamespaces(e){this.connectOpts=e;let{namespaces:t,sessionConfig:n}=e,r={origin:window.location.origin,url:window.location.hostname,name:this.providerOpts.dappMetaData.name,icon:this.providerOpts.dappMetaData.icon};this.sessionConfig={dappInfo:r,openUniversalUrl:null==n?void 0:n.openUniversalUrl,redirect:null==n?void 0:n.redirect},(0,u.logDebug)("setNamespaces sessionConfig>>>",this.sessionConfig),this.client.sessionConfig=this.sessionConfig,this.persist("sessionConfig",n)}validateChain(e){var t;let[n,r]=(null==e?void 0:e.split(":"))||["",""];if(!this.session||!this.session.namespaces||!Object.keys(this.session.namespaces).length)return(0,u.logDebug)("get name & chain",n,r),[n,r];if(n){if(!this.isChainNamespaceInSession(n))throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(r&&e){(0,u.logDebug)("this.session.namespaces -->> ",n,JSON.stringify(this.session.namespaces));let r=null===(t=this.session.namespaces[n])||void 0===t?void 0:t.chains;if((0,u.logDebug)("get chainsArr & chain",JSON.stringify(r),e),r&&!r.includes(e))throw new u.OKXConnectError(u.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Namespace not include the chain '${e}'`)}}if(n&&r)return(0,u.logDebug)("get name & chain",n,r),[n,r];let i=(0,h.parseNamespaceKey)(Object.keys(this.session.namespaces)[0]),o=this.rpcProviders[i].getDefaultChain();return(0,u.logDebug)("get default chain:",o),[i,o]}isChainNamespaceInSession(e){var t,n;if(Object.keys((null===(t=this.session)||void 0===t?void 0:t.namespaces)||{}).map(e=>(0,h.parseNamespaceKey)(e)).includes(e))return!0;let r=!1;return Object.values((null===(n=this.session)||void 0===n?void 0:n.namespaces)||{}).forEach(t=>{t.chains.forEach(t=>{t.split(":")[0]==e&&(r=!0)})}),r}requestAccountsWithNamespace(e){return this.getProvider(e).requestAccounts()}requestDefaultChainWithNamespace(e){return this.getProvider(e).getDefaultChain()}requestAccounts(){return r(this,void 0,void 0,function*(){let[e]=this.validateChain();return yield this.getProvider(e).requestAccounts()})}onChainChanged(e){var t;if(!(null===(t=this.session)||void 0===t?void 0:t.namespaces))return;let[n,r]=this.validateChain(e);r&&(this.session.namespaces[n]&&(this.session.namespaces[n].defaultChain=r,this.persist("connectSession",this.session)),this.events.emit("chainChanged",r))}onConnect(){this.createProviders(),this.session&&this.persist("connectSession",this.session),this.events.emit("connect",{session:this.session}),this.registerEventListeners()}cleanup(){return r(this,void 0,void 0,function*(){this.session=void 0,this.sessionProperties=void 0,this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),this.persist("connectSession",void 0)})}persist(e,t){return(0,u.logDebug)("[evm u-provider] persisit data",e,t),this.client.engine.connectionManager.saveSessionContent(e,t)}getFromStore(e){return r(this,void 0,void 0,function*(){return this.client.engine.connectionManager.getSessionContent(e)})}showRequestModal(e,t){try{let{namespace:n,requestParam:r}=this.buildRequestParamFromRequest(e,t);return this.getProvider(n).showRequestModal(r)}catch(e){return!1}}}t.OKXUniversalProvider=O,t.default=O},44847:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXConnectError=t.OKX_CONNECT_ERROR_CODES=t.NameSpaceKeyBtc=t.NameSpaceKeySui=t.OKXBtcProvider=t.OKXUniversalProvider=void 0,i(n(25291),t);var o=n(33210);Object.defineProperty(t,"OKXUniversalProvider",{enumerable:!0,get:function(){return o.OKXUniversalProvider}});var s=n(32658);Object.defineProperty(t,"OKXBtcProvider",{enumerable:!0,get:function(){return s.OKXBtcProvider}});var a=n(90861);Object.defineProperty(t,"NameSpaceKeySui",{enumerable:!0,get:function(){return a.NameSpaceKeySui}}),Object.defineProperty(t,"NameSpaceKeyBtc",{enumerable:!0,get:function(){return a.NameSpaceKeyBtc}}),Object.defineProperty(t,"OKX_CONNECT_ERROR_CODES",{enumerable:!0,get:function(){return a.OKX_CONNECT_ERROR_CODES}}),Object.defineProperty(t,"OKXConnectError",{enumerable:!0,get:function(){return a.OKXConnectError}})},90415:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SignClient=void 0;let i=n(90861),o=n(43207),s=n(10723);class a extends i.ISignClient{constructor(e){super(e),this.engine=new i.Engine(new i.ConnectionManager),this.connect=e=>r(this,void 0,void 0,function*(){return new Promise((t,n)=>{var r=[];(0,i.logDebug)("client connect params >>>",JSON.stringify(e));var s={name:"requestAccounts",requiredNamespaces:(0,o.nameSpaceToConnectWalletNameSpace)(e.namespaces),optionalNamespaces:(0,o.nameSpaceToConnectWalletNameSpace)(e.optionalNamespaces)};(0,i.logDebug)("client connect connectRequest >>>",JSON.stringify(r)),r.push(s),this.engine.universalConnect(r,Object.assign({dappInfo:this.metadata},e.sessionConfig),e=>{if(e&&e.connectRequest){var t=(0,i.encodeConnectParams)(e.connectRequest);this.events.emit("display_uri",(0,i.getUniversalLink)((0,i.getAppWalletDeepLink)(t))),(0,i.logDebug)(`universalConect EngineConnectInfo  ${JSON.stringify(e)}`),this.events.emit("okx_engine_connect_params",e)}}).then(n=>{(0,o.fillParamsToSession)(n,e.namespaces,e.optionalNamespaces,this.sessionConfig),(0,i.logDebug)(`signClient: connect: session ${JSON.stringify(n)}`),t(n)}).catch(e=>{(0,i.logDebug)(`signClient: connect: catch ${JSON.stringify(e)}`),this.events.emit("connect_error",e),n(e)})})}),this.restoreconnect=e=>r(this,void 0,void 0,function*(){return new Promise((t,n)=>{this.engine.restoreconnect(e,e=>{t(e)})})}),this.reject=e=>r(this,void 0,void 0,function*(){}),this.request=e=>r(this,void 0,void 0,function*(){return new Promise((t,n)=>r(this,void 0,void 0,function*(){var r,o;(0,i.logDebug)("clint request --params>>>> >",null===(r=this.sessionConfig)||void 0===r?void 0:r.openUniversalUrl,JSON.stringify(e));try{(null===(o=this.sessionConfig)||void 0===o?void 0:o.openUniversalUrl)&&(0,i.isIos)()&&this.openOKXWallet(),yield this.engine.send(e,{resolve:e=>{if(delete e.requestId,(0,i.logDebug)("clint request --response >",JSON.stringify(e)),"error"in e&&e.error){let t=e.error;n(new i.OKXConnectError(e.error.code,e.method+":"+t.message))}else t(e)},onAck:()=>{var e;!(0,i.isIos)()&&(null===(e=this.sessionConfig)||void 0===e?void 0:e.openUniversalUrl)&&this.openOKXWallet()}})}catch(e){n(e)}}))}),this.disconnect=()=>r(this,void 0,void 0,function*(){return new Promise((e,t)=>{this.engine.send({method:"disconnect"},{onAck:()=>{e()}}).catch(e=>{console.log(`disconnect : ${JSON.stringify(e)}`),t(e)})})}),this.events=(0,s.getGlobal)("events"),this.metadata=e}openOKXWallet(){(0,i.logDebug)("bridge-provider ==>> connect_5"),(0,i.openOKXDeeplinkWithFallback)(i.standardDeeplink)}}t.SignClient=a},43207:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAccountsChains=function(e){let t=[];return e.forEach(e=>{let[n,r]=e.split(":");t.push(`${n}:${r}`)}),t},t.nameSpaceToConnectWalletNameSpace=function(e){var t=[];return e&&Object.keys(e).forEach(n=>{(n===r.NameSpaceKeyEip155||n===r.NameSpaceKeySOL||n===r.NameSpaceKeySui||n===r.NameSpaceKeyAptos||n==r.NameSpaceKeyBtc||n===r.NameSpaceKeyTON)&&e[n].chains&&t.push({namespace:n,chains:e[n].chains,params:e[n].params})}),t},t.fillParamsToSession=function(e,t,n,r){let i=(e,t)=>{Object.assign(e,t)},o=(e,t)=>{for(let n in t)t.hasOwnProperty(n)&&t[n].rpcMap&&(t[n].rpcMap&&(e[n].rpcMap||(e[n].rpcMap={}),i(e[n].rpcMap,t[n].rpcMap)),t[n].defaultChain&&void 0===e[n].defaultChain&&e[n].chains.some(e=>e.split(":")[1]===t[n].defaultChain)&&(e[n].defaultChain=t[n].defaultChain))};t&&o(e.namespaces,t),n&&o(e.namespaces,n),e.sessionConfig=r},t.isCaipNamespace=i,t.parseNamespaceKey=function(e){return i(e)?e.split(":")[0]:e};let r=n(90861);function i(e){return e.includes(":")}},83965:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PROVIDER_EVENTS=void 0,t.PROVIDER_EVENTS={DEFAULT_CHAIN_CHANGED:"default_chain_changed",UPDATE_NAMESPACES:"update_name_spaces"}},15941:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(64719),t),i(n(83965),t)},64719:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GENERIC_SUBPROVIDER_NAME=t.RPC_URL=t.STORAGE=t.CONTEXT=t.WC_VERSION=t.PROTOCOL=t.RELAY_URL=t.LOGGER=void 0,t.LOGGER="error",t.RELAY_URL="wss://relay.walletconnect.com",t.PROTOCOL="wc",t.WC_VERSION=2,t.CONTEXT="universal_provider",t.STORAGE=`${t.PROTOCOL}@${t.WC_VERSION}:${t.CONTEXT}:`,t.RPC_URL="https://rpc.walletconnect.com/v1/",t.GENERIC_SUBPROVIDER_NAME="generic"},62523:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let i=n(15941),o=n(90861),s=n(10723),a=n(73742),c=n(89525);class l{constructor(e,t){this.name="aptos",this.namespace=e.namespace,this.events=(0,s.getGlobal)("events"),this.client=(0,s.getGlobal)("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return r(this,void 0,void 0,function*(){return((0,o.logDebug)("solana request --args--string>",JSON.stringify(e)),(0,o.logDebug)("solana provider namespace: ",this.namespace),this.namespace.methods.includes(e.method))?this.client.request(e):this.getHttpProvider().request(e)})}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(i.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let n=(0,s.getChainId)(t),r=(0,s.getRpcUrl)(t,this.namespace),i=this.createHttpProvider(n,r);i&&(e[n]=i)}),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(void 0===t)throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){if(t)return new c.JsonRpcProvider(new a.JsonRpcConnection(t,(0,s.getGlobal)("disableProviderPing")));(0,o.logError)(`No RPC url provided for chainId: ${e}`)}showRequestModal(e){return!0}}t.default=l},93871:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let i=n(15941),o=n(90861),s=n(10723),a=n(73742),c=n(89525);class l{constructor(e,t){this.name=o.NameSpaceKeyBtc,this.namespace=e.namespace,this.events=(0,s.getGlobal)("events"),this.client=(0,s.getGlobal)("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return r(this,void 0,void 0,function*(){return((0,o.logDebug)("btc request --args--string>",JSON.stringify(e)),(0,o.logDebug)("btc provider namespace: ",JSON.stringify(this.namespace)),this.namespace.methods.includes(e.method))?this.client.request(e):this.getHttpProvider().request(e)})}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(i.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let n=(0,s.getChainId)(t),r=(0,s.getRpcUrl)(t,this.namespace),i=this.createHttpProvider(n,r);i&&(e[n]=i)}),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(void 0===t)throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){if(t)return new c.JsonRpcProvider(new a.JsonRpcConnection(t,(0,s.getGlobal)("disableProviderPing")));(0,o.logError)(`No RPC url provided for chainId: ${e}`)}showRequestModal(e){return!0}}t.default=l},36742:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Eip155Provider=void 0;let i=n(10723),o=n(15941),s=n(90861),a=n(89525),c=n(73742);class l{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=(0,i.getGlobal)("events"),this.client=(0,i.getGlobal)("client"),this.chainId=parseInt(this.getDefaultChain()),this.httpProviders=this.createHttpProviders(),(0,s.logDebug)("eip155 constructor --opts.namespace-->",e.namespace)}isRecord(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}isArray(e){return"object"==typeof e&&null!==e&&Array.isArray(e)}updateRequestParams(e){let t=e.params&&"object"==typeof e.params&&!Array.isArray(e.params);if("wallet_switchEthereumChain"===e.method){let n=e.chainId.split(":")[1],r=parseInt(n,10);if(isNaN(r))throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Invalid decimal number,  chainId: '${n}' `);if(e.params){if(t){let t=e.params;"chainId"in t||(t.chainId="0x"+r.toString(16),e.params=t)}else throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Request params error ,  method: '${e.method}' `)}else e.params={chainId:"0x"+r.toString(16)}}else if("personal_sign"===e.method||"eth_signTypedData_v4"===e.method||"eth_sendTransaction"===e.method||"wallet_watchAsset"===e.method){if(!e.params)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Request params is nil, method: '${e.method}'`);if(this.isRecord(e.params)){let t=e.params;if((0,s.logDebug)("eip155 updateRequestParams params>",JSON.stringify(t)),"chainId"in t){let n;let r=parseInt(e.chainId.split(":")[1],10),i=String(t.chainId);if(i.startsWith(this.name)&&e.chainId===i)n=r;else if(i.startsWith("0x"))n=parseInt(i,16);else if(isNaN(Number(i)))throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Invalid params.chainId format, method: '${e.method}'`);else n=parseInt(i,10);if(r!==n)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Request params.chainId not equal chain,  method: '${e.method}' `)}}else throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Invalid request params type, method: '${e.method}'`)}}adaptArray(e){if("wallet_switchEthereumChain"===e.method||"wallet_addEthereumChain"===e.method||"wallet_watchAsset"===e.method||"eth_sendTransaction"===e.method){if(this.isArray(e.params)){let t=e.params;if(t){if(1===t.length){let t=e.params[0];this.isRecord(t)&&(e.params=t)}else if(t.length>1)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params only Support one data,  method: '${e.method}' `);else throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is nil,  method: '${e.method}' `)}}}else if("eth_signTypedData_v4"===e.method){if(this.isArray(e.params)){let t=e.params;if(t&&t.length>2)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params only Support one data,  method: '${e.method}' `);if(t&&0===t.length)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is nil,  method: '${e.method}' `);let n={};if(t&&2===t.length){let t=e.params[0];if(t&&"string"==typeof t){let r=!1;if(this.namespace.accounts.forEach(e=>{e.split(":")[2]===t&&(r=!0)}),(0,s.logDebug)("eip155 adaptArray eth_signTypedData_v4 >>>isEqual: ",r),!r)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params address error, not equal,  method: '${e.method}' `);if(this.isRecord(e.params[1]))n=e.params[1];else throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params message data error,  method: '${e.method}' `)}else throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params address error , not string,  method: '${e.method}' `)}else if(t&&1===t.length){if(this.isRecord(e.params[0]))n=e.params[0];else throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params message data error,  method: '${e.method}' `)}try{let t=JSON.stringify(n);e.params={typedDataJson:t}}catch(t){throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params call JSON.stringify() failed,  method: '${e.method}' `)}}}else if("personal_sign"===e.method&&this.isArray(e.params)){if(e.params&&e.params.length>2)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params error,  method: '${e.method}' `);if(e.params&&0===e.params.length)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is nil,  method: '${e.method}' `);let t=e.params[0],n=e.params[1];if(n&&"string"==typeof n){let t=!1;if(this.namespace.accounts.forEach(e=>{e.split(":")[2]===n&&(t=!0)}),(0,s.logDebug)("eip155 adaptArray personal_sign >>>isEqual: ",t),!t)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params address error,  method: '${e.method}' `)}if(t&&"string"==typeof t)e.params={message:t};else throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is error,  method: '${e.method}' `)}}showRequestModal(e){switch(e.method){case"eth_requestAccounts":case"eth_accounts":case"eth_chainId":break;case"eth_sendTransaction":case"eth_signTransaction":case"eth_sign":case"personal_sign":case"eth_signTypedData":case"wallet_addEthereumChain":case"wallet_watchAsset":case"eth_signTypedData_v4":return!0;case"wallet_switchEthereumChain":{this.adaptArray(e),this.updateRequestParams(e);let{parsedChainId:t,hexChainId:n}=this.getHexChainIdFromRequest(e);return!this.isChainApproved(t)}}return!1}request(e){return r(this,void 0,void 0,function*(){switch(this.adaptArray(e),(0,s.logDebug)("eip155 request --args--string>",JSON.stringify(e)),this.updateRequestParams(e),(0,s.logDebug)("eip155 request --params--string>",JSON.stringify(e)),e.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_switchEthereumChain":return yield this.handleSwitchChain(e);case"wallet_addEthereumChain":return this.addEthereumChain(e)}if(!this.namespace.methods.includes(e.method))return(0,s.logDebug)("[RPC] request begin"),yield this.getHttpProvider().request(e);try{let t=yield this.client.request(e);if((0,s.logDebug)("eip155 request --response----string>",JSON.stringify(t)),this.isRecord(t)&&"result"in t){let e=t.result;if(e&&"string"==typeof e&&("true"===e||"false"===e))return(0,s.logDebug)("eip155 request --wallet_watchAsset>>>>","true"===e),"true"===e;return t.result}return t}catch(e){throw(0,s.logDebug)(`eip155 request --response --error--string> e instanceof OKXConnectError ${e instanceof s.OKXConnectError}`,JSON.stringify(e)),e}})}addEthereumChain(e){return r(this,void 0,void 0,function*(){let t=yield this.client.request(e);try{if("result"in t){let n=t.result;if(n){let t=n.split(":")[0],r=n.split(":")[1];if(this.namespace,this.namespace.accounts.push(n),this.namespace.chains.push(t+":"+r),this.isRecord(e.params)&&"rpcUrls"in e.params){let t=e.params.rpcUrls,n=t?t[0]:void 0;n&&(this.namespace.rpcMap?this.namespace.rpcMap[r]=n:this.namespace.rpcMap={[r]:n},this.setHttpProvider(r,n))}this.events.emit(o.PROVIDER_EVENTS.UPDATE_NAMESPACES,{eip155:this.namespace})}}else new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${e.method} request error`)}catch(t){throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${e.method} request  error`)}return null})}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){if(this.chainId=parseInt(e),!this.httpProviders[e]){let n=t||(0,i.getRpcUrl)(`${this.name}:${e}`,this.namespace);n?this.setHttpProvider(e,n):(0,s.logError)(`No RPC url provided for chainId: ${e}`)}this.events.emit(o.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return((0,s.logDebug)("eip155 getAccounts ",e,this.chainId),e)?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}getHexChainIdFromRequest(e){let t=e.params,n="0x0";t&&"chainId"in t&&(n=t.chainId),n=n.startsWith("0x")?n:`0x${n}`,(0,s.logDebug)("handleSwitchChain -->args ",e),(0,s.logDebug)("handleSwitchChain -->hexChainId ",n);let r=parseInt(n,16);return(0,s.logDebug)("handleSwitchChain -->parsedChainId ",r),{parsedChainId:r,hexChainId:n}}handleSwitchChain(e){return r(this,void 0,void 0,function*(){let{parsedChainId:t,hexChainId:n}=this.getHexChainIdFromRequest(e);if(this.isChainApproved(t))this.setDefaultChain(`${t}`);else{let r=yield this.client.request({method:"wallet_switchEthereumChain",chainId:e.chainId,params:{chainId:n}});try{if("result"in r){let e=r.result;if(e){let n=e.split(":")[0],i=e.split(":")[1];this.namespace,this.namespace.accounts.push(e),this.namespace.chains.push(n+":"+i),(0,s.logDebug)("handleSwitchChain -->wallet_switchEthereumChain ",r),this.setDefaultChain(`${t}`),this.events.emit(o.PROVIDER_EVENTS.UPDATE_NAMESPACES,{eip155:this.namespace})}}else new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${e.method} request error`)}catch(t){throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${e.method} request  error`)}}return null})}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}createHttpProvider(e,t){if(t)return new a.JsonRpcProvider(new c.JsonRpcConnection(t,(0,i.getGlobal)("disableProviderPing")));(0,s.logError)(`No RPC url provided for chainId: ${e}`)}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let n=(0,i.getChainId)(t),r=(0,i.getRpcUrl)(t,this.namespace);(0,s.logDebug)("get parsed chain and rpc:",n,r);let o=this.createHttpProvider(n,r);o&&(e[n]=o)}),(0,s.logDebug)("get http providermap:",e),e}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if((0,s.logDebug)("[RPC] get http provider:",e,t),void 0===t)throw Error(`JSON-RPC provider for ${e} not found`);return t}}t.Eip155Provider=l,t.default=l},73742:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcConnection=void 0;let o=n(36456),s=i(n(53394)),a=n(90861),c=n(90861),l={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class d{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new o.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,c.isHttpUrl)(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(){return r(this,arguments,void 0,function*(e=this.url){yield this.register(e)})}close(){return r(this,void 0,void 0,function*(){if(!this.isAvailable)throw Error("Connection already closed");this.onClose()})}send(e){return r(this,void 0,void 0,function*(){this.isAvailable||(yield this.register());try{let t=(0,a.safeJsonStringify)(e),n=yield(0,s.default)(this.url,Object.assign(Object.assign({},l),{body:t})),r=yield n.json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}})}register(){return r(this,arguments,void 0,function*(e=this.url){if(!(0,c.isHttpUrl)(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering)return new Promise((e,t)=>{this.events.once("register_error",e=>{t(e)}),this.events.once("open",()=>{if(void 0===this.isAvailable)return t(Error("HTTP connection is missing or invalid"));e()})});this.url=e,this.registering=!0;try{if(!this.disableProviderPing){let t=(0,a.safeJsonStringify)({id:1,jsonrpc:"2.0",method:"test",params:[]});yield(0,s.default)(e,Object.assign(Object.assign({},l),{body:t}))}this.onOpen()}catch(t){let e=this.parseError(t);throw this.events.emit("register_error",e),this.onClose(),e}})}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(void 0===e.data)return;let t="string"==typeof e.data?(0,a.safeJsonParse)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let n=this.parseError(t),r=n.message||n.toString(),i=(0,c.formatJsonRpcError)(e,r);this.events.emit("payload",i)}parseError(e,t=this.url){return(0,c.parseConnectionError)(e,t,"HTTP")}}t.JsonRpcConnection=d},89525:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcProvider=void 0;let i=n(36456),o=n(25291),s=n(90861),a=n(90861);class c extends o.IJSONRpcProvider{constructor(e){super(e),this.events=new i.EventEmitter,this.connected=!1,this.connecting=!1,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}connect(){return r(this,arguments,void 0,function*(e=this.connection){yield this.open(e)})}disconnect(){return r(this,void 0,void 0,function*(){yield this.close()})}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}request(e,t){return r(this,void 0,void 0,function*(){return this.requestStrict((0,s.formatJsonRpcRequest)(e.method,e.params||[],(0,s.getBigIntRpcId)().toString()),t)})}requestStrict(e,t){return r(this,void 0,void 0,function*(){return new Promise((n,i)=>r(this,void 0,void 0,function*(){if(!this.connection.connected)try{yield this.open()}catch(e){i(e)}this.events.on(`${e.id}`,e=>{(0,s.isJsonRpcError)(e)?i(e.error):n(e.result)});try{(0,a.logDebug)("[RPC] >>> send request",e,t),yield this.connection.send(e,t)}catch(e){i(e)}}))})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),(0,s.isJsonRpcResponse)(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}open(){return r(this,arguments,void 0,function*(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(yield this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),yield this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))})}close(){return r(this,void 0,void 0,function*(){yield this.connection.close()})}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}t.JsonRpcProvider=c},71542:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SolanaProvider=void 0;let i=n(15941),o=n(90861),s=n(10723),a=n(73742),c=n(89525);class l{constructor(e,t){this.name="solana",this.namespace=e.namespace,this.events=(0,s.getGlobal)("events"),this.client=(0,s.getGlobal)("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return r(this,void 0,void 0,function*(){return((0,o.logDebug)("solana request --args--string>",JSON.stringify(e)),(0,o.logDebug)("solana provider namespace: ",this.namespace),this.namespace.methods.includes(e.method))?this.client.request(e):this.getHttpProvider().request(e)})}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(i.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let n=(0,s.getChainId)(t),r=(0,s.getRpcUrl)(t,this.namespace),i=this.createHttpProvider(n,r);i&&(e[n]=i)}),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if(void 0===t)throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){if(t)return new c.JsonRpcProvider(new a.JsonRpcConnection(t,(0,s.getGlobal)("disableProviderPing")));(0,o.logError)(`No RPC url provided for chainId: ${e}`)}getPubkey(e){return this.getWalletAddress(e)}getWalletAddress(e){return e||(null==(e=this.namespace.defaultChain)?void 0:e.startsWith("solana"))||(e=`solana:${e}`),this.namespace.accounts.filter(function(t){return t.split(":").length>2&&t.startsWith(e)}).map(function(e){return e.split(":")[2]})[0]}showRequestModal(e){return!0}}t.SolanaProvider=l,t.default=l},40317:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SuiProvider=void 0;let i=n(15941),o=n(90861),s=n(10723),a=n(73742),c=n(89525);class l{constructor(e){this.name=o.NameSpaceKeySui,this.namespace=e.namespace,this.events=(0,s.getGlobal)("events"),this.client=(0,s.getGlobal)("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}request(e){return r(this,void 0,void 0,function*(){return((0,o.logDebug)("sui request --args--string>",JSON.stringify(e)),(0,o.logDebug)("sui provider namespace: ",this.namespace),this.namespace.methods.includes(e.method))?this.client.request(e):this.getHttpProvider().request(e)})}requestAccounts(){return this.getAccounts()}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(i.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let n=(0,s.getChainId)(t),r=(0,s.getRpcUrl)(t,this.namespace),i=this.createHttpProvider(n,r);i&&(e[n]=i)}),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if((0,o.logDebug)("[RPC] get http provider:",e,t),void 0===t)throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&((0,o.logDebug)("setHttpProvider",e,t),this.httpProviders[e]=n)}createHttpProvider(e,t){if(t)return new c.JsonRpcProvider(new a.JsonRpcConnection(t,(0,s.getGlobal)("disableProviderPing")));(0,o.logError)(`No RPC url provided for chainId: ${e}`)}getPubkey(e){return this.getWalletAddress(e)}getWalletAddress(e){return e||(null==(e=this.namespace.defaultChain)?void 0:e.startsWith("sui"))||(e=`sui:${e}`),this.namespace.accounts.filter(function(t){return t.split(":").length>2&&t.startsWith(e)}).map(function(e){return e.split(":")[2]})[0]}showRequestModal(e){switch(e.method){case"sui_signMessage":case"sui_signPersonalMessage":case"sui_signTransactionBlock":case"sui_signAndExecuteTransactionBlock":return!0}return!1}}t.SuiProvider=l,t.default=l},85231:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(t,"__esModule",{value:!0});let o=n(15941),s=n(90861),a=n(10723),c=n(73742),l=n(89525);class d{constructor(e){this.name=s.NameSpaceKeyTON,this.namespace=e.namespace,this.events=(0,a.getGlobal)("events"),this.client=(0,a.getGlobal)("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}isRecord(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}request(e){return r(this,void 0,void 0,function*(){var t,n,r,o;if((0,s.logDebug)("TONProvider request --args--string>",JSON.stringify(e)),(0,s.logDebug)("TONProvider request provider namespace: ",this.namespace),this.namespace.methods.includes(e.method)){if(!e.params)throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton request params is nil");if(this.isRecord(e.params)){let a=e.params,{validUntil:c}=a,l=i(a,["validUntil"]),d=null===(n=null===(t=this.namespace.payload)||void 0===t?void 0:t.ton_addr)||void 0===n?void 0:n.address;"from"in l&&(d=l.from||(null===(o=null===(r=this.namespace.payload)||void 0===r?void 0:r.ton_addr)||void 0===o?void 0:o.address)),e.params.from=d,e.params.network=this.getDefaultChain(),e.params.valid_until=c;let u=yield this.client.request(e);if(this.isRecord(u)&&"result"in u){let e={boc:u.result.toString()};return(0,s.logDebug)("TONProvider request provider response: ",JSON.stringify(u)),(0,s.logDebug)("TONProvider request provider result: ",JSON.stringify(e)),e}throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton_send request response is nil")}throw new s.OKXConnectError(s.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton request params type add nil")}return this.getHttpProvider().request(e)})}requestAccounts(){return this.getAccounts()}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(o.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){var e,t;let n=this.namespace.accounts;if((0,s.logDebug)("ton getAccounts accounts :",n),(0,s.logDebug)("ton getAccounts .namespace :",JSON.stringify(this.namespace)),!n)return[];let r=null===(t=null===(e=this.namespace.payload)||void 0===e?void 0:e.ton_addr)||void 0===t?void 0:t.address;return((0,s.logDebug)("ton getAccounts address :",r),r)?[r]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let n=(0,a.getChainId)(t),r=(0,a.getRpcUrl)(t,this.namespace),i=this.createHttpProvider(n,r);i&&(e[n]=i)}),e}getHttpProvider(){let e=`${this.chainId}`,t=this.httpProviders[e];if((0,s.logDebug)("[RPC] get http provider:",e,t),void 0===t)throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&((0,s.logDebug)("setHttpProvider",e,t),this.httpProviders[e]=n)}createHttpProvider(e,t){if(t)return new l.JsonRpcProvider(new c.JsonRpcConnection(t,(0,a.getGlobal)("disableProviderPing")));(0,s.logError)(`No RPC url provided for chainId: ${e}`)}showRequestModal(e){return"ton_sendTransaction"===e.method}}t.default=d},25291:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(1188),t),i(n(54510),t)},54510:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1188:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IJSONRpcProvider=t.IJSONRpcConnection=void 0;class n{}t.IJSONRpcConnection=n;class r{constructor(e){}}t.IJSONRpcProvider=r},48063:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setGlobal=t.getGlobal=void 0;let n={};t.getGlobal=e=>n[e],t.setGlobal=(e,t)=>{n[e]=t}},10723:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(7359),t),i(n(48063),t)},7359:function(e,t){"use strict";function n(e){let[t,n]=e.split(":");return{namespace:t,reference:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.getRpcUrl=function(e,t,r){var i;let o=n(e);return(null===(i=t.rpcMap)||void 0===i?void 0:i[o.reference])||""},t.getChainId=function(e){return e.includes(":")?e.split(":")[1]:e},t.convertChainIdToNumber=function(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):isNaN(Number(e=e.includes(":")?e.split(":")[1]:e))?e:Number(e)},t.parseChainId=n,t.mergeArrays=function(e=[],t=[]){return[...new Set([...e,...t])]}},22899:function(e,t,n){var r;r=function(e){var t,n,r,i,o,s,a,c,l,d,u,h,p,f;return t=e.lib.BlockCipher,n=e.algo,r=[],i=[],o=[],s=[],a=[],c=[],l=[],d=[],u=[],h=[],function(){for(var e=[],t=0;t<256;t++)t<128?e[t]=t<<1:e[t]=t<<1^283;for(var n=0,p=0,t=0;t<256;t++){var f=p^p<<1^p<<2^p<<3^p<<4;f=f>>>8^255&f^99,r[n]=f,i[f]=n;var g=e[n],v=e[g],O=e[v],_=257*e[f]^16843008*f;o[n]=_<<24|_>>>8,s[n]=_<<16|_>>>16,a[n]=_<<8|_>>>24,c[n]=_;var _=16843009*O^65537*v^257*g^16843008*n;l[f]=_<<24|_>>>8,d[f]=_<<16|_>>>16,u[f]=_<<8|_>>>24,h[f]=_,n?(n=g^e[e[e[O^g]]],p^=e[e[p]]):n=p=1}}(),p=[0,1,2,4,8,16,32,64,128,27,54],f=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e,t=this._keyPriorReset=this._key,n=t.words,i=t.sigBytes/4,o=((this._nRounds=i+6)+1)*4,s=this._keySchedule=[],a=0;a<o;a++)a<i?s[a]=n[a]:(e=s[a-1],a%i?i>6&&a%i==4&&(e=r[e>>>24]<<24|r[e>>>16&255]<<16|r[e>>>8&255]<<8|r[255&e]):e=(r[(e=e<<8|e>>>24)>>>24]<<24|r[e>>>16&255]<<16|r[e>>>8&255]<<8|r[255&e])^p[a/i|0]<<24,s[a]=s[a-i]^e);for(var c=this._invKeySchedule=[],f=0;f<o;f++){var a=o-f;if(f%4)var e=s[a];else var e=s[a-4];f<4||a<=4?c[f]=e:c[f]=l[r[e>>>24]]^d[r[e>>>16&255]]^u[r[e>>>8&255]]^h[r[255&e]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,s,a,c,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,d,u,h,i);var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,s,a){for(var c=this._nRounds,l=e[t]^n[0],d=e[t+1]^n[1],u=e[t+2]^n[2],h=e[t+3]^n[3],p=4,f=1;f<c;f++){var g=r[l>>>24]^i[d>>>16&255]^o[u>>>8&255]^s[255&h]^n[p++],v=r[d>>>24]^i[u>>>16&255]^o[h>>>8&255]^s[255&l]^n[p++],O=r[u>>>24]^i[h>>>16&255]^o[l>>>8&255]^s[255&d]^n[p++],_=r[h>>>24]^i[l>>>16&255]^o[d>>>8&255]^s[255&u]^n[p++];l=g,d=v,u=O,h=_}var g=(a[l>>>24]<<24|a[d>>>16&255]<<16|a[u>>>8&255]<<8|a[255&h])^n[p++],v=(a[d>>>24]<<24|a[u>>>16&255]<<16|a[h>>>8&255]<<8|a[255&l])^n[p++],O=(a[u>>>24]<<24|a[h>>>16&255]<<16|a[l>>>8&255]<<8|a[255&d])^n[p++],_=(a[h>>>24]<<24|a[l>>>16&255]<<16|a[d>>>8&255]<<8|a[255&u])^n[p++];e[t]=g,e[t+1]=v,e[t+2]=O,e[t+3]=_},keySize:8}),e.AES=t._createHelper(f),e.AES},e.exports=r(n(82977),n(6609),n(73855),n(5280),n(42562))},16761:function(e,t,n){var r;r=function(e){return function(){var t=e.lib.BlockCipher,n=e.algo;let r=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],i=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var o={pbox:[],sbox:[]};function s(e,t){let n=e.sbox[0][t>>24&255]+e.sbox[1][t>>16&255];return n^=e.sbox[2][t>>8&255],n+=e.sbox[3][255&t]}function a(e,t,n){let r,i=t,o=n;for(let t=0;t<16;++t)i^=e.pbox[t],o=s(e,i)^o,r=i,i=o,o=r;return r=i,i=o,o=r^e.pbox[16],{left:i^=e.pbox[17],right:o}}var c=n.Blowfish=t.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key;!function(e,t,n){for(let t=0;t<4;t++){e.sbox[t]=[];for(let n=0;n<256;n++)e.sbox[t][n]=i[t][n]}let o=0;for(let i=0;i<18;i++)e.pbox[i]=r[i]^t[o],++o>=n&&(o=0);let s=0,c=0,l=0;for(let t=0;t<18;t+=2)s=(l=a(e,s,c)).left,c=l.right,e.pbox[t]=s,e.pbox[t+1]=c;for(let t=0;t<4;t++)for(let n=0;n<256;n+=2)s=(l=a(e,s,c)).left,c=l.right,e.sbox[t][n]=s,e.sbox[t][n+1]=c}(o,e.words,e.sigBytes/4)}},encryptBlock:function(e,t){var n=a(o,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},decryptBlock:function(e,t){var n=function(e,t,n){let r,i=t,o=n;for(let t=17;t>1;--t)i^=e.pbox[t],o=s(e,i)^o,r=i,i=o,o=r;return r=i,i=o,o=r^e.pbox[1],{left:i^=e.pbox[0],right:o}}(o,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},blockSize:2,keySize:4,ivSize:2});e.Blowfish=t._createHelper(c)}(),e.Blowfish},e.exports=r(n(82977),n(6609),n(73855),n(5280),n(42562))},42562:function(e,t,n){var r;r=function(e){var t,n,r,i,o,s,a,c,l,d,u,h,p,f,g,v,O;e.lib.Cipher||(n=(t=e.lib).Base,r=t.WordArray,i=t.BufferedBlockAlgorithm,(o=e.enc).Utf8,s=o.Base64,a=e.algo.EvpKDF,c=t.Cipher=i.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?O:g}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()}),t.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),l=e.mode={},d=t.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),u=l.CBC=function(){var e=d.extend();function t(e,t,n){var r,i=this._iv;i?(r=i,this._iv=void 0):r=this._prevBlock;for(var o=0;o<n;o++)e[t+o]^=r[o]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize;t.call(this,e,n,i),r.encryptBlock(e,n),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,o=e.slice(n,n+i);r.decryptBlock(e,n),t.call(this,e,n,i),this._prevBlock=o}}),e}(),h=(e.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,i=n-e.sigBytes%n,o=i<<24|i<<16|i<<8|i,s=[],a=0;a<i;a+=4)s.push(o);var c=r.create(s,i);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},t.BlockCipher=c.extend({cfg:c.cfg.extend({mode:u,padding:h}),reset:function(){c.reset.call(this);var e,t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),p=t.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),f=(e.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?r.create([1398893684,1701076831]).concat(n).concat(t):t).toString(s)},parse:function(e){var t,n=s.parse(e),i=n.words;return 1398893684==i[0]&&1701076831==i[1]&&(t=r.create(i.slice(2,4)),i.splice(0,4),n.sigBytes-=16),p.create({ciphertext:n,salt:t})}},g=t.SerializableCipher=n.extend({cfg:n.extend({format:f}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),o=i.finalize(t),s=i.cfg;return p.create({ciphertext:o,key:n,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),v=(e.kdf={}).OpenSSL={execute:function(e,t,n,i,o){if(i||(i=r.random(8)),o)var s=a.create({keySize:t+n,hasher:o}).compute(e,i);else var s=a.create({keySize:t+n}).compute(e,i);var c=r.create(s.words.slice(t),4*n);return s.sigBytes=4*t,p.create({key:s,iv:c,salt:i})}},O=t.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:v}),encrypt:function(e,t,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize,r.salt,r.hasher);r.iv=i.iv;var o=g.encrypt.call(this,e,t,i.key,r);return o.mixIn(i),o},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt,r.hasher);return r.iv=i.iv,g.decrypt.call(this,e,t,i.key,r)}}))},e.exports=r(n(82977),n(5280))},82977:function(e,t,n){var r;r=function(){var e=e||function(e,t){if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(7091)}catch(e){}var r,i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},a=s.lib={},c=a.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=a.WordArray=c.extend({init:function(e,n){e=this.words=e||[],t!=n?this.sigBytes=n:this.sigBytes=4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=s<<24-(r+o)%4*8}else for(var a=0;a<i;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new l.init(t,e)}}),d=s.enc={},u=d.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},h=d.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},p=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},f=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,s=this.blockSize,a=o/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,d=e.min(4*c,o);if(c){for(var u=0;u<c;u+=s)this._doProcessBlock(i,u);n=i.splice(0,c),r.sigBytes-=d}return new l.init(n,d)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=f.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}});var g=s.algo={};return s}(Math);return e},e.exports=r()},6609:function(e,t,n){var r;r=function(e){var t;return t=e.lib.WordArray,e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var c=r.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var n=e.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<r.length;o++)i[r.charCodeAt(o)]=o}var s=r.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(n=a)}return function(e,n,r){for(var i=[],o=0,s=0;s<n;s++)if(s%4){var a=r[e.charCodeAt(s-1)]<<s%4*2|r[e.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=a<<24-o%4*8,o++}return t.create(i,o)}(e,n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64},e.exports=r(n(82977))},34947:function(e,t,n){var r;r=function(e){var t;return t=e.lib.WordArray,e.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var n=e.words,r=e.sigBytes,i=t?this._safe_map:this._map;e.clamp();for(var o=[],s=0;s<r;s+=3)for(var a=(n[s>>>2]>>>24-s%4*8&255)<<16|(n[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|n[s+2>>>2]>>>24-(s+2)%4*8&255,c=0;c<4&&s+.75*c<r;c++)o.push(i.charAt(a>>>6*(3-c)&63));var l=i.charAt(64);if(l)for(;o.length%4;)o.push(l);return o.join("")},parse:function(e,n){void 0===n&&(n=!0);var r=e.length,i=n?this._safe_map:this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var s=0;s<i.length;s++)o[i.charCodeAt(s)]=s}var a=i.charAt(64);if(a){var c=e.indexOf(a);-1!==c&&(r=c)}return function(e,n,r){for(var i=[],o=0,s=0;s<n;s++)if(s%4){var a=r[e.charCodeAt(s-1)]<<s%4*2|r[e.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=a<<24-o%4*8,o++}return t.create(i,o)}(e,r,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},e.enc.Base64url},e.exports=r(n(82977))},47425:function(e,t,n){var r;r=function(e){return function(){var t=e.lib.WordArray,n=e.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var o=t[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var n=e.length,r=[],i=0;i<n;i++)r[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return t.create(r,2*n)}},n.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o+=2){var s=r(t[o>>>2]>>>16-o%4*8&65535);i.push(String.fromCharCode(s))}return i.join("")},parse:function(e){for(var n=e.length,i=[],o=0;o<n;o++)i[o>>>1]|=r(e.charCodeAt(o)<<16-o%2*16);return t.create(i,2*n)}}}(),e.enc.Utf16},e.exports=r(n(82977))},5280:function(e,t,n){var r;r=function(e){var t,n,r,i,o,s;return n=(t=e.lib).Base,r=t.WordArray,o=(i=e.algo).MD5,s=i.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,i=this.cfg,o=i.hasher.create(),s=r.create(),a=s.words,c=i.keySize,l=i.iterations;a.length<c;){n&&o.update(n),n=o.update(e).finalize(t),o.reset();for(var d=1;d<l;d++)n=o.finalize(n),o.reset();s.concat(n)}return s.sigBytes=4*c,s}}),e.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)},e.EvpKDF},e.exports=r(n(82977),n(15299),n(83622))},96483:function(e,t,n){var r;r=function(e){var t,n;return t=e.lib.CipherParams,n=e.enc.Hex,e.format.Hex={stringify:function(e){return e.ciphertext.toString(n)},parse:function(e){var r=n.parse(e);return t.create({ciphertext:r})}},e.format.Hex},e.exports=r(n(82977),n(42562))},83622:function(e,t,n){var r;r=function(e){var t,n;t=e.lib.Base,n=e.enc.Utf8,e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,i=4*r;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),s=this._iKey=t.clone(),a=o.words,c=s.words,l=0;l<r;l++)a[l]^=1549556828,c[l]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})},e.exports=r(n(82977))},66912:function(e,t,n){var r;r=function(e){return e},e.exports=r(n(82977),n(23663),n(11122),n(47425),n(6609),n(34947),n(73855),n(15299),n(32185),n(69045),n(98191),n(83242),n(23405),n(97515),n(83622),n(61217),n(5280),n(42562),n(54518),n(62641),n(38582),n(87129),n(26367),n(47747),n(23561),n(3806),n(93037),n(40651),n(96483),n(22899),n(35751),n(26746),n(3609),n(54789),n(16761))},11122:function(e,t,n){var r;r=function(e){return function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,n=t.init;(t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,r=[],i=0;i<t;i++)r[i>>>2]|=e[i]<<24-i%4*8;n.call(this,r,t)}else n.apply(this,arguments)}).prototype=t}}(),e.lib.WordArray},e.exports=r(n(82977))},73855:function(e,t,n){var r;r=function(e){return function(t){var n=e.lib,r=n.WordArray,i=n.Hasher,o=e.algo,s=[];!function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0}();var a=o.MD5=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360}var o=this._hash.words,a=e[t+0],h=e[t+1],p=e[t+2],f=e[t+3],g=e[t+4],v=e[t+5],O=e[t+6],_=e[t+7],C=e[t+8],E=e[t+9],y=e[t+10],m=e[t+11],b=e[t+12],R=e[t+13],N=e[t+14],S=e[t+15],w=o[0],T=o[1],D=o[2],P=o[3];w=c(w,T,D,P,a,7,s[0]),P=c(P,w,T,D,h,12,s[1]),D=c(D,P,w,T,p,17,s[2]),T=c(T,D,P,w,f,22,s[3]),w=c(w,T,D,P,g,7,s[4]),P=c(P,w,T,D,v,12,s[5]),D=c(D,P,w,T,O,17,s[6]),T=c(T,D,P,w,_,22,s[7]),w=c(w,T,D,P,C,7,s[8]),P=c(P,w,T,D,E,12,s[9]),D=c(D,P,w,T,y,17,s[10]),T=c(T,D,P,w,m,22,s[11]),w=c(w,T,D,P,b,7,s[12]),P=c(P,w,T,D,R,12,s[13]),D=c(D,P,w,T,N,17,s[14]),T=c(T,D,P,w,S,22,s[15]),w=l(w,T,D,P,h,5,s[16]),P=l(P,w,T,D,O,9,s[17]),D=l(D,P,w,T,m,14,s[18]),T=l(T,D,P,w,a,20,s[19]),w=l(w,T,D,P,v,5,s[20]),P=l(P,w,T,D,y,9,s[21]),D=l(D,P,w,T,S,14,s[22]),T=l(T,D,P,w,g,20,s[23]),w=l(w,T,D,P,E,5,s[24]),P=l(P,w,T,D,N,9,s[25]),D=l(D,P,w,T,f,14,s[26]),T=l(T,D,P,w,C,20,s[27]),w=l(w,T,D,P,R,5,s[28]),P=l(P,w,T,D,p,9,s[29]),D=l(D,P,w,T,_,14,s[30]),T=l(T,D,P,w,b,20,s[31]),w=d(w,T,D,P,v,4,s[32]),P=d(P,w,T,D,C,11,s[33]),D=d(D,P,w,T,m,16,s[34]),T=d(T,D,P,w,N,23,s[35]),w=d(w,T,D,P,h,4,s[36]),P=d(P,w,T,D,g,11,s[37]),D=d(D,P,w,T,_,16,s[38]),T=d(T,D,P,w,y,23,s[39]),w=d(w,T,D,P,R,4,s[40]),P=d(P,w,T,D,a,11,s[41]),D=d(D,P,w,T,f,16,s[42]),T=d(T,D,P,w,O,23,s[43]),w=d(w,T,D,P,E,4,s[44]),P=d(P,w,T,D,b,11,s[45]),D=d(D,P,w,T,S,16,s[46]),T=d(T,D,P,w,p,23,s[47]),w=u(w,T,D,P,a,6,s[48]),P=u(P,w,T,D,_,10,s[49]),D=u(D,P,w,T,N,15,s[50]),T=u(T,D,P,w,v,21,s[51]),w=u(w,T,D,P,b,6,s[52]),P=u(P,w,T,D,f,10,s[53]),D=u(D,P,w,T,y,15,s[54]),T=u(T,D,P,w,h,21,s[55]),w=u(w,T,D,P,C,6,s[56]),P=u(P,w,T,D,S,10,s[57]),D=u(D,P,w,T,O,15,s[58]),T=u(T,D,P,w,R,21,s[59]),w=u(w,T,D,P,g,6,s[60]),P=u(P,w,T,D,m,10,s[61]),D=u(D,P,w,T,p,15,s[62]),T=u(T,D,P,w,E,21,s[63]),o[0]=o[0]+w|0,o[1]=o[1]+T|0,o[2]=o[2]+D|0,o[3]=o[3]+P|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var o=t.floor(r/4294967296);n[(i+64>>>9<<4)+15]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,n[(i+64>>>9<<4)+14]=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360,e.sigBytes=(n.length+1)*4,this._process();for(var s=this._hash,a=s.words,c=0;c<4;c++){var l=a[c];a[c]=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360}return s},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,r,i,o,s){var a=e+(t&n|~t&r)+i+s;return(a<<o|a>>>32-o)+t}function l(e,t,n,r,i,o,s){var a=e+(t&r|n&~r)+i+s;return(a<<o|a>>>32-o)+t}function d(e,t,n,r,i,o,s){var a=e+(t^n^r)+i+s;return(a<<o|a>>>32-o)+t}function u(e,t,n,r,i,o,s){var a=e+(n^(t|~r))+i+s;return(a<<o|a>>>32-o)+t}e.MD5=i._createHelper(a),e.HmacMD5=i._createHmacHelper(a)}(Math),e.MD5},e.exports=r(n(82977))},54518:function(e,t,n){var r;r=function(e){return e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function n(e,t,n,r){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,r.encryptBlock(i,0);for(var s=0;s<n;s++)e[t+s]^=i[s]}return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize;n.call(this,e,t,i,r),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,o=e.slice(t,t+i);n.call(this,e,t,i,r),this._prevBlock=o}}),t}(),e.mode.CFB},e.exports=r(n(82977),n(42562))},38582:function(e,t,n){var r;r=function(e){return(/** @preserve
	 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
	 * derived from CryptoJS.mode.CTR
	 * Jan Hruby jhruby.web@gmail.com
	 */e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function n(e){if((e>>24&255)==255){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0+(t<<16)+(n<<8)+r}else e+=16777216;return e}var r=t.Encryptor=t.extend({processBlock:function(e,t){var r,i=this._cipher,o=i.blockSize,s=this._iv,a=this._counter;s&&(a=this._counter=s.slice(0),this._iv=void 0),0===((r=a)[0]=n(r[0]))&&(r[1]=n(r[1]));var c=a.slice(0);i.encryptBlock(c,0);for(var l=0;l<o;l++)e[t+l]^=c[l]}});return t.Decryptor=r,t}(),e.mode.CTRGladman)},e.exports=r(n(82977),n(42562))},62641:function(e,t,n){var r;r=function(e){var t,n;return e.mode.CTR=(n=(t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var s=o.slice(0);n.encryptBlock(s,0),o[r-1]=o[r-1]+1|0;for(var a=0;a<r;a++)e[t+a]^=s[a]}}),t.Decryptor=n,t),e.mode.CTR},e.exports=r(n(82977),n(42562))},26367:function(e,t,n){var r;r=function(e){var t;return e.mode.ECB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t),e.mode.ECB},e.exports=r(n(82977),n(42562))},87129:function(e,t,n){var r;r=function(e){var t,n;return e.mode.OFB=(n=(t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var s=0;s<r;s++)e[t+s]^=o[s]}}),t.Decryptor=n,t),e.mode.OFB},e.exports=r(n(82977),n(42562))},47747:function(e,t,n){var r;r=function(e){return e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,i=r-n%r,o=n+i-1;e.clamp(),e.words[o>>>2]|=i<<24-o%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923},e.exports=r(n(82977),n(42562))},23561:function(e,t,n){var r;r=function(e){return e.pad.Iso10126={pad:function(t,n){var r=4*n,i=r-t.sigBytes%r;t.concat(e.lib.WordArray.random(i-1)).concat(e.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126},e.exports=r(n(82977),n(42562))},3806:function(e,t,n){var r;r=function(e){return e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971},e.exports=r(n(82977),n(42562))},40651:function(e,t,n){var r;r=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding},e.exports=r(n(82977),n(42562))},93037:function(e,t,n){var r;r=function(e){return e.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1,n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},e.pad.ZeroPadding},e.exports=r(n(82977),n(42562))},61217:function(e,t,n){var r;r=function(e){var t,n,r,i,o,s,a;return n=(t=e.lib).Base,r=t.WordArray,o=(i=e.algo).SHA256,s=i.HMAC,a=i.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:o,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=s.create(n.hasher,e),o=r.create(),a=r.create([1]),c=o.words,l=a.words,d=n.keySize,u=n.iterations;c.length<d;){var h=i.update(t).finalize(a);i.reset();for(var p=h.words,f=p.length,g=h,v=1;v<u;v++){g=i.finalize(g),i.reset();for(var O=g.words,_=0;_<f;_++)p[_]^=O[_]}o.concat(h),l[0]++}return o.sigBytes=4*d,o}}),e.PBKDF2=function(e,t,n){return a.create(n).compute(e,t)},e.PBKDF2},e.exports=r(n(82977),n(32185),n(83622))},54789:function(e,t,n){var r;r=function(e){return function(){var t=e.lib.StreamCipher,n=e.algo,r=[],i=[],o=[],s=n.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)a.call(this);for(var i=0;i<8;i++)r[i]^=n[i+4&7];if(t){var o=t.words,s=o[0],c=o[1],l=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360,d=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360,u=l>>>16|4294901760&d,h=d<<16|65535&l;r[0]^=l,r[1]^=u,r[2]^=d,r[3]^=h,r[4]^=l,r[5]^=u,r[6]^=d,r[7]^=h;for(var i=0;i<4;i++)a.call(this)}},_doProcessBlock:function(e,t){var n=this._X;a.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)r[i]=(r[i]<<8|r[i]>>>24)&16711935|(r[i]<<24|r[i]>>>8)&4278255360,e[t+i]^=r[i]},blockSize:4,ivSize:2});function a(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0;for(var n=0;n<8;n++){var r=e[n]+t[n],s=65535&r,a=r>>>16,c=((s*s>>>17)+s*a>>>15)+a*a,l=((4294901760&r)*r|0)+((65535&r)*r|0);o[n]=c^l}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.RabbitLegacy=t._createHelper(s)}(),e.RabbitLegacy},e.exports=r(n(82977),n(6609),n(73855),n(5280),n(42562))},3609:function(e,t,n){var r;r=function(e){return function(){var t=e.lib.StreamCipher,n=e.algo,r=[],i=[],o=[],s=n.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=(e[n]<<8|e[n]>>>24)&16711935|(e[n]<<24|e[n]>>>8)&4278255360;var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var n=0;n<4;n++)a.call(this);for(var n=0;n<8;n++)i[n]^=r[n+4&7];if(t){var o=t.words,s=o[0],c=o[1],l=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360,d=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360,u=l>>>16|4294901760&d,h=d<<16|65535&l;i[0]^=l,i[1]^=u,i[2]^=d,i[3]^=h,i[4]^=l,i[5]^=u,i[6]^=d,i[7]^=h;for(var n=0;n<4;n++)a.call(this)}},_doProcessBlock:function(e,t){var n=this._X;a.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)r[i]=(r[i]<<8|r[i]>>>24)&16711935|(r[i]<<24|r[i]>>>8)&4278255360,e[t+i]^=r[i]},blockSize:4,ivSize:2});function a(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0;for(var n=0;n<8;n++){var r=e[n]+t[n],s=65535&r,a=r>>>16,c=((s*s>>>17)+s*a>>>15)+a*a,l=((4294901760&r)*r|0)+((65535&r)*r|0);o[n]=c^l}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.Rabbit=t._createHelper(s)}(),e.Rabbit},e.exports=r(n(82977),n(6609),n(73855),n(5280),n(42562))},26746:function(e,t,n){var r;r=function(e){return function(){var t=e.lib.StreamCipher,n=e.algo,r=n.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],i=0;i<256;i++)r[i]=i;for(var i=0,o=0;i<256;i++){var s=i%n,a=t[s>>>2]>>>24-s%4*8&255;o=(o+r[i]+a)%256;var c=r[i];r[i]=r[o],r[o]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,n=this._j,r=0,i=0;i<4;i++){n=(n+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[n],e[n]=o,r|=e[(e[t]+e[n])%256]<<24-8*i}return this._i=t,this._j=n,r}e.RC4=t._createHelper(r);var o=n.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});e.RC4Drop=t._createHelper(o)}(),e.RC4},e.exports=r(n(82977),n(6609),n(73855),n(5280),n(42562))},97515:function(e,t,n){var r;r=function(e){return(/** @preserve
	(c) 2012 by Cédric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/function(t){var n=e.lib,r=n.WordArray,i=n.Hasher,o=e.algo,s=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),a=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=r.create([0,1518500249,1859775393,2400959708,2840853838]),u=r.create([1352829926,1548603684,1836072691,2053994217,0]),h=o.RIPEMD160=i.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n,r,i,o,h,f,g,v,O,_,C,E,y,m,b,R,N,S,w,T=0;T<16;T++){var D=t+T,P=e[D];e[D]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}var I=this._hash.words,k=d.words,K=u.words,A=s.words,x=a.words,U=c.words,M=l.words;m=O=I[0],b=_=I[1],R=C=I[2],N=E=I[3],S=y=I[4];for(var T=0;T<80;T+=1)w=O+e[t+A[T]]|0,T<16?w+=(_^C^E)+k[0]:T<32?w+=((n=_)&C|~n&E)+k[1]:T<48?w+=((_|~C)^E)+k[2]:T<64?w+=(r=_,i=C,(r&(o=E)|i&~o)+k[3]):w+=(_^(C|~E))+k[4],w|=0,w=(w=p(w,U[T]))+y|0,O=y,y=E,E=p(C,10),C=_,_=w,w=m+e[t+x[T]]|0,T<16?w+=(b^(R|~N))+K[0]:T<32?w+=(h=b,f=R,(h&(g=N)|f&~g)+K[1]):T<48?w+=((b|~R)^N)+K[2]:T<64?w+=((v=b)&R|~v&N)+K[3]:w+=(b^R^N)+K[4],w|=0,w=(w=p(w,M[T]))+S|0,m=S,S=N,N=p(R,10),R=b,b=w;w=I[1]+C+N|0,I[1]=I[2]+E+S|0,I[2]=I[3]+y+m|0,I[3]=I[4]+O+b|0,I[4]=I[0]+_+R|0,I[0]=w},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360,e.sigBytes=(t.length+1)*4,this._process();for(var i=this._hash,o=i.words,s=0;s<5;s++){var a=o[s];o[s]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360}return i},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t){return e<<t|e>>>32-t}e.RIPEMD160=i._createHelper(h),e.HmacRIPEMD160=i._createHmacHelper(h)}(Math),e.RIPEMD160)},e.exports=r(n(82977))},15299:function(e,t,n){var r;r=function(e){var t,n,r,i,o,s;return n=(t=e.lib).WordArray,r=t.Hasher,i=e.algo,o=[],s=i.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],a=n[3],c=n[4],l=0;l<80;l++){if(l<16)o[l]=0|e[t+l];else{var d=o[l-3]^o[l-8]^o[l-14]^o[l-16];o[l]=d<<1|d>>>31}var u=(r<<5|r>>>27)+c+o[l];l<20?u+=(i&s|~i&a)+1518500249:l<40?u+=(i^s^a)+1859775393:l<60?u+=(i&s|i&a|s&a)-1894007588:u+=(i^s^a)-899497514,c=a,a=s,s=i<<30|i>>>2,i=r,r=u}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),t[(r+64>>>9<<4)+15]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),e.SHA1=r._createHelper(s),e.HmacSHA1=r._createHmacHelper(s),e.SHA1},e.exports=r(n(82977))},69045:function(e,t,n){var r;r=function(e){var t,n,r,i;return t=e.lib.WordArray,r=(n=e.algo).SHA256,i=n.SHA224=r.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}}),e.SHA224=r._createHelper(i),e.HmacSHA224=r._createHmacHelper(i),e.SHA224},e.exports=r(n(82977),n(32185))},32185:function(e,t,n){var r;r=function(e){var t,n,r,i,o,s,a,c,l;return t=Math,r=(n=e.lib).WordArray,i=n.Hasher,o=e.algo,s=[],a=[],function(){function e(e){return(e-(0|e))*4294967296|0}for(var n=2,r=0;r<64;)(function(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0})(n)&&(r<8&&(s[r]=e(t.pow(n,.5))),a[r]=e(t.pow(n,1/3)),r++),n++}(),c=[],l=o.SHA256=i.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],l=n[4],d=n[5],u=n[6],h=n[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var f=c[p-15],g=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,v=c[p-2],O=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;c[p]=g+c[p-7]+O+c[p-16]}var _=l&d^~l&u,C=r&i^r&o^i&o,E=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),y=h+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+_+a[p]+c[p],m=E+C;h=u,u=d,d=l,l=s+y|0,s=o,o=i,i=r,r=y+m|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+l|0,n[5]=n[5]+d|0,n[6]=n[6]+u|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=t.floor(r/4294967296),n[(i+64>>>9<<4)+15]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),e.SHA256=i._createHelper(l),e.HmacSHA256=i._createHmacHelper(l),e.SHA256},e.exports=r(n(82977))},23405:function(e,t,n){var r;r=function(e){var t,n,r,i,o,s,a,c,l,d,u;return t=Math,r=(n=e.lib).WordArray,i=n.Hasher,o=e.x64.Word,s=e.algo,a=[],c=[],l=[],function(){for(var e=1,t=0,n=0;n<24;n++){a[e+5*t]=(n+1)*(n+2)/2%64;var r=t%5,i=(2*e+3*t)%5;e=r,t=i}for(var e=0;e<5;e++)for(var t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var s=1,d=0;d<24;d++){for(var u=0,h=0,p=0;p<7;p++){if(1&s){var f=(1<<p)-1;f<32?h^=1<<f:u^=1<<f-32}128&s?s=s<<1^113:s<<=1}l[d]=o.create(u,h)}}(),d=[],function(){for(var e=0;e<25;e++)d[e]=o.create()}(),u=s.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var o=e[t+2*i],s=e[t+2*i+1];o=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,s=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360;var u=n[i];u.high^=s,u.low^=o}for(var h=0;h<24;h++){for(var p=0;p<5;p++){for(var f=0,g=0,v=0;v<5;v++){var u=n[p+5*v];f^=u.high,g^=u.low}var O=d[p];O.high=f,O.low=g}for(var p=0;p<5;p++)for(var _=d[(p+4)%5],C=d[(p+1)%5],E=C.high,y=C.low,f=_.high^(E<<1|y>>>31),g=_.low^(y<<1|E>>>31),v=0;v<5;v++){var u=n[p+5*v];u.high^=f,u.low^=g}for(var m=1;m<25;m++){var f,g,u=n[m],b=u.high,R=u.low,N=a[m];N<32?(f=b<<N|R>>>32-N,g=R<<N|b>>>32-N):(f=R<<N-32|b>>>64-N,g=b<<N-32|R>>>64-N);var S=d[c[m]];S.high=f,S.low=g}var w=d[0],T=n[0];w.high=T.high,w.low=T.low;for(var p=0;p<5;p++)for(var v=0;v<5;v++){var m=p+5*v,u=n[m],D=d[m],P=d[(p+1)%5+5*v],I=d[(p+2)%5+5*v];u.high=D.high^~P.high&I.high,u.low=D.low^~P.low&I.low}var u=n[0],k=l[h];u.high^=k.high,u.low^=k.low}},_doFinalize:function(){var e=this._data,n=e.words;this._nDataBytes;var i=8*e.sigBytes,o=32*this.blockSize;n[i>>>5]|=1<<24-i%32,n[(t.ceil((i+1)/o)*o>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,c=a/8,l=[],d=0;d<c;d++){var u=s[d],h=u.high,p=u.low;h=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360,p=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,l.push(p),l.push(h)}return new r.init(l,a)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}}),e.SHA3=i._createHelper(u),e.HmacSHA3=i._createHmacHelper(u),e.SHA3},e.exports=r(n(82977),n(23663))},83242:function(e,t,n){var r;r=function(e){var t,n,r,i,o,s;return n=(t=e.x64).Word,r=t.WordArray,o=(i=e.algo).SHA512,s=i.SHA384=o.extend({_doReset:function(){this._hash=new r.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=16,e}}),e.SHA384=o._createHelper(s),e.HmacSHA384=o._createHmacHelper(s),e.SHA384},e.exports=r(n(82977),n(23663),n(98191))},98191:function(e,t,n){var r;r=function(e){return function(){var t=e.lib.Hasher,n=e.x64,r=n.Word,i=n.WordArray,o=e.algo;function s(){return r.create.apply(r,arguments)}var a=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=s()}();var l=o.SHA512=t.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],l=n[4],d=n[5],u=n[6],h=n[7],p=r.high,f=r.low,g=i.high,v=i.low,O=o.high,_=o.low,C=s.high,E=s.low,y=l.high,m=l.low,b=d.high,R=d.low,N=u.high,S=u.low,w=h.high,T=h.low,D=p,P=f,I=g,k=v,K=O,A=_,x=C,U=E,M=y,W=m,X=b,j=R,L=N,H=S,B=w,J=T,q=0;q<80;q++){var $,V,F=c[q];if(q<16)V=F.high=0|e[t+2*q],$=F.low=0|e[t+2*q+1];else{var G=c[q-15],z=G.high,Y=G.low,Q=(z>>>1|Y<<31)^(z>>>8|Y<<24)^z>>>7,Z=(Y>>>1|z<<31)^(Y>>>8|z<<24)^(Y>>>7|z<<25),ee=c[q-2],et=ee.high,en=ee.low,er=(et>>>19|en<<13)^(et<<3|en>>>29)^et>>>6,ei=(en>>>19|et<<13)^(en<<3|et>>>29)^(en>>>6|et<<26),eo=c[q-7],es=eo.high,ea=eo.low,ec=c[q-16],el=ec.high,ed=ec.low;V=Q+es+(($=Z+ea)>>>0<Z>>>0?1:0),$+=ei,V=V+er+($>>>0<ei>>>0?1:0),$+=ed,V=V+el+($>>>0<ed>>>0?1:0),F.high=V,F.low=$}var eu=M&X^~M&L,eh=W&j^~W&H,ep=D&I^D&K^I&K,ef=P&k^P&A^k&A,eg=(D>>>28|P<<4)^(D<<30|P>>>2)^(D<<25|P>>>7),ev=(P>>>28|D<<4)^(P<<30|D>>>2)^(P<<25|D>>>7),eO=(M>>>14|W<<18)^(M>>>18|W<<14)^(M<<23|W>>>9),e_=(W>>>14|M<<18)^(W>>>18|M<<14)^(W<<23|M>>>9),eC=a[q],eE=eC.high,ey=eC.low,em=J+e_,eb=B+eO+(em>>>0<J>>>0?1:0),em=em+eh,eb=eb+eu+(em>>>0<eh>>>0?1:0),em=em+ey,eb=eb+eE+(em>>>0<ey>>>0?1:0),em=em+$,eb=eb+V+(em>>>0<$>>>0?1:0),eR=ev+ef,eN=eg+ep+(eR>>>0<ev>>>0?1:0);B=L,J=H,L=X,H=j,X=M,j=W,M=x+eb+((W=U+em|0)>>>0<U>>>0?1:0)|0,x=K,U=A,K=I,A=k,I=D,k=P,D=eb+eN+((P=em+eR|0)>>>0<em>>>0?1:0)|0}f=r.low=f+P,r.high=p+D+(f>>>0<P>>>0?1:0),v=i.low=v+k,i.high=g+I+(v>>>0<k>>>0?1:0),_=o.low=_+A,o.high=O+K+(_>>>0<A>>>0?1:0),E=s.low=E+U,s.high=C+x+(E>>>0<U>>>0?1:0),m=l.low=m+W,l.high=y+M+(m>>>0<W>>>0?1:0),R=d.low=R+j,d.high=b+X+(R>>>0<j>>>0?1:0),S=u.low=S+H,u.high=N+L+(S>>>0<H>>>0?1:0),T=h.low=T+J,h.high=w+B+(T>>>0<J>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[(r+128>>>10<<5)+30]=Math.floor(n/4294967296),t[(r+128>>>10<<5)+31]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(l),e.HmacSHA512=t._createHmacHelper(l)}(),e.SHA512},e.exports=r(n(82977),n(23663))},35751:function(e,t,n){var r;r=function(e){return function(){var t=e.lib,n=t.WordArray,r=t.BlockCipher,i=e.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],a=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=i.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=o[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var i=this._subKeys=[],c=0;c<16;c++){for(var l=i[c]=[],d=a[c],n=0;n<24;n++)l[n/6|0]|=t[(s[n]-1+d)%28]<<31-n%6,l[4+(n/6|0)]|=t[28+(s[n+24]-1+d)%28]<<31-n%6;l[0]=l[0]<<1|l[0]>>>31;for(var n=1;n<7;n++)l[n]=l[n]>>>(n-1)*4+3;l[7]=l[7]<<5|l[7]>>>27}for(var u=this._invSubKeys=[],n=0;n<16;n++)u[n]=i[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],u.call(this,4,252645135),u.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),u.call(this,1,1431655765);for(var r=0;r<16;r++){for(var i=n[r],o=this._lBlock,s=this._rBlock,a=0,d=0;d<8;d++)a|=c[d][((s^i[d])&l[d])>>>0];this._lBlock=s,this._rBlock=o^a}var p=this._lBlock;this._lBlock=this._rBlock,this._rBlock=p,u.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),u.call(this,16,65535),u.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function u(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function h(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=r._createHelper(d);var p=i.TripleDES=r.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),r=e.length<4?e.slice(0,2):e.slice(2,4),i=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=d.createEncryptor(n.create(t)),this._des2=d.createEncryptor(n.create(r)),this._des3=d.createEncryptor(n.create(i))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=r._createHelper(p)}(),e.TripleDES},e.exports=r(n(82977),n(6609),n(73855),n(5280),n(42562))},23663:function(e,t,n){var r;r=function(e){var t,n,r,i;return n=(t=e.lib).Base,r=t.WordArray,(i=e.x64={}).Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),i.WordArray=n.extend({init:function(e,t){e=this.words=e||[],void 0!=t?this.sigBytes=t:this.sigBytes=8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],i=0;i<t;i++){var o=e[i];n.push(o.high),n.push(o.low)}return r.create(n,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),r=t.length,i=0;i<r;i++)t[i]=t[i].clone();return e}}),e},e.exports=r(n(82977))},408:function(e,t,n){"use strict";n.r(t),n.d(t,{CID:function(){return eI},bases:function(){return eB},bytes:function(){return r},codecs:function(){return eq},digest:function(){return f},hasher:function(){return g},hashes:function(){return eJ},varint:function(){return p}});var r={};n.r(r),n.d(r,{coerce:function(){return N},empty:function(){return y},equals:function(){return R},fromHex:function(){return b},fromString:function(){return w},isBinary:function(){return S},toHex:function(){return m},toString:function(){return T}});var i={};n.r(i),n.d(i,{identity:function(){return W}});var o={};n.r(o),n.d(o,{base2:function(){return X}});var s={};n.r(s),n.d(s,{base8:function(){return j}});var a={};n.r(a),n.d(a,{base10:function(){return L}});var c={};n.r(c),n.d(c,{base16:function(){return H},base16upper:function(){return B}});var l={};n.r(l),n.d(l,{base32:function(){return J},base32hex:function(){return F},base32hexpad:function(){return z},base32hexpadupper:function(){return Y},base32hexupper:function(){return G},base32pad:function(){return $},base32padupper:function(){return V},base32upper:function(){return q},base32z:function(){return Q}});var d={};n.r(d),n.d(d,{base36:function(){return Z},base36upper:function(){return ee}});var u={};n.r(u),n.d(u,{base58btc:function(){return et},base58flickr:function(){return en}});var h={};n.r(h),n.d(h,{base64:function(){return er},base64pad:function(){return ei},base64url:function(){return eo},base64urlpad:function(){return es}});var p={};n.r(p),n.d(p,{decode:function(){return el},encodeTo:function(){return ed},encodingLength:function(){return eu}});var f={};n.r(f),n.d(f,{Digest:function(){return eg},create:function(){return eh},decode:function(){return ep},equals:function(){return ef}});var g={};n.r(g),n.d(g,{Hasher:function(){return eO},from:function(){return ev}});var v={};n.r(v),n.d(v,{sha256:function(){return eC},sha512:function(){return eE}});var O={};n.r(O),n.d(O,{identity:function(){return ey}});var _={};n.r(_),n.d(_,{code:function(){return eR},decode:function(){return eS},encode:function(){return eN},name:function(){return eb}});var C={};n.r(C),n.d(C,{code:function(){return eT},decode:function(){return eP},encode:function(){return eD},name:function(){return ew}});var E=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==n[s])throw TypeError(o+" is ambiguous");n[s]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function u(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var r=0,i=0;e[t]===c;)r++,t++;for(var o=(e.length-t)*l+1>>>0,s=new Uint8Array(o);e[t];){var d=n[e.charCodeAt(t)];if(255===d)return;for(var u=0,h=o-1;(0!==d||u<i)&&-1!==h;h--,u++)d+=a*s[h]>>>0,s[h]=d%256>>>0,d=d/256>>>0;if(0!==d)throw Error("Non-zero carry");i=u,t++}if(" "!==e[t]){for(var p=o-i;p!==o&&0===s[p];)p++;for(var f=new Uint8Array(r+(o-p)),g=r;p!==o;)f[g++]=s[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,i=0,o=t.length;i!==o&&0===t[i];)i++,n++;for(var s=(o-i)*d+1>>>0,l=new Uint8Array(s);i!==o;){for(var u=t[i],h=0,p=s-1;(0!==u||h<r)&&-1!==p;p--,h++)u+=256*l[p]>>>0,l[p]=u%a>>>0,u=u/a>>>0;if(0!==u)throw Error("Non-zero carry");r=h,i++}for(var f=s-r;f!==s&&0===l[f];)f++;for(var g=c.repeat(n);f<s;++f)g+=e.charAt(l[f]);return g},decodeUnsafe:u,decode:function(e){var n=u(e);if(n)return n;throw Error(`Non-${t} character`)}}};let y=new Uint8Array(0),m=e=>e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),b=e=>{let t=e.match(/../g);return t?new Uint8Array(t.map(e=>parseInt(e,16))):y},R=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},N=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},S=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),w=e=>new TextEncoder().encode(e),T=e=>new TextDecoder().decode(e);class D{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class P{constructor(e,t,n){this.name=e,this.prefix=t,this.baseDecode=n}decode(e){if("string"==typeof e){if(e[0]===this.prefix)return this.baseDecode(e.slice(1));throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}throw Error("Can only multibase decode strings")}or(e){return new I({[this.prefix]:this,...e.decoders||{[e.prefix]:e}})}}class I{constructor(e){this.decoders=e}or(e){let t=e.decoders||{[e.prefix]:e};return new I({...this.decoders,...t})}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}class k{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new D(e,t,n),this.decoder=new P(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let K=({name:e,prefix:t,encode:n,decode:r})=>new k(e,t,n,r),A=({prefix:e,name:t,alphabet:n})=>{let{encode:r,decode:i}=E(n,t);return K({prefix:e,name:t,encode:r,decode:e=>N(i(e))})},x=(e,t,n,r)=>{let i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let o=e.length;for(;"="===e[o-1];)--o;let s=new Uint8Array(o*n/8|0),a=0,c=0,l=0;for(let t=0;t<o;++t){let o=i[e[t]];if(void 0===o)throw SyntaxError(`Non-${r} character`);c=c<<n|o,(a+=n)>=8&&(a-=8,s[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw SyntaxError("Unexpected end of data");return s},U=(e,t,n)=>{let r="="===t[t.length-1],i=(1<<n)-1,o="",s=0,a=0;for(let r=0;r<e.length;++r)for(a=a<<8|e[r],s+=8;s>n;)s-=n,o+=t[i&a>>s];if(s&&(o+=t[i&a<<n-s]),r)for(;o.length*n&7;)o+="=";return o},M=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>K({prefix:t,name:e,encode:e=>U(e,r,n),decode:t=>x(t,r,n,e)}),W=K({prefix:"\0",name:"identity",encode:e=>T(e),decode:e=>w(e)}),X=M({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),j=M({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),L=A({prefix:"9",name:"base10",alphabet:"0123456789"}),H=M({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),B=M({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),J=M({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),q=M({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),$=M({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),V=M({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),F=M({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),G=M({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),z=M({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Y=M({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Q=M({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Z=A({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ee=A({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),et=A({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),en=A({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),er=M({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ei=M({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),eo=M({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),es=M({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var ea=function e(t,n,r){n=n||[];for(var i=r=r||0;t>=2147483648;)n[r++]=255&t|128,t/=128;for(;-128&t;)n[r++]=255&t|128,t>>>=7;return n[r]=0|t,e.bytes=r-i+1,n},ec=function e(t,n){var r,i=0,n=n||0,o=0,s=n,a=t.length;do{if(s>=a)throw e.bytes=0,RangeError("Could not decode varint");r=t[s++],i+=o<28?(127&r)<<o:(127&r)*Math.pow(2,o),o+=7}while(r>=128);return e.bytes=s-n,i};let el=e=>[ec(e),ec.bytes],ed=(e,t,n=0)=>(ea(e,t,n),t),eu=e=>e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10,eh=(e,t)=>{let n=t.byteLength,r=eu(e),i=r+eu(n),o=new Uint8Array(i+n);return ed(e,o,0),ed(n,o,r),o.set(t,i),new eg(e,n,t,o)},ep=e=>{let t=N(e),[n,r]=el(t),[i,o]=el(t.subarray(r)),s=t.subarray(r+o);if(s.byteLength!==i)throw Error("Incorrect length");return new eg(n,i,s,t)},ef=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&R(e.bytes,t.bytes);class eg{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}let ev=({name:e,code:t,encode:n})=>new eO(e,t,n);class eO{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}async digest(e){if(e instanceof Uint8Array){let t=await this.encode(e);return eh(this.code,t)}throw Error("Unknown type, must be binary type")}}let e_=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),eC=ev({name:"sha2-256",code:18,encode:e_("SHA-256")}),eE=ev({name:"sha2-512",code:19,encode:e_("SHA-512")}),ey=ev({name:"identity",code:0,encode:e=>N(e)}),em=e=>N(e),{name:eb,code:eR,encode:eN,decode:eS}={name:"raw",code:85,decode:em,encode:em},{name:ew,code:eT,encode:eD,decode:eP}={name:"json",code:512,encode:e=>new TextEncoder().encode(JSON.stringify(e)),decode:e=>JSON.parse(new TextDecoder().decode(e))};class eI{constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this.byteOffset=r.byteOffset,this.byteLength=r.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:ej,byteLength:ej,code:eX,version:eX,multihash:eX,bytes:eX,_baseCache:ej,asCID:ej})}toV0(){if(0===this.version)return this;{let{code:e,multihash:t}=this;if(e!==ex)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==eU)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return eI.createV0(t)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=eh(e,t);return eI.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&ef(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:r}=this;return 0===n?eK(t,r,e||et.encoder):eA(t,r,e||J.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return eL(/^0\.0/,eH),!!(e&&(e[eW]||e.asCID===e))}get toBaseEncodedString(){throw Error("Deprecated, use .toString()")}get codec(){throw Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw Error('"multibaseName" property is deprecated')}get prefix(){throw Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof eI)return e;if(null!=e&&e.asCID===e){let{version:t,code:n,multihash:r,bytes:i}=e;return new eI(t,n,r,i||eM(t,n,r.bytes))}if(null==e||!0!==e[eW])return null;{let{version:t,multihash:n,code:r}=e,i=ep(n);return eI.create(t,r,i)}}static create(e,t,n){if("number"!=typeof t)throw Error("String codecs are no longer supported");switch(e){case 0:if(t===ex)return new eI(e,t,n,n.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${ex}) block encoding`);case 1:{let r=eM(e,t,n.bytes);return new eI(e,t,n,r)}default:throw Error("Invalid version")}}static createV0(e){return eI.create(0,ex,e)}static createV1(e,t){return eI.create(1,e,t)}static decode(e){let[t,n]=eI.decodeFirst(e);if(n.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=eI.inspectBytes(e),n=t.size-t.multihashSize,r=N(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw Error("Incorrect length");let i=r.subarray(t.multihashSize-t.digestSize),o=new eg(t.multihashCode,t.digestSize,i,r);return[0===t.version?eI.createV0(o):eI.createV1(t.codec,o),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[n,r]=el(e.subarray(t));return t+=r,n},r=n(),i=ex;if(18===r?(r=0,t=0):1===r&&(i=n()),0!==r&&1!==r)throw RangeError(`Invalid CID version ${r}`);let o=t,s=n(),a=n(),c=t+a;return{version:r,codec:i,multihashCode:s,digestSize:a,multihashSize:c-o,size:c}}static parse(e,t){let[n,r]=ek(e,t),i=eI.decode(r);return i._baseCache.set(n,e),i}}let ek=(e,t)=>{switch(e[0]){case"Q":return[et.prefix,(t||et).decode(`${et.prefix}${e}`)];case et.prefix:return[et.prefix,(t||et).decode(e)];case J.prefix:return[J.prefix,(t||J).decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},eK=(e,t,n)=>{let{prefix:r}=n;if(r!==et.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);let i=t.get(r);if(null!=i)return i;{let i=n.encode(e).slice(1);return t.set(r,i),i}},eA=(e,t,n)=>{let{prefix:r}=n,i=t.get(r);if(null!=i)return i;{let i=n.encode(e);return t.set(r,i),i}},ex=112,eU=18,eM=(e,t,n)=>{let r=eu(e),i=r+eu(t),o=new Uint8Array(i+n.byteLength);return ed(e,o,0),ed(t,o,r),o.set(n,i),o},eW=Symbol.for("@ipld/js-cid/CID"),eX={writable:!1,configurable:!1,enumerable:!0},ej={writable:!1,enumerable:!1,configurable:!1},eL=(e,t)=>{if(e.test("0.0.0-dev"))console.warn(t);else throw Error(t)},eH=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,eB={...i,...o,...s,...a,...c,...l,...d,...u,...h},eJ={...v,...O},eq={raw:_,json:C}}}]);